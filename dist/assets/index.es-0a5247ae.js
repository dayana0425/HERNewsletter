import{g as Ld,c as Gb,d as Md,e as Sr,f as Wl,_ as Wb}from"./index-c327062d.js";var _c={exports:{}},Nn=typeof Reflect=="object"?Reflect:null,Yl=Nn&&typeof Nn.apply=="function"?Nn.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Uo;Nn&&typeof Nn.ownKeys=="function"?Uo=Nn.ownKeys:Object.getOwnPropertySymbols?Uo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Uo=function(e){return Object.getOwnPropertyNames(e)};function Yb(i){console&&console.warn&&console.warn(i)}var jd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}_c.exports=ot;_c.exports.once=Zb;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var Jl=10;function Wo(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Jl},set:function(i){if(typeof i!="number"||i<0||jd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Jl=i}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||jd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Bd(i){return i._maxListeners===void 0?ot.defaultMaxListeners:i._maxListeners}ot.prototype.getMaxListeners=function(){return Bd(this)};ot.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var f=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw f.context=d,f}var g=u[e];if(g===void 0)return!1;if(typeof g=="function")Yl(g,this,t);else for(var _=g.length,w=kd(g,_),s=0;s<_;++s)Yl(w[s],this,t);return!0};function zd(i,e,t,s){var o,u,d;if(Wo(t),u=i._events,u===void 0?(u=i._events=Object.create(null),i._eventsCount=0):(u.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),u=i._events),d=u[e]),d===void 0)d=u[e]=t,++i._eventsCount;else if(typeof d=="function"?d=u[e]=s?[t,d]:[d,t]:s?d.unshift(t):d.push(t),o=Bd(i),o>0&&d.length>o&&!d.warned){d.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=i,f.type=e,f.count=d.length,Yb(f)}return i}ot.prototype.addListener=function(e,t){return zd(this,e,t,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,t){return zd(this,e,t,!0)};function Jb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qd(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=Jb.bind(s);return o.listener=t,s.wrapFn=o,o}ot.prototype.once=function(e,t){return Wo(t),this.on(e,qd(this,e,t)),this};ot.prototype.prependOnceListener=function(e,t){return Wo(t),this.prependListener(e,qd(this,e,t)),this};ot.prototype.removeListener=function(e,t){var s,o,u,d,f;if(Wo(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(u=-1,d=s.length-1;d>=0;d--)if(s[d]===t||s[d].listener===t){f=s[d].listener,u=d;break}if(u<0)return this;u===0?s.shift():Xb(s,u),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var u=Object.keys(s),d;for(o=0;o<u.length;++o)d=u[o],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function Hd(i,e,t){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Qb(o):kd(o,o.length)}ot.prototype.listeners=function(e){return Hd(this,e,!0)};ot.prototype.rawListeners=function(e){return Hd(this,e,!1)};ot.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Kd.call(i,e)};ot.prototype.listenerCount=Kd;function Kd(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Uo(this._events):[]};function kd(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function Xb(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Qb(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function Zb(i,e){return new Promise(function(t,s){function o(d){i.removeListener(e,u),s(d)}function u(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}Vd(i,e,u,{once:!0}),e!=="error"&&e_(i,o,{once:!0})})}function e_(i,e,t){typeof i.on=="function"&&Vd(i,"error",e,t)}function Vd(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(u){s.once&&i.removeEventListener(e,o),t(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var xr=_c.exports;const mc=Ld(xr);var wc={},Yo={},Ue={},Gd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,g){var _=f>>>16&65535,w=f&65535,T=g>>>16&65535,R=g&65535;return w*R+(_*R+w*T<<16>>>0)|0}i.mul=Math.imul||e;function t(f,g){return f+g|0}i.add=t;function s(f,g){return f-g|0}i.sub=s;function o(f,g){return f<<g|f>>>32-g}i.rotl=o;function u(f,g){return f<<32-g|f>>>g}i.rotr=u;function d(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||d,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})(Gd);Object.defineProperty(Ue,"__esModule",{value:!0});var Wd=Gd;function t_(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Ue.readInt16BE=t_;function r_(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Ue.readUint16BE=r_;function i_(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Ue.readInt16LE=i_;function n_(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Ue.readUint16LE=n_;function Yd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Ue.writeUint16BE=Yd;Ue.writeInt16BE=Yd;function Jd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Ue.writeUint16LE=Jd;Ue.writeInt16LE=Jd;function tc(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Ue.readInt32BE=tc;function rc(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Ue.readUint32BE=rc;function ic(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Ue.readInt32LE=ic;function nc(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Ue.readUint32LE=nc;function Bo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Ue.writeUint32BE=Bo;Ue.writeInt32BE=Bo;function zo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Ue.writeUint32LE=zo;Ue.writeInt32LE=zo;function s_(i,e){e===void 0&&(e=0);var t=tc(i,e),s=tc(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=s_;function o_(i,e){e===void 0&&(e=0);var t=rc(i,e),s=rc(i,e+4);return t*4294967296+s}Ue.readUint64BE=o_;function a_(i,e){e===void 0&&(e=0);var t=ic(i,e),s=ic(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=a_;function u_(i,e){e===void 0&&(e=0);var t=nc(i,e),s=nc(i,e+4);return s*4294967296+t}Ue.readUint64LE=u_;function Xd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Bo(i/4294967296>>>0,e,t),Bo(i>>>0,e,t+4),e}Ue.writeUint64BE=Xd;Ue.writeInt64BE=Xd;function Qd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),zo(i>>>0,e,t),zo(i/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=Qd;Ue.writeInt64LE=Qd;function c_(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,u=i/8+t-1;u>=t;u--)s+=e[u]*o,o*=256;return s}Ue.readUintBE=c_;function h_(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,u=t;u<t+i/8;u++)s+=e[u]*o,o*=256;return s}Ue.readUintLE=h_;function l_(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Wd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,u=i/8+s-1;u>=s;u--)t[u]=e/o&255,o*=256;return t}Ue.writeUintBE=l_;function f_(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Wd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,u=s;u<s+i/8;u++)t[u]=e/o&255,o*=256;return t}Ue.writeUintLE=f_;function d_(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=d_;function p_(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=p_;function g_(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=g_;function D_(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=D_;function v_(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Ue.writeFloat32BE=v_;function y_(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Ue.writeFloat32LE=y_;function b_(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Ue.writeFloat64BE=b_;function __(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Ue.writeFloat64LE=__;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function m_(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Ir.wipe=m_;Object.defineProperty(Yo,"__esModule",{value:!0});var rr=Ue,sc=Ir,w_=20;function E_(i,e,t){for(var s=1634760805,o=857760878,u=2036477234,d=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],_=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],T=t[19]<<24|t[18]<<16|t[17]<<8|t[16],R=t[23]<<24|t[22]<<16|t[21]<<8|t[20],N=t[27]<<24|t[26]<<16|t[25]<<8|t[24],x=t[31]<<24|t[30]<<16|t[29]<<8|t[28],j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],J=e[11]<<24|e[10]<<16|e[9]<<8|e[8],A=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=s,E=o,S=u,y=d,c=f,v=g,k=_,G=w,oe=T,ue=R,ge=N,$=x,q=j,le=H,re=J,W=A,te=0;te<w_;te+=2)P=P+c|0,q^=P,q=q>>>32-16|q<<16,oe=oe+q|0,c^=oe,c=c>>>32-12|c<<12,E=E+v|0,le^=E,le=le>>>32-16|le<<16,ue=ue+le|0,v^=ue,v=v>>>32-12|v<<12,S=S+k|0,re^=S,re=re>>>32-16|re<<16,ge=ge+re|0,k^=ge,k=k>>>32-12|k<<12,y=y+G|0,W^=y,W=W>>>32-16|W<<16,$=$+W|0,G^=$,G=G>>>32-12|G<<12,S=S+k|0,re^=S,re=re>>>32-8|re<<8,ge=ge+re|0,k^=ge,k=k>>>32-7|k<<7,y=y+G|0,W^=y,W=W>>>32-8|W<<8,$=$+W|0,G^=$,G=G>>>32-7|G<<7,E=E+v|0,le^=E,le=le>>>32-8|le<<8,ue=ue+le|0,v^=ue,v=v>>>32-7|v<<7,P=P+c|0,q^=P,q=q>>>32-8|q<<8,oe=oe+q|0,c^=oe,c=c>>>32-7|c<<7,P=P+v|0,W^=P,W=W>>>32-16|W<<16,ge=ge+W|0,v^=ge,v=v>>>32-12|v<<12,E=E+k|0,q^=E,q=q>>>32-16|q<<16,$=$+q|0,k^=$,k=k>>>32-12|k<<12,S=S+G|0,le^=S,le=le>>>32-16|le<<16,oe=oe+le|0,G^=oe,G=G>>>32-12|G<<12,y=y+c|0,re^=y,re=re>>>32-16|re<<16,ue=ue+re|0,c^=ue,c=c>>>32-12|c<<12,S=S+G|0,le^=S,le=le>>>32-8|le<<8,oe=oe+le|0,G^=oe,G=G>>>32-7|G<<7,y=y+c|0,re^=y,re=re>>>32-8|re<<8,ue=ue+re|0,c^=ue,c=c>>>32-7|c<<7,E=E+k|0,q^=E,q=q>>>32-8|q<<8,$=$+q|0,k^=$,k=k>>>32-7|k<<7,P=P+v|0,W^=P,W=W>>>32-8|W<<8,ge=ge+W|0,v^=ge,v=v>>>32-7|v<<7;rr.writeUint32LE(P+s|0,i,0),rr.writeUint32LE(E+o|0,i,4),rr.writeUint32LE(S+u|0,i,8),rr.writeUint32LE(y+d|0,i,12),rr.writeUint32LE(c+f|0,i,16),rr.writeUint32LE(v+g|0,i,20),rr.writeUint32LE(k+_|0,i,24),rr.writeUint32LE(G+w|0,i,28),rr.writeUint32LE(oe+T|0,i,32),rr.writeUint32LE(ue+R|0,i,36),rr.writeUint32LE(ge+N|0,i,40),rr.writeUint32LE($+x|0,i,44),rr.writeUint32LE(q+j|0,i,48),rr.writeUint32LE(le+H|0,i,52),rr.writeUint32LE(re+J|0,i,56),rr.writeUint32LE(W+A|0,i,60)}function Zd(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var u,d;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=new Uint8Array(16),d=u.length-e.length,u.set(e,d)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");u=e,d=o}for(var f=new Uint8Array(64),g=0;g<t.length;g+=64){E_(f,u,i);for(var _=g;_<g+64&&_<t.length;_++)s[_]=t[_]^f[_-g];S_(u,0,d)}return sc.wipe(f),o===0&&sc.wipe(u),s}Yo.streamXOR=Zd;function C_(i,e,t,s){return s===void 0&&(s=0),sc.wipe(t),Zd(i,e,t,t,s)}Yo.stream=C_;function S_(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var ep={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});function x_(i,e,t){return~(i-1)&e|i-1&t}Ui.select=x_;function I_(i,e){return(i|0)-(e|0)-1>>>31&1}Ui.lessOrEqual=I_;function tp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Ui.compare=tp;function A_(i,e){return i.length===0||e.length===0?!1:tp(i,e)!==0}Ui.equal=A_;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ui,t=Ir;i.DIGEST_LENGTH=16;var s=function(){function d(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var _=f[2]|f[3]<<8;this._r[1]=(g>>>13|_<<3)&8191;var w=f[4]|f[5]<<8;this._r[2]=(_>>>10|w<<6)&7939;var T=f[6]|f[7]<<8;this._r[3]=(w>>>7|T<<9)&8191;var R=f[8]|f[9]<<8;this._r[4]=(T>>>4|R<<12)&255,this._r[5]=R>>>1&8190;var N=f[10]|f[11]<<8;this._r[6]=(R>>>14|N<<2)&8191;var x=f[12]|f[13]<<8;this._r[7]=(N>>>11|x<<5)&8065;var j=f[14]|f[15]<<8;this._r[8]=(x>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return d.prototype._blocks=function(f,g,_){for(var w=this._fin?0:2048,T=this._h[0],R=this._h[1],N=this._h[2],x=this._h[3],j=this._h[4],H=this._h[5],J=this._h[6],A=this._h[7],P=this._h[8],E=this._h[9],S=this._r[0],y=this._r[1],c=this._r[2],v=this._r[3],k=this._r[4],G=this._r[5],oe=this._r[6],ue=this._r[7],ge=this._r[8],$=this._r[9];_>=16;){var q=f[g+0]|f[g+1]<<8;T+=q&8191;var le=f[g+2]|f[g+3]<<8;R+=(q>>>13|le<<3)&8191;var re=f[g+4]|f[g+5]<<8;N+=(le>>>10|re<<6)&8191;var W=f[g+6]|f[g+7]<<8;x+=(re>>>7|W<<9)&8191;var te=f[g+8]|f[g+9]<<8;j+=(W>>>4|te<<12)&8191,H+=te>>>1&8191;var Y=f[g+10]|f[g+11]<<8;J+=(te>>>14|Y<<2)&8191;var ie=f[g+12]|f[g+13]<<8;A+=(Y>>>11|ie<<5)&8191;var xe=f[g+14]|f[g+15]<<8;P+=(ie>>>8|xe<<8)&8191,E+=xe>>>5|w;var ne=0,_e=ne;_e+=T*S,_e+=R*(5*$),_e+=N*(5*ge),_e+=x*(5*ue),_e+=j*(5*oe),ne=_e>>>13,_e&=8191,_e+=H*(5*G),_e+=J*(5*k),_e+=A*(5*v),_e+=P*(5*c),_e+=E*(5*y),ne+=_e>>>13,_e&=8191;var he=ne;he+=T*y,he+=R*S,he+=N*(5*$),he+=x*(5*ge),he+=j*(5*ue),ne=he>>>13,he&=8191,he+=H*(5*oe),he+=J*(5*G),he+=A*(5*k),he+=P*(5*v),he+=E*(5*c),ne+=he>>>13,he&=8191;var ye=ne;ye+=T*c,ye+=R*y,ye+=N*S,ye+=x*(5*$),ye+=j*(5*ge),ne=ye>>>13,ye&=8191,ye+=H*(5*ue),ye+=J*(5*oe),ye+=A*(5*G),ye+=P*(5*k),ye+=E*(5*v),ne+=ye>>>13,ye&=8191;var z=ne;z+=T*v,z+=R*c,z+=N*y,z+=x*S,z+=j*(5*$),ne=z>>>13,z&=8191,z+=H*(5*ge),z+=J*(5*ue),z+=A*(5*oe),z+=P*(5*G),z+=E*(5*k),ne+=z>>>13,z&=8191;var B=ne;B+=T*k,B+=R*v,B+=N*c,B+=x*y,B+=j*S,ne=B>>>13,B&=8191,B+=H*(5*$),B+=J*(5*ge),B+=A*(5*ue),B+=P*(5*oe),B+=E*(5*G),ne+=B>>>13,B&=8191;var F=ne;F+=T*G,F+=R*k,F+=N*v,F+=x*c,F+=j*y,ne=F>>>13,F&=8191,F+=H*S,F+=J*(5*$),F+=A*(5*ge),F+=P*(5*ue),F+=E*(5*oe),ne+=F>>>13,F&=8191;var l=ne;l+=T*oe,l+=R*G,l+=N*k,l+=x*v,l+=j*c,ne=l>>>13,l&=8191,l+=H*y,l+=J*S,l+=A*(5*$),l+=P*(5*ge),l+=E*(5*ue),ne+=l>>>13,l&=8191;var I=ne;I+=T*ue,I+=R*oe,I+=N*G,I+=x*k,I+=j*v,ne=I>>>13,I&=8191,I+=H*c,I+=J*y,I+=A*S,I+=P*(5*$),I+=E*(5*ge),ne+=I>>>13,I&=8191;var se=ne;se+=T*ge,se+=R*ue,se+=N*oe,se+=x*G,se+=j*k,ne=se>>>13,se&=8191,se+=H*v,se+=J*c,se+=A*y,se+=P*S,se+=E*(5*$),ne+=se>>>13,se&=8191;var fe=ne;fe+=T*$,fe+=R*ge,fe+=N*ue,fe+=x*oe,fe+=j*G,ne=fe>>>13,fe&=8191,fe+=H*k,fe+=J*v,fe+=A*c,fe+=P*y,fe+=E*S,ne+=fe>>>13,fe&=8191,ne=(ne<<2)+ne|0,ne=ne+_e|0,_e=ne&8191,ne=ne>>>13,he+=ne,T=_e,R=he,N=ye,x=z,j=B,H=F,J=l,A=I,P=se,E=fe,g+=16,_-=16}this._h[0]=T,this._h[1]=R,this._h[2]=N,this._h[3]=x,this._h[4]=j,this._h[5]=H,this._h[6]=J,this._h[7]=A,this._h[8]=P,this._h[9]=E},d.prototype.finish=function(f,g){g===void 0&&(g=0);var _=new Uint16Array(10),w,T,R,N;if(this._leftover){for(N=this._leftover,this._buffer[N++]=1;N<16;N++)this._buffer[N]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(w=this._h[1]>>>13,this._h[1]&=8191,N=2;N<10;N++)this._h[N]+=w,w=this._h[N]>>>13,this._h[N]&=8191;for(this._h[0]+=w*5,w=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=w,w=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=w,_[0]=this._h[0]+5,w=_[0]>>>13,_[0]&=8191,N=1;N<10;N++)_[N]=this._h[N]+w,w=_[N]>>>13,_[N]&=8191;for(_[9]-=8192,T=(w^1)-1,N=0;N<10;N++)_[N]&=T;for(T=~T,N=0;N<10;N++)this._h[N]=this._h[N]&T|_[N];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,R=this._h[0]+this._pad[0],this._h[0]=R&65535,N=1;N<8;N++)R=(this._h[N]+this._pad[N]|0)+(R>>>16)|0,this._h[N]=R&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},d.prototype.update=function(f){var g=0,_=f.length,w;if(this._leftover){w=16-this._leftover,w>_&&(w=_);for(var T=0;T<w;T++)this._buffer[this._leftover+T]=f[g+T];if(_-=w,g+=w,this._leftover+=w,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(_>=16&&(w=_-_%16,this._blocks(f,g,w),g+=w,_-=w),_){for(var T=0;T<_;T++)this._buffer[this._leftover+T]=f[g+T];this._leftover+=_}return this},d.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},d.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},d}();i.Poly1305=s;function o(d,f){var g=new s(d);g.update(f);var _=g.digest();return g.clean(),_}i.oneTimeAuth=o;function u(d,f){return d.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(d,f)}i.equal=u})(ep);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Yo,t=ep,s=Ir,o=Ue,u=Ui;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var d=new Uint8Array(16),f=function(){function g(_){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,_.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(_)}return g.prototype.seal=function(_,w,T,R){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var N=new Uint8Array(16);N.set(_,N.length-_.length);var x=new Uint8Array(32);e.stream(this._key,N,x,4);var j=w.length+this.tagLength,H;if(R){if(R.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");H=R}else H=new Uint8Array(j);return e.streamXOR(this._key,N,w,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),x,H.subarray(0,H.length-this.tagLength),T),s.wipe(N),H},g.prototype.open=function(_,w,T,R){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(w.length<this.tagLength)return null;var N=new Uint8Array(16);N.set(_,N.length-_.length);var x=new Uint8Array(32);e.stream(this._key,N,x,4);var j=new Uint8Array(this.tagLength);if(this._authenticate(j,x,w.subarray(0,w.length-this.tagLength),T),!u.equal(j,w.subarray(w.length-this.tagLength,w.length)))return null;var H=w.length-this.tagLength,J;if(R){if(R.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");J=R}else J=new Uint8Array(H);return e.streamXOR(this._key,N,w.subarray(0,w.length-this.tagLength),J,4),s.wipe(N),J},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(_,w,T,R){var N=new t.Poly1305(w);R&&(N.update(R),R.length%16>0&&N.update(d.subarray(R.length%16))),N.update(T),T.length%16>0&&N.update(d.subarray(T.length%16));var x=new Uint8Array(8);R&&o.writeUint64LE(R.length,x),N.update(x),o.writeUint64LE(T.length,x),N.update(x);for(var j=N.digest(),H=0;H<j.length;H++)_[H]=j[H];N.clean(),s.wipe(j),s.wipe(x)},g}();i.ChaCha20Poly1305=f})(wc);var rp={},ms={},Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});function O_(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Ec.isSerializableHash=O_;Object.defineProperty(ms,"__esModule",{value:!0});var ii=Ec,P_=Ui,T_=Ir,ip=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ii.isSerializableHash(this._inner)&&ii.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),T_.wipe(s)}return i.prototype.reset=function(){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ii.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ii.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();ms.HMAC=ip;function N_(i,e,t){var s=new ip(i,e);s.update(t);var o=s.digest();return s.clean(),o}ms.hmac=N_;ms.equal=P_.equal;Object.defineProperty(rp,"__esModule",{value:!0});var Xl=ms,Ql=Ir,F_=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var u=Xl.hmac(this._hash,s,t);this._hmac=new Xl.HMAC(e,u),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),Ql.wipe(this._buffer),Ql.wipe(this._counter),this._bufpos=0},i}(),R_=rp.HKDF=F_,$n={},Jo={},Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.BrowserRandomSource=void 0;const Zl=65536;class $_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=Zl)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,Zl)));return t}}Xo.BrowserRandomSource=$_;function U_(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.NodeRandomSource=void 0;const L_=Ir;class M_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof U_<"u"){const e=Gb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,L_.wipe)(t),s}}Qo.NodeRandomSource=M_;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.SystemRandomSource=void 0;const j_=Xo,B_=Qo;class z_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new j_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new B_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Jo.SystemRandomSource=z_;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=Jo,t=Ue,s=Ir;i.defaultRandomSource=new e.SystemRandomSource;function o(_,w=i.defaultRandomSource){return w.randomBytes(_)}i.randomBytes=o;function u(_=i.defaultRandomSource){const w=o(4,_),T=(0,t.readUint32LE)(w);return(0,s.wipe)(w),T}i.randomUint32=u;const d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(_,w=d,T=i.defaultRandomSource){if(w.length<2)throw new Error("randomString charset is too short");if(w.length>256)throw new Error("randomString charset is too long");let R="";const N=w.length,x=256-256%N;for(;_>0;){const j=o(Math.ceil(_*256/x),T);for(let H=0;H<j.length&&_>0;H++){const J=j[H];J<x&&(R+=w.charAt(J%N),_--)}(0,s.wipe)(j)}return R}i.randomString=f;function g(_,w=d,T=i.defaultRandomSource){const R=Math.ceil(_/(Math.log(w.length)/Math.LN2));return f(R,w,T)}i.randomStringForEntropy=g})($n);var Zo={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Ir;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(g,_){if(_===void 0&&(_=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&_>0;)this._buffer[this._bufferLength++]=g[w++],_--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(w=u(this._temp,this._state,g,w,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=g[w++],_--;return this},f.prototype.finish=function(g){if(!this._finished){var _=this._bytesHashed,w=this._bufferLength,T=_/536870912|0,R=_<<3,N=_%64<56?64:128;this._buffer[w]=128;for(var x=w+1;x<N-8;x++)this._buffer[x]=0;e.writeUint32BE(T,this._buffer,N-8),e.writeUint32BE(R,this._buffer,N-4),u(this._temp,this._state,this._buffer,0,N),this._finished=!0}for(var x=0;x<this.digestLength/4;x++)e.writeUint32BE(this._state[x],g,x*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.state),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(f,g,_,w,T){for(;T>=64;){for(var R=g[0],N=g[1],x=g[2],j=g[3],H=g[4],J=g[5],A=g[6],P=g[7],E=0;E<16;E++){var S=w+E*4;f[E]=e.readUint32BE(_,S)}for(var E=16;E<64;E++){var y=f[E-2],c=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=f[E-15];var v=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;f[E]=(c+f[E-7]|0)+(v+f[E-16]|0)}for(var E=0;E<64;E++){var c=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&J^~H&A)|0)+(P+(o[E]+f[E]|0)|0)|0,v=((R>>>2|R<<32-2)^(R>>>13|R<<32-13)^(R>>>22|R<<32-22))+(R&N^R&x^N&x)|0;P=A,A=J,J=H,H=j+c|0,j=x,x=N,N=R,R=c+v|0}g[0]+=R,g[1]+=N,g[2]+=x,g[3]+=j,g[4]+=H,g[5]+=J,g[6]+=A,g[7]+=P,w+=64,T-=64}return w}function d(f){var g=new s;g.update(f);var _=g.digest();return g.clean(),_}i.hash=d})(Zo);var Cc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=$n,t=Ir;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(E){const S=new Float64Array(16);if(E)for(let y=0;y<E.length;y++)S[y]=E[y];return S}const o=new Uint8Array(32);o[0]=9;const u=s([56129,1]);function d(E){let S=1;for(let y=0;y<16;y++){let c=E[y]+S+65535;S=Math.floor(c/65536),E[y]=c-S*65536}E[0]+=S-1+37*(S-1)}function f(E,S,y){const c=~(y-1);for(let v=0;v<16;v++){const k=c&(E[v]^S[v]);E[v]^=k,S[v]^=k}}function g(E,S){const y=s(),c=s();for(let v=0;v<16;v++)c[v]=S[v];d(c),d(c),d(c);for(let v=0;v<2;v++){y[0]=c[0]-65517;for(let G=1;G<15;G++)y[G]=c[G]-65535-(y[G-1]>>16&1),y[G-1]&=65535;y[15]=c[15]-32767-(y[14]>>16&1);const k=y[15]>>16&1;y[14]&=65535,f(c,y,1-k)}for(let v=0;v<16;v++)E[2*v]=c[v]&255,E[2*v+1]=c[v]>>8}function _(E,S){for(let y=0;y<16;y++)E[y]=S[2*y]+(S[2*y+1]<<8);E[15]&=32767}function w(E,S,y){for(let c=0;c<16;c++)E[c]=S[c]+y[c]}function T(E,S,y){for(let c=0;c<16;c++)E[c]=S[c]-y[c]}function R(E,S,y){let c,v,k=0,G=0,oe=0,ue=0,ge=0,$=0,q=0,le=0,re=0,W=0,te=0,Y=0,ie=0,xe=0,ne=0,_e=0,he=0,ye=0,z=0,B=0,F=0,l=0,I=0,se=0,fe=0,Ce=0,qe=0,ke=0,Le=0,gt=0,Dt=0,je=y[0],Se=y[1],Fe=y[2],Re=y[3],Be=y[4],Ae=y[5],$e=y[6],Ee=y[7],Oe=y[8],He=y[9],Ie=y[10],Ve=y[11],We=y[12],et=y[13],tt=y[14],Je=y[15];c=S[0],k+=c*je,G+=c*Se,oe+=c*Fe,ue+=c*Re,ge+=c*Be,$+=c*Ae,q+=c*$e,le+=c*Ee,re+=c*Oe,W+=c*He,te+=c*Ie,Y+=c*Ve,ie+=c*We,xe+=c*et,ne+=c*tt,_e+=c*Je,c=S[1],G+=c*je,oe+=c*Se,ue+=c*Fe,ge+=c*Re,$+=c*Be,q+=c*Ae,le+=c*$e,re+=c*Ee,W+=c*Oe,te+=c*He,Y+=c*Ie,ie+=c*Ve,xe+=c*We,ne+=c*et,_e+=c*tt,he+=c*Je,c=S[2],oe+=c*je,ue+=c*Se,ge+=c*Fe,$+=c*Re,q+=c*Be,le+=c*Ae,re+=c*$e,W+=c*Ee,te+=c*Oe,Y+=c*He,ie+=c*Ie,xe+=c*Ve,ne+=c*We,_e+=c*et,he+=c*tt,ye+=c*Je,c=S[3],ue+=c*je,ge+=c*Se,$+=c*Fe,q+=c*Re,le+=c*Be,re+=c*Ae,W+=c*$e,te+=c*Ee,Y+=c*Oe,ie+=c*He,xe+=c*Ie,ne+=c*Ve,_e+=c*We,he+=c*et,ye+=c*tt,z+=c*Je,c=S[4],ge+=c*je,$+=c*Se,q+=c*Fe,le+=c*Re,re+=c*Be,W+=c*Ae,te+=c*$e,Y+=c*Ee,ie+=c*Oe,xe+=c*He,ne+=c*Ie,_e+=c*Ve,he+=c*We,ye+=c*et,z+=c*tt,B+=c*Je,c=S[5],$+=c*je,q+=c*Se,le+=c*Fe,re+=c*Re,W+=c*Be,te+=c*Ae,Y+=c*$e,ie+=c*Ee,xe+=c*Oe,ne+=c*He,_e+=c*Ie,he+=c*Ve,ye+=c*We,z+=c*et,B+=c*tt,F+=c*Je,c=S[6],q+=c*je,le+=c*Se,re+=c*Fe,W+=c*Re,te+=c*Be,Y+=c*Ae,ie+=c*$e,xe+=c*Ee,ne+=c*Oe,_e+=c*He,he+=c*Ie,ye+=c*Ve,z+=c*We,B+=c*et,F+=c*tt,l+=c*Je,c=S[7],le+=c*je,re+=c*Se,W+=c*Fe,te+=c*Re,Y+=c*Be,ie+=c*Ae,xe+=c*$e,ne+=c*Ee,_e+=c*Oe,he+=c*He,ye+=c*Ie,z+=c*Ve,B+=c*We,F+=c*et,l+=c*tt,I+=c*Je,c=S[8],re+=c*je,W+=c*Se,te+=c*Fe,Y+=c*Re,ie+=c*Be,xe+=c*Ae,ne+=c*$e,_e+=c*Ee,he+=c*Oe,ye+=c*He,z+=c*Ie,B+=c*Ve,F+=c*We,l+=c*et,I+=c*tt,se+=c*Je,c=S[9],W+=c*je,te+=c*Se,Y+=c*Fe,ie+=c*Re,xe+=c*Be,ne+=c*Ae,_e+=c*$e,he+=c*Ee,ye+=c*Oe,z+=c*He,B+=c*Ie,F+=c*Ve,l+=c*We,I+=c*et,se+=c*tt,fe+=c*Je,c=S[10],te+=c*je,Y+=c*Se,ie+=c*Fe,xe+=c*Re,ne+=c*Be,_e+=c*Ae,he+=c*$e,ye+=c*Ee,z+=c*Oe,B+=c*He,F+=c*Ie,l+=c*Ve,I+=c*We,se+=c*et,fe+=c*tt,Ce+=c*Je,c=S[11],Y+=c*je,ie+=c*Se,xe+=c*Fe,ne+=c*Re,_e+=c*Be,he+=c*Ae,ye+=c*$e,z+=c*Ee,B+=c*Oe,F+=c*He,l+=c*Ie,I+=c*Ve,se+=c*We,fe+=c*et,Ce+=c*tt,qe+=c*Je,c=S[12],ie+=c*je,xe+=c*Se,ne+=c*Fe,_e+=c*Re,he+=c*Be,ye+=c*Ae,z+=c*$e,B+=c*Ee,F+=c*Oe,l+=c*He,I+=c*Ie,se+=c*Ve,fe+=c*We,Ce+=c*et,qe+=c*tt,ke+=c*Je,c=S[13],xe+=c*je,ne+=c*Se,_e+=c*Fe,he+=c*Re,ye+=c*Be,z+=c*Ae,B+=c*$e,F+=c*Ee,l+=c*Oe,I+=c*He,se+=c*Ie,fe+=c*Ve,Ce+=c*We,qe+=c*et,ke+=c*tt,Le+=c*Je,c=S[14],ne+=c*je,_e+=c*Se,he+=c*Fe,ye+=c*Re,z+=c*Be,B+=c*Ae,F+=c*$e,l+=c*Ee,I+=c*Oe,se+=c*He,fe+=c*Ie,Ce+=c*Ve,qe+=c*We,ke+=c*et,Le+=c*tt,gt+=c*Je,c=S[15],_e+=c*je,he+=c*Se,ye+=c*Fe,z+=c*Re,B+=c*Be,F+=c*Ae,l+=c*$e,I+=c*Ee,se+=c*Oe,fe+=c*He,Ce+=c*Ie,qe+=c*Ve,ke+=c*We,Le+=c*et,gt+=c*tt,Dt+=c*Je,k+=38*he,G+=38*ye,oe+=38*z,ue+=38*B,ge+=38*F,$+=38*l,q+=38*I,le+=38*se,re+=38*fe,W+=38*Ce,te+=38*qe,Y+=38*ke,ie+=38*Le,xe+=38*gt,ne+=38*Dt,v=1,c=k+v+65535,v=Math.floor(c/65536),k=c-v*65536,c=G+v+65535,v=Math.floor(c/65536),G=c-v*65536,c=oe+v+65535,v=Math.floor(c/65536),oe=c-v*65536,c=ue+v+65535,v=Math.floor(c/65536),ue=c-v*65536,c=ge+v+65535,v=Math.floor(c/65536),ge=c-v*65536,c=$+v+65535,v=Math.floor(c/65536),$=c-v*65536,c=q+v+65535,v=Math.floor(c/65536),q=c-v*65536,c=le+v+65535,v=Math.floor(c/65536),le=c-v*65536,c=re+v+65535,v=Math.floor(c/65536),re=c-v*65536,c=W+v+65535,v=Math.floor(c/65536),W=c-v*65536,c=te+v+65535,v=Math.floor(c/65536),te=c-v*65536,c=Y+v+65535,v=Math.floor(c/65536),Y=c-v*65536,c=ie+v+65535,v=Math.floor(c/65536),ie=c-v*65536,c=xe+v+65535,v=Math.floor(c/65536),xe=c-v*65536,c=ne+v+65535,v=Math.floor(c/65536),ne=c-v*65536,c=_e+v+65535,v=Math.floor(c/65536),_e=c-v*65536,k+=v-1+37*(v-1),v=1,c=k+v+65535,v=Math.floor(c/65536),k=c-v*65536,c=G+v+65535,v=Math.floor(c/65536),G=c-v*65536,c=oe+v+65535,v=Math.floor(c/65536),oe=c-v*65536,c=ue+v+65535,v=Math.floor(c/65536),ue=c-v*65536,c=ge+v+65535,v=Math.floor(c/65536),ge=c-v*65536,c=$+v+65535,v=Math.floor(c/65536),$=c-v*65536,c=q+v+65535,v=Math.floor(c/65536),q=c-v*65536,c=le+v+65535,v=Math.floor(c/65536),le=c-v*65536,c=re+v+65535,v=Math.floor(c/65536),re=c-v*65536,c=W+v+65535,v=Math.floor(c/65536),W=c-v*65536,c=te+v+65535,v=Math.floor(c/65536),te=c-v*65536,c=Y+v+65535,v=Math.floor(c/65536),Y=c-v*65536,c=ie+v+65535,v=Math.floor(c/65536),ie=c-v*65536,c=xe+v+65535,v=Math.floor(c/65536),xe=c-v*65536,c=ne+v+65535,v=Math.floor(c/65536),ne=c-v*65536,c=_e+v+65535,v=Math.floor(c/65536),_e=c-v*65536,k+=v-1+37*(v-1),E[0]=k,E[1]=G,E[2]=oe,E[3]=ue,E[4]=ge,E[5]=$,E[6]=q,E[7]=le,E[8]=re,E[9]=W,E[10]=te,E[11]=Y,E[12]=ie,E[13]=xe,E[14]=ne,E[15]=_e}function N(E,S){R(E,S,S)}function x(E,S){const y=s();for(let c=0;c<16;c++)y[c]=S[c];for(let c=253;c>=0;c--)N(y,y),c!==2&&c!==4&&R(y,y,S);for(let c=0;c<16;c++)E[c]=y[c]}function j(E,S){const y=new Uint8Array(32),c=new Float64Array(80),v=s(),k=s(),G=s(),oe=s(),ue=s(),ge=s();for(let re=0;re<31;re++)y[re]=E[re];y[31]=E[31]&127|64,y[0]&=248,_(c,S);for(let re=0;re<16;re++)k[re]=c[re];v[0]=oe[0]=1;for(let re=254;re>=0;--re){const W=y[re>>>3]>>>(re&7)&1;f(v,k,W),f(G,oe,W),w(ue,v,G),T(v,v,G),w(G,k,oe),T(k,k,oe),N(oe,ue),N(ge,v),R(v,G,v),R(G,k,ue),w(ue,v,G),T(v,v,G),N(k,v),T(G,oe,ge),R(v,G,u),w(v,v,oe),R(G,G,v),R(v,oe,ge),R(oe,k,c),N(k,ue),f(v,k,W),f(G,oe,W)}for(let re=0;re<16;re++)c[re+16]=v[re],c[re+32]=G[re],c[re+48]=k[re],c[re+64]=oe[re];const $=c.subarray(32),q=c.subarray(16);x($,$),R(q,q,$);const le=new Uint8Array(32);return g(le,q),le}i.scalarMult=j;function H(E){return j(E,o)}i.scalarMultBase=H;function J(E){if(E.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(E);return{publicKey:H(S),secretKey:S}}i.generateKeyPairFromSeed=J;function A(E){const S=(0,e.randomBytes)(32,E),y=J(S);return(0,t.wipe)(S),y}i.generateKeyPair=A;function P(E,S,y=!1){if(E.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=j(E,S);if(y){let v=0;for(let k=0;k<c.length;k++)v|=c[k];if(v===0)throw new Error("X25519: invalid shared key")}return c}i.sharedKey=P})(Cc);function Sc(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function np(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Sc(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function ef(i,e){e||(e=i.reduce((o,u)=>o+u.length,0));const t=np(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Sc(t)}function q_(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var u=i.charAt(o),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=o}var f=i.length,g=i.charAt(0),_=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function T(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var j=0,H=0,J=0,A=x.length;J!==A&&x[J]===0;)J++,j++;for(var P=(A-J)*w+1>>>0,E=new Uint8Array(P);J!==A;){for(var S=x[J],y=0,c=P-1;(S!==0||y<H)&&c!==-1;c--,y++)S+=256*E[c]>>>0,E[c]=S%f>>>0,S=S/f>>>0;if(S!==0)throw new Error("Non-zero carry");H=y,J++}for(var v=P-H;v!==P&&E[v]===0;)v++;for(var k=g.repeat(j);v<P;++v)k+=i.charAt(E[v]);return k}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var j=0;if(x[j]!==" "){for(var H=0,J=0;x[j]===g;)H++,j++;for(var A=(x.length-j)*_+1>>>0,P=new Uint8Array(A);x[j];){var E=t[x.charCodeAt(j)];if(E===255)return;for(var S=0,y=A-1;(E!==0||S<J)&&y!==-1;y--,S++)E+=f*P[y]>>>0,P[y]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");J=S,j++}if(x[j]!==" "){for(var c=A-J;c!==A&&P[c]===0;)c++;for(var v=new Uint8Array(H+(A-c)),k=H;c!==A;)v[k++]=P[c++];return v}}}function N(x){var j=R(x);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:R,decode:N}}var H_=q_,K_=H_;const k_=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},V_=i=>new TextEncoder().encode(i),G_=i=>new TextDecoder().decode(i);let W_=class{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Y_=class{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return sp(this,e)}},J_=class{constructor(e){this.decoders=e}or(e){return sp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const sp=(i,e)=>new J_({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});let X_=class{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new W_(e,t,s),this.decoder=new Y_(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ea=({name:i,prefix:e,encode:t,decode:s})=>new X_(i,e,t,s),ws=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=K_(t,e);return ea({prefix:i,name:e,encode:s,decode:u=>k_(o(u))})},Q_=(i,e,t,s)=>{const o={};for(let w=0;w<e.length;++w)o[e[w]]=w;let u=i.length;for(;i[u-1]==="=";)--u;const d=new Uint8Array(u*t/8|0);let f=0,g=0,_=0;for(let w=0;w<u;++w){const T=o[i[w]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|T,f+=t,f>=8&&(f-=8,d[_++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return d},Z_=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let u="",d=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],d+=8;d>t;)d-=t,u+=e[o&f>>d];if(d&&(u+=e[o&f<<t-d]),s)for(;u.length*t&7;)u+="=";return u},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ea({prefix:e,name:i,encode(o){return Z_(o,s,t)},decode(o){return Q_(o,s,t,i)}}),em=ea({prefix:"\0",name:"identity",encode:i=>G_(i),decode:i=>V_(i)}),tm=Object.freeze(Object.defineProperty({__proto__:null,identity:em},Symbol.toStringTag,{value:"Module"})),rm=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),im=Object.freeze(Object.defineProperty({__proto__:null,base2:rm},Symbol.toStringTag,{value:"Module"})),nm=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sm=Object.freeze(Object.defineProperty({__proto__:null,base8:nm},Symbol.toStringTag,{value:"Module"})),om=ws({prefix:"9",name:"base10",alphabet:"0123456789"}),am=Object.freeze(Object.defineProperty({__proto__:null,base10:om},Symbol.toStringTag,{value:"Module"})),um=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cm=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hm=Object.freeze(Object.defineProperty({__proto__:null,base16:um,base16upper:cm},Symbol.toStringTag,{value:"Module"})),lm=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fm=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dm=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pm=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gm=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dm=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vm=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ym=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bm=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_m=Object.freeze(Object.defineProperty({__proto__:null,base32:lm,base32hex:gm,base32hexpad:vm,base32hexpadupper:ym,base32hexupper:Dm,base32pad:dm,base32padupper:pm,base32upper:fm,base32z:bm},Symbol.toStringTag,{value:"Module"})),mm=ws({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wm=ws({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Em=Object.freeze(Object.defineProperty({__proto__:null,base36:mm,base36upper:wm},Symbol.toStringTag,{value:"Module"})),Cm=ws({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sm=ws({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),xm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Cm,base58flickr:Sm},Symbol.toStringTag,{value:"Module"})),Im=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Am=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Om=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pm=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Tm=Object.freeze(Object.defineProperty({__proto__:null,base64:Im,base64pad:Am,base64url:Om,base64urlpad:Pm},Symbol.toStringTag,{value:"Module"})),op=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Nm=op.reduce((i,e,t)=>(i[t]=e,i),[]),Fm=op.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Rm(i){return i.reduce((e,t)=>(e+=Nm[t],e),"")}function $m(i){const e=[];for(const t of i){const s=Fm[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Um=ea({prefix:"ðŸš€",name:"base256emoji",encode:Rm,decode:$m}),Lm=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Um},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const tf={...tm,...im,...sm,...am,...hm,..._m,...Em,...xm,...Tm,...Lm};function ap(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const rf=ap("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Fu=ap("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=np(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),up={utf8:rf,"utf-8":rf,hex:tf.base16,latin1:Fu,ascii:Fu,binary:Fu,...tf};function Yr(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Sc(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function Jr(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var nf=globalThis&&globalThis.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,u;s<o;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return i.concat(u||Array.prototype.slice.call(e))},Mm=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),jm=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),Bm=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),zm=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),qm=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Hm=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Km=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,km=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Hm]],of=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Vm(i){return i?af(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new qm:typeof navigator<"u"?af(navigator.userAgent):Ym()}function Gm(i){return i!==""&&km.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var u=o.exec(i);return!!u&&[s,u]},!1)}function af(i){var e=Gm(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new zm;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<sf&&(o=nf(nf([],o,!0),Jm(sf-o.length),!0)):o=[];var u=o.join("."),d=Wm(i),f=Km.exec(i);return f&&f[1]?new Bm(t,u,d,f[1]):new Mm(t,u,d)}function Wm(i){for(var e=0,t=of.length;e<t;e++){var s=of[e],o=s[0],u=s[1],d=u.exec(i);if(d)return o}return null}function Ym(){var i=typeof process<"u"&&process.version;return i?new jm(process.version.slice(1)):null}function Jm(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oc=function(i,e){return oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},oc(i,e)};function Xm(i,e){oc(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ac=function(){return ac=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},ac.apply(this,arguments)};function Qm(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Zm(i,e,t,s){var o=arguments.length,u=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(d=i[f])&&(u=(o<3?d(u):o>3?d(e,t,u):d(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function ew(i,e){return function(t,s){e(t,s,i)}}function tw(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function rw(i,e,t,s){function o(u){return u instanceof t?u:new t(function(d){d(u)})}return new(t||(t=Promise))(function(u,d){function f(w){try{_(s.next(w))}catch(T){d(T)}}function g(w){try{_(s.throw(w))}catch(T){d(T)}}function _(w){w.done?u(w.value):o(w.value).then(f,g)}_((s=s.apply(i,e||[])).next())})}function iw(i,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,o,u,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(_){return function(w){return g([_,w])}}function g(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(u=_[0]&2?o.return:_[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,_[1])).done)return u;switch(o=0,u&&(_=[_[0]&2,u.value]),_[0]){case 0:case 1:u=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,o=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!u||_[1]>u[0]&&_[1]<u[3])){t.label=_[1];break}if(_[0]===6&&t.label<u[1]){t.label=u[1],u=_;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(_);break}u[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(i,t)}catch(w){_=[6,w],o=0}finally{s=u=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function nw(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function sw(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function uc(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,u=[],d;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)u.push(o.value)}catch(f){d={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return u}function ow(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(cp(arguments[e]));return i}function aw(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var u=arguments[e],d=0,f=u.length;d<f;d++,o++)s[o]=u[d];return s}function ys(i){return this instanceof ys?(this.v=i,this):new ys(i)}function uw(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(R){s[R]&&(o[R]=function(N){return new Promise(function(x,j){u.push([R,N,x,j])>1||f(R,N)})})}function f(R,N){try{g(s[R](N))}catch(x){T(u[0][3],x)}}function g(R){R.value instanceof ys?Promise.resolve(R.value.v).then(_,w):T(u[0][2],R)}function _(R){f("next",R)}function w(R){f("throw",R)}function T(R,N){R(N),u.shift(),u.length&&f(u[0][0],u[0][1])}}function cw(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,u){e[o]=i[o]?function(d){return(t=!t)?{value:ys(i[o](d)),done:o==="return"}:u?u(d):d}:u}}function hw(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof uc=="function"?uc(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(u){t[u]=i[u]&&function(d){return new Promise(function(f,g){d=i[u](d),o(f,g,d.done,d.value)})}}function o(u,d,f,g){Promise.resolve(g).then(function(_){u({value:_,done:f})},d)}}function lw(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function fw(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function dw(i){return i&&i.__esModule?i:{default:i}}function pw(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function gw(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const Dw=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ac},__asyncDelegator:cw,__asyncGenerator:uw,__asyncValues:hw,__await:ys,__awaiter:rw,__classPrivateFieldGet:pw,__classPrivateFieldSet:gw,__createBinding:nw,__decorate:Zm,__exportStar:sw,__extends:Xm,__generator:iw,__importDefault:dw,__importStar:fw,__makeTemplateObject:lw,__metadata:tw,__param:ew,__read:cp,__rest:Qm,__spread:ow,__spreadArrays:aw,__values:uc},Symbol.toStringTag,{value:"Module"})),Br=Md(Dw);var Ru={},ns={},uf;function vw(){if(uf)return ns;uf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ns.delay=i,ns}var Zi={},$u={},en={},cf;function yw(){return cf||(cf=1,Object.defineProperty(en,"__esModule",{value:!0}),en.ONE_THOUSAND=en.ONE_HUNDRED=void 0,en.ONE_HUNDRED=100,en.ONE_THOUSAND=1e3),en}var Uu={},hf;function bw(){return hf||(hf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Uu)),Uu}var lf;function hp(){return lf||(lf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(yw(),i),e.__exportStar(bw(),i)}($u)),$u}var ff;function _w(){if(ff)return Zi;ff=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.fromMiliseconds=Zi.toMiliseconds=void 0;const i=hp();function e(s){return s*i.ONE_THOUSAND}Zi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Zi.fromMiliseconds=t,Zi}var df;function mw(){return df||(df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(vw(),i),e.__exportStar(_w(),i)}(Ru)),Ru}var On={},pf;function ww(){if(pf)return On;pf=1,Object.defineProperty(On,"__esModule",{value:!0}),On.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return On.Watch=i,On.default=i,On}var Lu={},ss={},gf;function Ew(){if(gf)return ss;gf=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.IWatch=void 0;class i{}return ss.IWatch=i,ss}var Df;function Cw(){return Df||(Df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Br.__exportStar(Ew(),i)}(Lu)),Lu}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(mw(),i),e.__exportStar(ww(),i),e.__exportStar(Cw(),i),e.__exportStar(hp(),i)})(ve);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=fp=ft.getLocation=ft.getLocationOrThrow=xc=ft.getNavigator=ft.getNavigatorOrThrow=lp=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function sn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}ft.getFromWindow=sn;function Un(i){const e=sn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}ft.getFromWindowOrThrow=Un;function Sw(){return Un("document")}ft.getDocumentOrThrow=Sw;function xw(){return sn("document")}var lp=ft.getDocument=xw;function Iw(){return Un("navigator")}ft.getNavigatorOrThrow=Iw;function Aw(){return sn("navigator")}var xc=ft.getNavigator=Aw;function Ow(){return Un("location")}ft.getLocationOrThrow=Ow;function Pw(){return sn("location")}var fp=ft.getLocation=Pw;function Tw(){return Un("crypto")}ft.getCryptoOrThrow=Tw;function Nw(){return sn("crypto")}ft.getCrypto=Nw;function Fw(){return Un("localStorage")}ft.getLocalStorageOrThrow=Fw;function Rw(){return sn("localStorage")}ft.getLocalStorage=Rw;var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});var dp=Ic.getWindowMetadata=void 0;const vf=ft;function $w(){let i,e;try{i=vf.getDocumentOrThrow(),e=vf.getLocationOrThrow()}catch{return null}function t(){const T=i.getElementsByTagName("link"),R=[];for(let N=0;N<T.length;N++){const x=T[N],j=x.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const H=x.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let J=e.protocol+"//"+e.host;if(H.indexOf("/")===0)J+=H;else{const A=e.pathname.split("/");A.pop();const P=A.join("/");J+=P+"/"+H}R.push(J)}else if(H.indexOf("//")===0){const J=e.protocol+H;R.push(J)}else R.push(H)}}return R}function s(...T){const R=i.getElementsByTagName("meta");for(let N=0;N<R.length;N++){const x=R[N],j=["itemprop","property","name"].map(H=>x.getAttribute(H)).filter(H=>H?T.includes(H):!1);if(j.length&&j){const H=x.getAttribute("content");if(H)return H}}return""}function o(){let T=s("name","og:site_name","og:title","twitter:title");return T||(T=i.title),T}function u(){return s("description","og:description","twitter:description","keywords")}const d=o(),f=u(),g=e.origin,_=t();return{description:f,url:g,icons:_,name:d}}dp=Ic.getWindowMetadata=$w;var bs={},Uw=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),pp="%[a-f0-9]{2}",yf=new RegExp("("+pp+")|([^%]+?)","gi"),bf=new RegExp("("+pp+")+","gi");function cc(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],cc(t),cc(s))}function Lw(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(yf)||[],t=1;t<e.length;t++)i=cc(e,t).join(""),e=i.match(yf)||[];return i}}function Mw(i){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},t=bf.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=Lw(t[0]);s!==t[0]&&(e[t[0]]=s)}t=bf.exec(i)}e["%C2"]="ï¿½";for(var o=Object.keys(e),u=0;u<o.length;u++){var d=o[u];i=i.replace(new RegExp(d,"g"),e[d])}return i}var jw=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return Mw(i)}},Bw=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},zw=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),u=0;u<s.length;u++){var d=s[u],f=i[d];(o?e.indexOf(d)!==-1:e(d,f,i))&&(t[d]=f)}return t};(function(i){const e=Uw,t=jw,s=Bw,o=zw,u=A=>A==null,d=Symbol("encodeFragmentIdentifier");function f(A){switch(A.arrayFormat){case"index":return P=>(E,S)=>{const y=E.length;return S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?E:S===null?[...E,[w(P,A),"[",y,"]"].join("")]:[...E,[w(P,A),"[",w(y,A),"]=",w(S,A)].join("")]};case"bracket":return P=>(E,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?E:S===null?[...E,[w(P,A),"[]"].join("")]:[...E,[w(P,A),"[]=",w(S,A)].join("")];case"colon-list-separator":return P=>(E,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?E:S===null?[...E,[w(P,A),":list="].join("")]:[...E,[w(P,A),":list=",w(S,A)].join("")];case"comma":case"separator":case"bracket-separator":{const P=A.arrayFormat==="bracket-separator"?"[]=":"=";return E=>(S,y)=>y===void 0||A.skipNull&&y===null||A.skipEmptyString&&y===""?S:(y=y===null?"":y,S.length===0?[[w(E,A),P,w(y,A)].join("")]:[[S,w(y,A)].join(A.arrayFormatSeparator)])}default:return P=>(E,S)=>S===void 0||A.skipNull&&S===null||A.skipEmptyString&&S===""?E:S===null?[...E,w(P,A)]:[...E,[w(P,A),"=",w(S,A)].join("")]}}function g(A){let P;switch(A.arrayFormat){case"index":return(E,S,y)=>{if(P=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!P){y[E]=S;return}y[E]===void 0&&(y[E]={}),y[E][P[1]]=S};case"bracket":return(E,S,y)=>{if(P=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!P){y[E]=S;return}if(y[E]===void 0){y[E]=[S];return}y[E]=[].concat(y[E],S)};case"colon-list-separator":return(E,S,y)=>{if(P=/(:list)$/.exec(E),E=E.replace(/:list$/,""),!P){y[E]=S;return}if(y[E]===void 0){y[E]=[S];return}y[E]=[].concat(y[E],S)};case"comma":case"separator":return(E,S,y)=>{const c=typeof S=="string"&&S.includes(A.arrayFormatSeparator),v=typeof S=="string"&&!c&&T(S,A).includes(A.arrayFormatSeparator);S=v?T(S,A):S;const k=c||v?S.split(A.arrayFormatSeparator).map(G=>T(G,A)):S===null?S:T(S,A);y[E]=k};case"bracket-separator":return(E,S,y)=>{const c=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!c){y[E]=S&&T(S,A);return}const v=S===null?[]:S.split(A.arrayFormatSeparator).map(k=>T(k,A));if(y[E]===void 0){y[E]=v;return}y[E]=[].concat(y[E],v)};default:return(E,S,y)=>{if(y[E]===void 0){y[E]=S;return}y[E]=[].concat(y[E],S)}}}function _(A){if(typeof A!="string"||A.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function w(A,P){return P.encode?P.strict?e(A):encodeURIComponent(A):A}function T(A,P){return P.decode?t(A):A}function R(A){return Array.isArray(A)?A.sort():typeof A=="object"?R(Object.keys(A)).sort((P,E)=>Number(P)-Number(E)).map(P=>A[P]):A}function N(A){const P=A.indexOf("#");return P!==-1&&(A=A.slice(0,P)),A}function x(A){let P="";const E=A.indexOf("#");return E!==-1&&(P=A.slice(E)),P}function j(A){A=N(A);const P=A.indexOf("?");return P===-1?"":A.slice(P+1)}function H(A,P){return P.parseNumbers&&!Number.isNaN(Number(A))&&typeof A=="string"&&A.trim()!==""?A=Number(A):P.parseBooleans&&A!==null&&(A.toLowerCase()==="true"||A.toLowerCase()==="false")&&(A=A.toLowerCase()==="true"),A}function J(A,P){P=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},P),_(P.arrayFormatSeparator);const E=g(P),S=Object.create(null);if(typeof A!="string"||(A=A.trim().replace(/^[?#&]/,""),!A))return S;for(const y of A.split("&")){if(y==="")continue;let[c,v]=s(P.decode?y.replace(/\+/g," "):y,"=");v=v===void 0?null:["comma","separator","bracket-separator"].includes(P.arrayFormat)?v:T(v,P),E(T(c,P),v,S)}for(const y of Object.keys(S)){const c=S[y];if(typeof c=="object"&&c!==null)for(const v of Object.keys(c))c[v]=H(c[v],P);else S[y]=H(c,P)}return P.sort===!1?S:(P.sort===!0?Object.keys(S).sort():Object.keys(S).sort(P.sort)).reduce((y,c)=>{const v=S[c];return v&&typeof v=="object"&&!Array.isArray(v)?y[c]=R(v):y[c]=v,y},Object.create(null))}i.extract=j,i.parse=J,i.stringify=(A,P)=>{if(!A)return"";P=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},P),_(P.arrayFormatSeparator);const E=v=>P.skipNull&&u(A[v])||P.skipEmptyString&&A[v]==="",S=f(P),y={};for(const v of Object.keys(A))E(v)||(y[v]=A[v]);const c=Object.keys(y);return P.sort!==!1&&c.sort(P.sort),c.map(v=>{const k=A[v];return k===void 0?"":k===null?w(v,P):Array.isArray(k)?k.length===0&&P.arrayFormat==="bracket-separator"?w(v,P)+"[]":k.reduce(S(v),[]).join("&"):w(v,P)+"="+w(k,P)}).filter(v=>v.length>0).join("&")},i.parseUrl=(A,P)=>{P=Object.assign({decode:!0},P);const[E,S]=s(A,"#");return Object.assign({url:E.split("?")[0]||"",query:J(j(A),P)},P&&P.parseFragmentIdentifier&&S?{fragmentIdentifier:T(S,P)}:{})},i.stringifyUrl=(A,P)=>{P=Object.assign({encode:!0,strict:!0,[d]:!0},P);const E=N(A.url).split("?")[0]||"",S=i.extract(A.url),y=i.parse(S,{sort:!1}),c=Object.assign(y,A.query);let v=i.stringify(c,P);v&&(v=`?${v}`);let k=x(A.url);return A.fragmentIdentifier&&(k=`#${P[d]?w(A.fragmentIdentifier,P):A.fragmentIdentifier}`),`${E}${v}${k}`},i.pick=(A,P,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[d]:!1},E);const{url:S,query:y,fragmentIdentifier:c}=i.parseUrl(A,E);return i.stringifyUrl({url:S,query:o(y,P),fragmentIdentifier:c},E)},i.exclude=(A,P,E)=>{const S=Array.isArray(P)?y=>!P.includes(y):(y,c)=>!P(y,c);return i.pick(A,S,E)}})(bs);const qw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Hw(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function gp(i,e){return i.includes(":")?[i]:e.chains||[]}const Dp="base10",lr="base16",hc="base64pad",Ac="utf8",vp=0,on=1,Kw=0,_f=1,lc=12,Oc=32;function kw(){const i=Cc.generateKeyPair();return{privateKey:Jr(i.secretKey,lr),publicKey:Jr(i.publicKey,lr)}}function fc(){const i=$n.randomBytes(Oc);return Jr(i,lr)}function Vw(i,e){const t=Cc.sharedKey(Yr(i,lr),Yr(e,lr)),s=new R_(Zo.SHA256,t).expand(Oc);return Jr(s,lr)}function Gw(i){const e=Zo.hash(Yr(i,lr));return Jr(e,lr)}function Fn(i){const e=Zo.hash(Yr(i,Ac));return Jr(e,lr)}function Ww(i){return Yr(`${i}`,Dp)}function Es(i){return Number(Jr(i,Dp))}function Yw(i){const e=Ww(typeof i.type<"u"?i.type:vp);if(Es(e)===on&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?Yr(i.senderPublicKey,lr):void 0,s=typeof i.iv<"u"?Yr(i.iv,lr):$n.randomBytes(lc),o=new wc.ChaCha20Poly1305(Yr(i.symKey,lr)).seal(s,Yr(i.message,Ac));return Xw({type:e,sealed:o,iv:s,senderPublicKey:t})}function Jw(i){const e=new wc.ChaCha20Poly1305(Yr(i.symKey,lr)),{sealed:t,iv:s}=qo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return Jr(o,Ac)}function Xw(i){if(Es(i.type)===on){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Jr(ef([i.type,i.senderPublicKey,i.iv,i.sealed]),hc)}return Jr(ef([i.type,i.iv,i.sealed]),hc)}function qo(i){const e=Yr(i,hc),t=e.slice(Kw,_f),s=_f;if(Es(t)===on){const f=s+Oc,g=f+lc,_=e.slice(s,f),w=e.slice(f,g),T=e.slice(g);return{type:t,sealed:T,iv:w,senderPublicKey:_}}const o=s+lc,u=e.slice(s,o),d=e.slice(o);return{type:t,sealed:d,iv:u}}function Qw(i,e){const t=qo(i);return yp({type:Es(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Jr(t.senderPublicKey,lr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function yp(i){const e=(i==null?void 0:i.type)||vp;if(e===on){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function mf(i){return i.type===on&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var Zw=Object.defineProperty,wf=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,Ef=(i,e,t)=>e in i?Zw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Cf=(i,e)=>{for(var t in e||(e={}))e3.call(e,t)&&Ef(i,t,e[t]);if(wf)for(var t of wf(e))t3.call(e,t)&&Ef(i,t,e[t]);return i};const r3="ReactNative",Ri={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},i3="js";function Pc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bp(){return!lp()&&!!xc()&&navigator.product===r3}function Tc(){return!Pc()&&!!xc()}function Nc(){return bp()?Ri.reactNative:Pc()?Ri.node:Tc()?Ri.browser:Ri.unknown}function n3(i,e){let t=bs.parse(i);return t=Cf(Cf({},t),e),i=bs.stringify(t),i}function s3(){return dp()||{name:"",description:"",url:"",icons:[""]}}function o3(){if(Nc()===Ri.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=Vm();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function a3(){var i;const e=Nc();return e===Ri.browser?[e,((i=fp())==null?void 0:i.host)||"unknown"].join(":"):e}function u3(i,e,t){const s=o3(),o=a3();return[[i,e].join("-"),[i3,t].join("-"),s,o].join("/")}function c3({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:u,useOnCloseEvent:d}){const f=t.split("?"),g=u3(i,e,s),_={auth:o,ua:g,projectId:u,useOnCloseEvent:d||void 0},w=n3(f[1]||"",_);return f[0]+"?"+w}function nn(i,e){return i.filter(t=>e.includes(t)).length===i.length}function _p(i){return Object.fromEntries(i.entries())}function mp(i){return new Map(Object.entries(i))}function Pn(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,u;return{resolve:d=>{u&&s&&(clearTimeout(u),s(d))},reject:d=>{u&&o&&(clearTimeout(u),o(d))},done:()=>new Promise((d,f)=>{u=setTimeout(()=>{f(new Error(e))},t),s=d,o=f})}}function Ho(i,e,t){return new Promise(async(s,o)=>{const u=setTimeout(()=>o(new Error(t)),e);try{const d=await i;s(d)}catch(d){o(d)}clearTimeout(u)})}function wp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function h3(i){return wp("topic",i)}function l3(i){return wp("id",i)}function Ep(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function Fi(i){return Date.now()>=ve.toMiliseconds(i)}function Ht(i,e){return`${i}${e?`:${e}`:""}`}function Mu(i=[],e=[]){return[...new Set([...i,...e])]}async function f3({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const u=`${o}/wc?requestId=${i}&sessionTopic=${e}`,d=Nc();d===Ri.browser?u.startsWith("https://")?window.open(u,"_blank","noreferrer noopener"):window.open(u,"_self","noreferrer noopener"):d===Ri.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(u)}catch(s){console.error(s)}}const d3="irn";function dc(i){return(i==null?void 0:i.relay)||{protocol:d3}}function Lo(i){const e=qw[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var p3=Object.defineProperty,Sf=Object.getOwnPropertySymbols,g3=Object.prototype.hasOwnProperty,D3=Object.prototype.propertyIsEnumerable,xf=(i,e,t)=>e in i?p3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,v3=(i,e)=>{for(var t in e||(e={}))g3.call(e,t)&&xf(i,t,e[t]);if(Sf)for(var t of Sf(e))D3.call(e,t)&&xf(i,t,e[t]);return i};function y3(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const u=o.replace(s,""),d=i[o];t[u]=d}}),t}function b3(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),u=typeof t<"u"?i.substring(t):"",d=bs.parse(u);return{protocol:s,topic:_3(o[0]),version:parseInt(o[1],10),symKey:d.symKey,relay:y3(d)}}function _3(i){return i.startsWith("//")?i.substring(2):i}function m3(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const u=t+e+o;i[o]&&(s[u]=i[o])}),s}function w3(i){return`${i.protocol}:${i.topic}@${i.version}?`+bs.stringify(v3({symKey:i.symKey},m3(i.relay)))}function Ln(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function E3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Ln(t.accounts))}),e}function C3(i,e){const t=[];return Object.values(i).forEach(s=>{Ln(s.accounts).includes(e)&&t.push(...s.methods)}),t}function S3(i,e){const t=[];return Object.values(i).forEach(s=>{Ln(s.accounts).includes(e)&&t.push(...s.events)}),t}function x3(i,e){const t=jo(i,e);if(t)throw new Error(t.message);const s={};for(const[o,u]of Object.entries(i))s[o]={methods:u.methods,events:u.events,chains:u.accounts.map(d=>`${d.split(":")[0]}:${d.split(":")[1]}`)};return s}function Fc(i){return i.includes(":")}function Mo(i){return Fc(i)?i.split(":")[0]:i}const I3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},A3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:t,code:s}=A3[i];return{message:e?`${t} ${e}`:t,code:s}}function Rt(i,e){const{message:t,code:s}=I3[i];return{message:e?`${t} ${e}`:t,code:s}}function oi(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Rn(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function hr(i){return typeof i>"u"}function Wt(i,e){return e&&hr(i)?!0:typeof i=="string"&&!!i.trim().length}function Rc(i,e){return e&&hr(i)?!0:typeof i=="number"&&!isNaN(i)}function O3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let u=!0;return nn(o,s)?(s.forEach(d=>{const{accounts:f,methods:g,events:_}=i.namespaces[d],w=Ln(f),T=t[d];(!nn(gp(d,T),w)||!nn(T.methods,g)||!nn(T.events,_))&&(u=!1)}),u):!1}function Ko(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function P3(i){if(Wt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Ko(t)}}return!1}function T3(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function N3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function F3(i){return i==null?void 0:i.topic}function R3(i,e){let t=null;return Wt(i==null?void 0:i.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function If(i){let e=!0;return oi(i)?i.length&&(e=i.every(t=>Wt(t,!1))):e=!1,e}function $3(i,e,t){let s=null;return oi(e)&&e.length?e.forEach(o=>{s||Ko(o)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Ko(i)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function U3(i,e,t){let s=null;return Object.entries(i).forEach(([o,u])=>{if(s)return;const d=$3(o,gp(o,u),`${e} ${t}`);d&&(s=d)}),s}function L3(i,e){let t=null;return oi(i)?i.forEach(s=>{t||P3(s)||(t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function M3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=L3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function j3(i,e){let t=null;return If(i==null?void 0:i.methods)?If(i==null?void 0:i.events)||(t=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Cp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=j3(s,`${e}, namespace`);o&&(t=o)}),t}function B3(i,e,t){let s=null;if(i&&Rn(i)){const o=Cp(i,e);o&&(s=o);const u=U3(i,e,t);u&&(s=u)}else s=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function jo(i,e){let t=null;if(i&&Rn(i)){const s=Cp(i,e);s&&(t=s);const o=M3(i,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Sp(i){return Wt(i.protocol,!0)}function z3(i,e){let t=!1;return e&&!i?t=!0:i&&oi(i)&&i.length&&i.forEach(s=>{t=Sp(s)}),t}function q3(i){return typeof i=="number"}function yr(i){return typeof i<"u"&&typeof i!==null}function H3(i){return!(!i||typeof i!="object"||!i.code||!Rc(i.code,!1)||!i.message||!Wt(i.message,!1))}function K3(i){return!(hr(i)||!Wt(i.method,!1))}function k3(i){return!(hr(i)||hr(i.result)&&hr(i.error)||!Rc(i.id,!1)||!Wt(i.jsonrpc,!1))}function V3(i){return!(hr(i)||!Wt(i.name,!1))}function Af(i,e){return!(!Ko(e)||!E3(i).includes(e))}function G3(i,e,t){return Wt(t,!1)?C3(i,e).includes(t):!1}function W3(i,e,t){return Wt(t,!1)?S3(i,e).includes(t):!1}function Of(i,e,t){let s=null;const o=Y3(i),u=J3(e),d=Object.keys(o),f=Object.keys(u),g=Pf(Object.keys(i)),_=Pf(Object.keys(e)),w=g.filter(T=>!_.includes(T));return w.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${w.toString()}
      Received: ${Object.keys(e).toString()}`)),nn(d,f)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${d.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(T=>{if(!T.includes(":")||s)return;const R=Ln(e[T].accounts);R.includes(T)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${T}
        Required: ${T}
        Approved: ${R.toString()}`))}),d.forEach(T=>{s||(nn(o[T].methods,u[T].methods)?nn(o[T].events,u[T].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${T}`)):s=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${T}`))}),s}function Y3(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Pf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function J3(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Ln(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(u=>u.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function X3(i,e){return Rc(i,!1)&&i<=e.max&&i>=e.min}var ta={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});function Q3(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}Cs.safeJsonParse=Q3;function Z3(i){return typeof i=="string"?i:JSON.stringify(i,(e,t)=>typeof t>"u"?null:t)}Cs.safeJsonStringify=Z3;var os={exports:{}},Tf;function eE(){return Tf||(Tf=1,function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Sr<"u"&&Sr.localStorage?os.exports=Sr.localStorage:typeof window<"u"&&window.localStorage?os.exports=window.localStorage:os.exports=new e}()),os.exports}var ju={},as={},Nf;function tE(){if(Nf)return as;Nf=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IKeyValueStorage=void 0;class i{}return as.IKeyValueStorage=i,as}var us={},Ff;function rE(){if(Ff)return us;Ff=1,Object.defineProperty(us,"__esModule",{value:!0}),us.parseEntry=void 0;const i=Cs;function e(t){var s;return[t[0],i.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return us.parseEntry=e,us}var Rf;function iE(){return Rf||(Rf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(tE(),i),e.__exportStar(rE(),i)}(ju)),ju}Object.defineProperty(ta,"__esModule",{value:!0});ta.KeyValueStorage=void 0;const Tn=Br,$f=Cs,nE=Tn.__importDefault(eE()),sE=iE();class xp{constructor(){this.localStorage=nE.default}getKeys(){return Tn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Tn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(sE.parseEntry)})}getItem(e){return Tn.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return $f.safeJsonParse(t)})}setItem(e,t){return Tn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,$f.safeJsonStringify(t))})}removeItem(e){return Tn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ta.KeyValueStorage=xp;var oE=ta.default=xp,Mn={},cs={},Bu={},hs={};let an=class{};const aE=Object.freeze(Object.defineProperty({__proto__:null,IEvents:an},Symbol.toStringTag,{value:"Module"})),uE=Md(aE);var Uf;function cE(){if(Uf)return hs;Uf=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.IHeartBeat=void 0;const i=uE;class e extends i.IEvents{constructor(s){super()}}return hs.IHeartBeat=e,hs}var Lf;function Ip(){return Lf||(Lf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Br.__exportStar(cE(),i)}(Bu)),Bu}var zu={},tn={},Mf;function hE(){if(Mf)return tn;Mf=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HEARTBEAT_EVENTS=tn.HEARTBEAT_INTERVAL=void 0;const i=ve;return tn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,tn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},tn}var jf;function Ap(){return jf||(jf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Br.__exportStar(hE(),i)}(zu)),zu}var Bf;function lE(){if(Bf)return cs;Bf=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.HeartBeat=void 0;const i=Br,e=xr,t=ve,s=Ip(),o=Ap();class u extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const g=new u(f);return yield g.init(),g})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return cs.HeartBeat=u,cs}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(lE(),i),e.__exportStar(Ip(),i),e.__exportStar(Ap(),i)})(Mn);var Ze={},qu,zf;function fE(){if(zf)return qu;zf=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}qu=e;function e(t,s,o){var u=o&&o.stringify||i,d=1;if(typeof t=="object"&&t!==null){var f=s.length+d;if(f===1)return t;var g=new Array(f);g[0]=u(t);for(var _=1;_<f;_++)g[_]=u(s[_]);return g.join(" ")}if(typeof t!="string")return t;var w=s.length;if(w===0)return t;for(var T="",R=1-d,N=-1,x=t&&t.length||0,j=0;j<x;){if(t.charCodeAt(j)===37&&j+1<x){switch(N=N>-1?N:0,t.charCodeAt(j+1)){case 100:case 102:if(R>=w||s[R]==null)break;N<j&&(T+=t.slice(N,j)),T+=Number(s[R]),N=j+2,j++;break;case 105:if(R>=w||s[R]==null)break;N<j&&(T+=t.slice(N,j)),T+=Math.floor(Number(s[R])),N=j+2,j++;break;case 79:case 111:case 106:if(R>=w||s[R]===void 0)break;N<j&&(T+=t.slice(N,j));var H=typeof s[R];if(H==="string"){T+="'"+s[R]+"'",N=j+2,j++;break}if(H==="function"){T+=s[R].name||"<anonymous>",N=j+2,j++;break}T+=u(s[R]),N=j+2,j++;break;case 115:if(R>=w)break;N<j&&(T+=t.slice(N,j)),T+=String(s[R]),N=j+2,j++;break;case 37:N<j&&(T+=t.slice(N,j)),T+="%",N=j+2,j++,R--;break}++R}++j}return N===-1?t:(N<x&&(T+=t.slice(N)),T)}return qu}var Hu,qf;function dE(){if(qf)return Hu;qf=1;const i=fE();Hu=o;const e=S().console||{},t={mapHttpRequest:x,mapHttpResponse:x,wrapRequestSerializer:j,wrapResponseSerializer:j,wrapErrorSerializer:j,req:x,res:x,err:R};function s(y,c){return Array.isArray(y)?y.filter(function(k){return k!=="!stdSerializers.err"}):y===!0?Object.keys(c):!1}function o(y){y=y||{},y.browser=y.browser||{};const c=y.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const v=y.browser.write||e;y.browser.write&&(y.browser.asObject=!0);const k=y.serializers||{},G=s(y.browser.serialize,k);let oe=y.browser.serialize;Array.isArray(y.browser.serialize)&&y.browser.serialize.indexOf("!stdSerializers.err")>-1&&(oe=!1);const ue=["error","fatal","warn","info","debug","trace"];typeof v=="function"&&(v.error=v.fatal=v.warn=v.info=v.debug=v.trace=v),y.enabled===!1&&(y.level="silent");const ge=y.level||"info",$=Object.create(v);$.log||($.log=H),Object.defineProperty($,"levelVal",{get:le}),Object.defineProperty($,"level",{get:re,set:W});const q={transmit:c,serialize:G,asObject:y.browser.asObject,levels:ue,timestamp:N(y)};$.levels=o.levels,$.level=ge,$.setMaxListeners=$.getMaxListeners=$.emit=$.addListener=$.on=$.prependListener=$.once=$.prependOnceListener=$.removeListener=$.removeAllListeners=$.listeners=$.listenerCount=$.eventNames=$.write=$.flush=H,$.serializers=k,$._serialize=G,$._stdErrSerialize=oe,$.child=te,c&&($._logEvent=T());function le(){return this.level==="silent"?1/0:this.levels.values[this.level]}function re(){return this._level}function W(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,u(q,$,"error","log"),u(q,$,"fatal","error"),u(q,$,"warn","error"),u(q,$,"info","log"),u(q,$,"debug","log"),u(q,$,"trace","log")}function te(Y,ie){if(!Y)throw new Error("missing bindings for child Pino");ie=ie||{},G&&Y.serializers&&(ie.serializers=Y.serializers);const xe=ie.serializers;if(G&&xe){var ne=Object.assign({},k,xe),_e=y.browser.serialize===!0?Object.keys(ne):G;delete Y.serializers,g([Y],_e,ne,this._stdErrSerialize)}function he(ye){this._childLevel=(ye._childLevel|0)+1,this.error=_(ye,Y,"error"),this.fatal=_(ye,Y,"fatal"),this.warn=_(ye,Y,"warn"),this.info=_(ye,Y,"info"),this.debug=_(ye,Y,"debug"),this.trace=_(ye,Y,"trace"),ne&&(this.serializers=ne,this._serialize=_e),c&&(this._logEvent=T([].concat(ye._logEvent.bindings,Y)))}return he.prototype=this,new he(this)}return $}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:J,epochTime:A,unixTime:P,isoTime:E});function u(y,c,v,k){const G=Object.getPrototypeOf(c);c[v]=c.levelVal>c.levels.values[v]?H:G[v]?G[v]:e[v]||e[k]||H,d(y,c,v)}function d(y,c,v){!y.transmit&&c[v]===H||(c[v]=function(k){return function(){const oe=y.timestamp(),ue=new Array(arguments.length),ge=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var $=0;$<ue.length;$++)ue[$]=arguments[$];if(y.serialize&&!y.asObject&&g(ue,this._serialize,this.serializers,this._stdErrSerialize),y.asObject?k.call(ge,f(this,v,ue,oe)):k.apply(ge,ue),y.transmit){const q=y.transmit.level||c.level,le=o.levels.values[q],re=o.levels.values[v];if(re<le)return;w(this,{ts:oe,methodLevel:v,methodValue:re,transmitLevel:q,transmitValue:o.levels.values[y.transmit.level||c.level],send:y.transmit.send,val:c.levelVal},ue)}}}(c[v]))}function f(y,c,v,k){y._serialize&&g(v,y._serialize,y.serializers,y._stdErrSerialize);const G=v.slice();let oe=G[0];const ue={};k&&(ue.time=k),ue.level=o.levels.values[c];let ge=(y._childLevel|0)+1;if(ge<1&&(ge=1),oe!==null&&typeof oe=="object"){for(;ge--&&typeof G[0]=="object";)Object.assign(ue,G.shift());oe=G.length?i(G.shift(),G):void 0}else typeof oe=="string"&&(oe=i(G.shift(),G));return oe!==void 0&&(ue.msg=oe),ue}function g(y,c,v,k){for(const G in y)if(k&&y[G]instanceof Error)y[G]=o.stdSerializers.err(y[G]);else if(typeof y[G]=="object"&&!Array.isArray(y[G]))for(const oe in y[G])c&&c.indexOf(oe)>-1&&oe in v&&(y[G][oe]=v[oe](y[G][oe]))}function _(y,c,v){return function(){const k=new Array(1+arguments.length);k[0]=c;for(var G=1;G<k.length;G++)k[G]=arguments[G-1];return y[v].apply(this,k)}}function w(y,c,v){const k=c.send,G=c.ts,oe=c.methodLevel,ue=c.methodValue,ge=c.val,$=y._logEvent.bindings;g(v,y._serialize||Object.keys(y.serializers),y.serializers,y._stdErrSerialize===void 0?!0:y._stdErrSerialize),y._logEvent.ts=G,y._logEvent.messages=v.filter(function(q){return $.indexOf(q)===-1}),y._logEvent.level.label=oe,y._logEvent.level.value=ue,k(oe,y._logEvent,ge),y._logEvent=T($)}function T(y){return{ts:0,messages:[],bindings:y||[],level:{label:"",value:0}}}function R(y){const c={type:y.constructor.name,msg:y.message,stack:y.stack};for(const v in y)c[v]===void 0&&(c[v]=y[v]);return c}function N(y){return typeof y.timestamp=="function"?y.timestamp:y.timestamp===!1?J:A}function x(){return{}}function j(y){return y}function H(){}function J(){return!1}function A(){return Date.now()}function P(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function S(){function y(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return y(self)||y(window)||y(this)||{}}}return Hu}var rn={},Hf;function Op(){return Hf||(Hf=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.PINO_CUSTOM_CONTEXT_KEY=rn.PINO_LOGGER_DEFAULTS=void 0,rn.PINO_LOGGER_DEFAULTS={level:"info"},rn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),rn}var cr={},Kf;function pE(){if(Kf)return cr;Kf=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const i=Op();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,g=i.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}cr.getBrowserLoggerContext=t;function s(f,g,_=i.PINO_CUSTOM_CONTEXT_KEY){return f[_]=g,f}cr.setBrowserLoggerContext=s;function o(f,g=i.PINO_CUSTOM_CONTEXT_KEY){let _="";return typeof f.bindings>"u"?_=t(f,g):_=f.bindings().context||"",_}cr.getLoggerContext=o;function u(f,g,_=i.PINO_CUSTOM_CONTEXT_KEY){const w=o(f,_);return w.trim()?`${w}/${g}`:g}cr.formatChildLoggerContext=u;function d(f,g,_=i.PINO_CUSTOM_CONTEXT_KEY){const w=u(f,g,_),T=f.child({context:w});return s(T,w,_)}return cr.generateChildLogger=d,cr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=Br,t=e.__importDefault(dE());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Op(),i),e.__exportStar(pE(),i)})(Ze);class gE extends an{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class DE extends an{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class vE{constructor(e,t){this.logger=e,this.core=t}}let yE=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},bE=class extends an{constructor(e){super()}},_E=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class mE extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}}let wE=class extends an{constructor(e,t){super(),this.core=e,this.logger=t}},EE=class{constructor(e,t){this.projectId=e,this.logger=t}},CE=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},SE=class{constructor(e){this.client=e}};const xE=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),IE=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function $c(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return IE(i)}catch{return i}}function _s(i){return typeof i=="string"?i:xE(i)||""}var Uc={},Pp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Ir;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,_){if(_===void 0&&(_=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var w=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&_>0;)this._buffer[this._bufferLength++]=g[w++],_--;this._bufferLength===this.blockSize&&(u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(w=u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,w,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=g[w++],_--;return this},f.prototype.finish=function(g){if(!this._finished){var _=this._bytesHashed,w=this._bufferLength,T=_/536870912|0,R=_<<3,N=_%128<112?128:256;this._buffer[w]=128;for(var x=w+1;x<N-8;x++)this._buffer[x]=0;e.writeUint32BE(T,this._buffer,N-8),e.writeUint32BE(R,this._buffer,N-4),u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,N),this._finished=!0}for(var x=0;x<this.digestLength/8;x++)e.writeUint32BE(this._stateHi[x],g,x*8),e.writeUint32BE(this._stateLo[x],g,x*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.stateHi),t.wipe(g.stateLo),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function u(f,g,_,w,T,R,N){for(var x=_[0],j=_[1],H=_[2],J=_[3],A=_[4],P=_[5],E=_[6],S=_[7],y=w[0],c=w[1],v=w[2],k=w[3],G=w[4],oe=w[5],ue=w[6],ge=w[7],$,q,le,re,W,te,Y,ie;N>=128;){for(var xe=0;xe<16;xe++){var ne=8*xe+R;f[xe]=e.readUint32BE(T,ne),g[xe]=e.readUint32BE(T,ne+4)}for(var xe=0;xe<80;xe++){var _e=x,he=j,ye=H,z=J,B=A,F=P,l=E,I=S,se=y,fe=c,Ce=v,qe=k,ke=G,Le=oe,gt=ue,Dt=ge;if($=S,q=ge,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=(A>>>14|G<<32-14)^(A>>>18|G<<32-18)^(G>>>41-32|A<<32-(41-32)),q=(G>>>14|A<<32-14)^(G>>>18|A<<32-18)^(A>>>41-32|G<<32-(41-32)),W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,$=A&P^~A&E,q=G&oe^~G&ue,W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,$=o[xe*2],q=o[xe*2+1],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,$=f[xe%16],q=g[xe%16],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,le=Y&65535|ie<<16,re=W&65535|te<<16,$=le,q=re,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=(x>>>28|y<<32-28)^(y>>>34-32|x<<32-(34-32))^(y>>>39-32|x<<32-(39-32)),q=(y>>>28|x<<32-28)^(x>>>34-32|y<<32-(34-32))^(x>>>39-32|y<<32-(39-32)),W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,$=x&j^x&H^j&H,q=y&c^y&v^c&v,W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,I=Y&65535|ie<<16,Dt=W&65535|te<<16,$=z,q=qe,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=le,q=re,W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,z=Y&65535|ie<<16,qe=W&65535|te<<16,j=_e,H=he,J=ye,A=z,P=B,E=F,S=l,x=I,c=se,v=fe,k=Ce,G=qe,oe=ke,ue=Le,ge=gt,y=Dt,xe%16===15)for(var ne=0;ne<16;ne++)$=f[ne],q=g[ne],W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=f[(ne+9)%16],q=g[(ne+9)%16],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,le=f[(ne+1)%16],re=g[(ne+1)%16],$=(le>>>1|re<<32-1)^(le>>>8|re<<32-8)^le>>>7,q=(re>>>1|le<<32-1)^(re>>>8|le<<32-8)^(re>>>7|le<<32-7),W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,le=f[(ne+14)%16],re=g[(ne+14)%16],$=(le>>>19|re<<32-19)^(re>>>61-32|le<<32-(61-32))^le>>>6,q=(re>>>19|le<<32-19)^(le>>>61-32|re<<32-(61-32))^(re>>>6|le<<32-6),W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,f[ne]=Y&65535|ie<<16,g[ne]=W&65535|te<<16}$=x,q=y,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[0],q=w[0],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[0]=x=Y&65535|ie<<16,w[0]=y=W&65535|te<<16,$=j,q=c,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[1],q=w[1],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[1]=j=Y&65535|ie<<16,w[1]=c=W&65535|te<<16,$=H,q=v,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[2],q=w[2],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[2]=H=Y&65535|ie<<16,w[2]=v=W&65535|te<<16,$=J,q=k,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[3],q=w[3],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[3]=J=Y&65535|ie<<16,w[3]=k=W&65535|te<<16,$=A,q=G,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[4],q=w[4],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[4]=A=Y&65535|ie<<16,w[4]=G=W&65535|te<<16,$=P,q=oe,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[5],q=w[5],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[5]=P=Y&65535|ie<<16,w[5]=oe=W&65535|te<<16,$=E,q=ue,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[6],q=w[6],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[6]=E=Y&65535|ie<<16,w[6]=ue=W&65535|te<<16,$=S,q=ge,W=q&65535,te=q>>>16,Y=$&65535,ie=$>>>16,$=_[7],q=w[7],W+=q&65535,te+=q>>>16,Y+=$&65535,ie+=$>>>16,te+=W>>>16,Y+=te>>>16,ie+=Y>>>16,_[7]=S=Y&65535|ie<<16,w[7]=ge=W&65535|te<<16,R+=128,N-=128}return R}function d(f){var g=new s;g.update(f);var _=g.digest();return g.clean(),_}i.hash=d})(Pp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=$n,t=Pp,s=Ir;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(z){const B=new Float64Array(16);if(z)for(let F=0;F<z.length;F++)B[F]=z[F];return B}const u=new Uint8Array(32);u[0]=9;const d=o(),f=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),_=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),T=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),R=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function N(z,B){for(let F=0;F<16;F++)z[F]=B[F]|0}function x(z){let B=1;for(let F=0;F<16;F++){let l=z[F]+B+65535;B=Math.floor(l/65536),z[F]=l-B*65536}z[0]+=B-1+37*(B-1)}function j(z,B,F){const l=~(F-1);for(let I=0;I<16;I++){const se=l&(z[I]^B[I]);z[I]^=se,B[I]^=se}}function H(z,B){const F=o(),l=o();for(let I=0;I<16;I++)l[I]=B[I];x(l),x(l),x(l);for(let I=0;I<2;I++){F[0]=l[0]-65517;for(let fe=1;fe<15;fe++)F[fe]=l[fe]-65535-(F[fe-1]>>16&1),F[fe-1]&=65535;F[15]=l[15]-32767-(F[14]>>16&1);const se=F[15]>>16&1;F[14]&=65535,j(l,F,1-se)}for(let I=0;I<16;I++)z[2*I]=l[I]&255,z[2*I+1]=l[I]>>8}function J(z,B){let F=0;for(let l=0;l<32;l++)F|=z[l]^B[l];return(1&F-1>>>8)-1}function A(z,B){const F=new Uint8Array(32),l=new Uint8Array(32);return H(F,z),H(l,B),J(F,l)}function P(z){const B=new Uint8Array(32);return H(B,z),B[0]&1}function E(z,B){for(let F=0;F<16;F++)z[F]=B[2*F]+(B[2*F+1]<<8);z[15]&=32767}function S(z,B,F){for(let l=0;l<16;l++)z[l]=B[l]+F[l]}function y(z,B,F){for(let l=0;l<16;l++)z[l]=B[l]-F[l]}function c(z,B,F){let l,I,se=0,fe=0,Ce=0,qe=0,ke=0,Le=0,gt=0,Dt=0,je=0,Se=0,Fe=0,Re=0,Be=0,Ae=0,$e=0,Ee=0,Oe=0,He=0,Ie=0,Ve=0,We=0,et=0,tt=0,Je=0,ir=0,fr=0,Xr=0,nr=0,ai=0,wi=0,ji=0,wt=F[0],vt=F[1],Et=F[2],Ct=F[3],_t=F[4],yt=F[5],Ut=F[6],Lt=F[7],St=F[8],Mt=F[9],xt=F[10],Pt=F[11],It=F[12],lt=F[13],jt=F[14],Bt=F[15];l=B[0],se+=l*wt,fe+=l*vt,Ce+=l*Et,qe+=l*Ct,ke+=l*_t,Le+=l*yt,gt+=l*Ut,Dt+=l*Lt,je+=l*St,Se+=l*Mt,Fe+=l*xt,Re+=l*Pt,Be+=l*It,Ae+=l*lt,$e+=l*jt,Ee+=l*Bt,l=B[1],fe+=l*wt,Ce+=l*vt,qe+=l*Et,ke+=l*Ct,Le+=l*_t,gt+=l*yt,Dt+=l*Ut,je+=l*Lt,Se+=l*St,Fe+=l*Mt,Re+=l*xt,Be+=l*Pt,Ae+=l*It,$e+=l*lt,Ee+=l*jt,Oe+=l*Bt,l=B[2],Ce+=l*wt,qe+=l*vt,ke+=l*Et,Le+=l*Ct,gt+=l*_t,Dt+=l*yt,je+=l*Ut,Se+=l*Lt,Fe+=l*St,Re+=l*Mt,Be+=l*xt,Ae+=l*Pt,$e+=l*It,Ee+=l*lt,Oe+=l*jt,He+=l*Bt,l=B[3],qe+=l*wt,ke+=l*vt,Le+=l*Et,gt+=l*Ct,Dt+=l*_t,je+=l*yt,Se+=l*Ut,Fe+=l*Lt,Re+=l*St,Be+=l*Mt,Ae+=l*xt,$e+=l*Pt,Ee+=l*It,Oe+=l*lt,He+=l*jt,Ie+=l*Bt,l=B[4],ke+=l*wt,Le+=l*vt,gt+=l*Et,Dt+=l*Ct,je+=l*_t,Se+=l*yt,Fe+=l*Ut,Re+=l*Lt,Be+=l*St,Ae+=l*Mt,$e+=l*xt,Ee+=l*Pt,Oe+=l*It,He+=l*lt,Ie+=l*jt,Ve+=l*Bt,l=B[5],Le+=l*wt,gt+=l*vt,Dt+=l*Et,je+=l*Ct,Se+=l*_t,Fe+=l*yt,Re+=l*Ut,Be+=l*Lt,Ae+=l*St,$e+=l*Mt,Ee+=l*xt,Oe+=l*Pt,He+=l*It,Ie+=l*lt,Ve+=l*jt,We+=l*Bt,l=B[6],gt+=l*wt,Dt+=l*vt,je+=l*Et,Se+=l*Ct,Fe+=l*_t,Re+=l*yt,Be+=l*Ut,Ae+=l*Lt,$e+=l*St,Ee+=l*Mt,Oe+=l*xt,He+=l*Pt,Ie+=l*It,Ve+=l*lt,We+=l*jt,et+=l*Bt,l=B[7],Dt+=l*wt,je+=l*vt,Se+=l*Et,Fe+=l*Ct,Re+=l*_t,Be+=l*yt,Ae+=l*Ut,$e+=l*Lt,Ee+=l*St,Oe+=l*Mt,He+=l*xt,Ie+=l*Pt,Ve+=l*It,We+=l*lt,et+=l*jt,tt+=l*Bt,l=B[8],je+=l*wt,Se+=l*vt,Fe+=l*Et,Re+=l*Ct,Be+=l*_t,Ae+=l*yt,$e+=l*Ut,Ee+=l*Lt,Oe+=l*St,He+=l*Mt,Ie+=l*xt,Ve+=l*Pt,We+=l*It,et+=l*lt,tt+=l*jt,Je+=l*Bt,l=B[9],Se+=l*wt,Fe+=l*vt,Re+=l*Et,Be+=l*Ct,Ae+=l*_t,$e+=l*yt,Ee+=l*Ut,Oe+=l*Lt,He+=l*St,Ie+=l*Mt,Ve+=l*xt,We+=l*Pt,et+=l*It,tt+=l*lt,Je+=l*jt,ir+=l*Bt,l=B[10],Fe+=l*wt,Re+=l*vt,Be+=l*Et,Ae+=l*Ct,$e+=l*_t,Ee+=l*yt,Oe+=l*Ut,He+=l*Lt,Ie+=l*St,Ve+=l*Mt,We+=l*xt,et+=l*Pt,tt+=l*It,Je+=l*lt,ir+=l*jt,fr+=l*Bt,l=B[11],Re+=l*wt,Be+=l*vt,Ae+=l*Et,$e+=l*Ct,Ee+=l*_t,Oe+=l*yt,He+=l*Ut,Ie+=l*Lt,Ve+=l*St,We+=l*Mt,et+=l*xt,tt+=l*Pt,Je+=l*It,ir+=l*lt,fr+=l*jt,Xr+=l*Bt,l=B[12],Be+=l*wt,Ae+=l*vt,$e+=l*Et,Ee+=l*Ct,Oe+=l*_t,He+=l*yt,Ie+=l*Ut,Ve+=l*Lt,We+=l*St,et+=l*Mt,tt+=l*xt,Je+=l*Pt,ir+=l*It,fr+=l*lt,Xr+=l*jt,nr+=l*Bt,l=B[13],Ae+=l*wt,$e+=l*vt,Ee+=l*Et,Oe+=l*Ct,He+=l*_t,Ie+=l*yt,Ve+=l*Ut,We+=l*Lt,et+=l*St,tt+=l*Mt,Je+=l*xt,ir+=l*Pt,fr+=l*It,Xr+=l*lt,nr+=l*jt,ai+=l*Bt,l=B[14],$e+=l*wt,Ee+=l*vt,Oe+=l*Et,He+=l*Ct,Ie+=l*_t,Ve+=l*yt,We+=l*Ut,et+=l*Lt,tt+=l*St,Je+=l*Mt,ir+=l*xt,fr+=l*Pt,Xr+=l*It,nr+=l*lt,ai+=l*jt,wi+=l*Bt,l=B[15],Ee+=l*wt,Oe+=l*vt,He+=l*Et,Ie+=l*Ct,Ve+=l*_t,We+=l*yt,et+=l*Ut,tt+=l*Lt,Je+=l*St,ir+=l*Mt,fr+=l*xt,Xr+=l*Pt,nr+=l*It,ai+=l*lt,wi+=l*jt,ji+=l*Bt,se+=38*Oe,fe+=38*He,Ce+=38*Ie,qe+=38*Ve,ke+=38*We,Le+=38*et,gt+=38*tt,Dt+=38*Je,je+=38*ir,Se+=38*fr,Fe+=38*Xr,Re+=38*nr,Be+=38*ai,Ae+=38*wi,$e+=38*ji,I=1,l=se+I+65535,I=Math.floor(l/65536),se=l-I*65536,l=fe+I+65535,I=Math.floor(l/65536),fe=l-I*65536,l=Ce+I+65535,I=Math.floor(l/65536),Ce=l-I*65536,l=qe+I+65535,I=Math.floor(l/65536),qe=l-I*65536,l=ke+I+65535,I=Math.floor(l/65536),ke=l-I*65536,l=Le+I+65535,I=Math.floor(l/65536),Le=l-I*65536,l=gt+I+65535,I=Math.floor(l/65536),gt=l-I*65536,l=Dt+I+65535,I=Math.floor(l/65536),Dt=l-I*65536,l=je+I+65535,I=Math.floor(l/65536),je=l-I*65536,l=Se+I+65535,I=Math.floor(l/65536),Se=l-I*65536,l=Fe+I+65535,I=Math.floor(l/65536),Fe=l-I*65536,l=Re+I+65535,I=Math.floor(l/65536),Re=l-I*65536,l=Be+I+65535,I=Math.floor(l/65536),Be=l-I*65536,l=Ae+I+65535,I=Math.floor(l/65536),Ae=l-I*65536,l=$e+I+65535,I=Math.floor(l/65536),$e=l-I*65536,l=Ee+I+65535,I=Math.floor(l/65536),Ee=l-I*65536,se+=I-1+37*(I-1),I=1,l=se+I+65535,I=Math.floor(l/65536),se=l-I*65536,l=fe+I+65535,I=Math.floor(l/65536),fe=l-I*65536,l=Ce+I+65535,I=Math.floor(l/65536),Ce=l-I*65536,l=qe+I+65535,I=Math.floor(l/65536),qe=l-I*65536,l=ke+I+65535,I=Math.floor(l/65536),ke=l-I*65536,l=Le+I+65535,I=Math.floor(l/65536),Le=l-I*65536,l=gt+I+65535,I=Math.floor(l/65536),gt=l-I*65536,l=Dt+I+65535,I=Math.floor(l/65536),Dt=l-I*65536,l=je+I+65535,I=Math.floor(l/65536),je=l-I*65536,l=Se+I+65535,I=Math.floor(l/65536),Se=l-I*65536,l=Fe+I+65535,I=Math.floor(l/65536),Fe=l-I*65536,l=Re+I+65535,I=Math.floor(l/65536),Re=l-I*65536,l=Be+I+65535,I=Math.floor(l/65536),Be=l-I*65536,l=Ae+I+65535,I=Math.floor(l/65536),Ae=l-I*65536,l=$e+I+65535,I=Math.floor(l/65536),$e=l-I*65536,l=Ee+I+65535,I=Math.floor(l/65536),Ee=l-I*65536,se+=I-1+37*(I-1),z[0]=se,z[1]=fe,z[2]=Ce,z[3]=qe,z[4]=ke,z[5]=Le,z[6]=gt,z[7]=Dt,z[8]=je,z[9]=Se,z[10]=Fe,z[11]=Re,z[12]=Be,z[13]=Ae,z[14]=$e,z[15]=Ee}function v(z,B){c(z,B,B)}function k(z,B){const F=o();let l;for(l=0;l<16;l++)F[l]=B[l];for(l=253;l>=0;l--)v(F,F),l!==2&&l!==4&&c(F,F,B);for(l=0;l<16;l++)z[l]=F[l]}function G(z,B){const F=o();let l;for(l=0;l<16;l++)F[l]=B[l];for(l=250;l>=0;l--)v(F,F),l!==1&&c(F,F,B);for(l=0;l<16;l++)z[l]=F[l]}function oe(z,B){const F=o(),l=o(),I=o(),se=o(),fe=o(),Ce=o(),qe=o(),ke=o(),Le=o();y(F,z[1],z[0]),y(Le,B[1],B[0]),c(F,F,Le),S(l,z[0],z[1]),S(Le,B[0],B[1]),c(l,l,Le),c(I,z[3],B[3]),c(I,I,_),c(se,z[2],B[2]),S(se,se,se),y(fe,l,F),y(Ce,se,I),S(qe,se,I),S(ke,l,F),c(z[0],fe,Ce),c(z[1],ke,qe),c(z[2],qe,Ce),c(z[3],fe,ke)}function ue(z,B,F){for(let l=0;l<4;l++)j(z[l],B[l],F)}function ge(z,B){const F=o(),l=o(),I=o();k(I,B[2]),c(F,B[0],I),c(l,B[1],I),H(z,l),z[31]^=P(F)<<7}function $(z,B,F){N(z[0],d),N(z[1],f),N(z[2],f),N(z[3],d);for(let l=255;l>=0;--l){const I=F[l/8|0]>>(l&7)&1;ue(z,B,I),oe(B,z),oe(z,z),ue(z,B,I)}}function q(z,B){const F=[o(),o(),o(),o()];N(F[0],w),N(F[1],T),N(F[2],f),c(F[3],w,T),$(z,F,B)}function le(z){if(z.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const B=(0,t.hash)(z);B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(32),l=[o(),o(),o(),o()];q(l,B),ge(F,l);const I=new Uint8Array(64);return I.set(z),I.set(F,32),{publicKey:F,secretKey:I}}i.generateKeyPairFromSeed=le;function re(z){const B=(0,e.randomBytes)(32,z),F=le(B);return(0,s.wipe)(B),F}i.generateKeyPair=re;function W(z){if(z.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}i.extractPublicKeyFromSecretKey=W;const te=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(z,B){let F,l,I,se;for(l=63;l>=32;--l){for(F=0,I=l-32,se=l-12;I<se;++I)B[I]+=F-16*B[l]*te[I-(l-32)],F=Math.floor((B[I]+128)/256),B[I]-=F*256;B[I]+=F,B[l]=0}for(F=0,I=0;I<32;I++)B[I]+=F-(B[31]>>4)*te[I],F=B[I]>>8,B[I]&=255;for(I=0;I<32;I++)B[I]-=F*te[I];for(l=0;l<32;l++)B[l+1]+=B[l]>>8,z[l]=B[l]&255}function ie(z){const B=new Float64Array(64);for(let F=0;F<64;F++)B[F]=z[F];for(let F=0;F<64;F++)z[F]=0;Y(z,B)}function xe(z,B){const F=new Float64Array(64),l=[o(),o(),o(),o()],I=(0,t.hash)(z.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const se=new Uint8Array(64);se.set(I.subarray(32),32);const fe=new t.SHA512;fe.update(se.subarray(32)),fe.update(B);const Ce=fe.digest();fe.clean(),ie(Ce),q(l,Ce),ge(se,l),fe.reset(),fe.update(se.subarray(0,32)),fe.update(z.subarray(32)),fe.update(B);const qe=fe.digest();ie(qe);for(let ke=0;ke<32;ke++)F[ke]=Ce[ke];for(let ke=0;ke<32;ke++)for(let Le=0;Le<32;Le++)F[ke+Le]+=qe[ke]*I[Le];return Y(se.subarray(32),F),se}i.sign=xe;function ne(z,B){const F=o(),l=o(),I=o(),se=o(),fe=o(),Ce=o(),qe=o();return N(z[2],f),E(z[1],B),v(I,z[1]),c(se,I,g),y(I,I,z[2]),S(se,z[2],se),v(fe,se),v(Ce,fe),c(qe,Ce,fe),c(F,qe,I),c(F,F,se),G(F,F),c(F,F,I),c(F,F,se),c(F,F,se),c(z[0],F,se),v(l,z[0]),c(l,l,se),A(l,I)&&c(z[0],z[0],R),v(l,z[0]),c(l,l,se),A(l,I)?-1:(P(z[0])===B[31]>>7&&y(z[0],d,z[0]),c(z[3],z[0],z[1]),0)}function _e(z,B,F){const l=new Uint8Array(32),I=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if(F.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ne(se,z))return!1;const fe=new t.SHA512;fe.update(F.subarray(0,32)),fe.update(z),fe.update(B);const Ce=fe.digest();return ie(Ce),$(I,se,Ce),q(se,F.subarray(32)),oe(I,se),ge(l,I),!J(F,l)}i.verify=_e;function he(z){let B=[o(),o(),o(),o()];if(ne(B,z))throw new Error("Ed25519: invalid public key");let F=o(),l=o(),I=B[1];S(F,f,I),y(l,f,I),k(l,l),c(F,F,l);let se=new Uint8Array(32);return H(se,F),se}i.convertPublicKeyToX25519=he;function ye(z){const B=(0,t.hash)(z.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),F}i.convertSecretKeyToX25519=ye})(Uc);const AE="EdDSA",OE="JWT",Tp=".",Np="base64url",PE="utf8",TE="utf8",NE=":",FE="did",RE="key",kf="base58btc",$E="z",UE="K36",LE=32;function Lc(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Fp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lc(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function ME(i,e){e||(e=i.reduce((o,u)=>o+u.length,0));const t=Fp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Lc(t)}function jE(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var u=i.charAt(o),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=o}var f=i.length,g=i.charAt(0),_=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function T(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var j=0,H=0,J=0,A=x.length;J!==A&&x[J]===0;)J++,j++;for(var P=(A-J)*w+1>>>0,E=new Uint8Array(P);J!==A;){for(var S=x[J],y=0,c=P-1;(S!==0||y<H)&&c!==-1;c--,y++)S+=256*E[c]>>>0,E[c]=S%f>>>0,S=S/f>>>0;if(S!==0)throw new Error("Non-zero carry");H=y,J++}for(var v=P-H;v!==P&&E[v]===0;)v++;for(var k=g.repeat(j);v<P;++v)k+=i.charAt(E[v]);return k}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var j=0;if(x[j]!==" "){for(var H=0,J=0;x[j]===g;)H++,j++;for(var A=(x.length-j)*_+1>>>0,P=new Uint8Array(A);x[j];){var E=t[x.charCodeAt(j)];if(E===255)return;for(var S=0,y=A-1;(E!==0||S<J)&&y!==-1;y--,S++)E+=f*P[y]>>>0,P[y]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");J=S,j++}if(x[j]!==" "){for(var c=A-J;c!==A&&P[c]===0;)c++;for(var v=new Uint8Array(H+(A-c)),k=H;c!==A;)v[k++]=P[c++];return v}}}function N(x){var j=R(x);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:R,decode:N}}var BE=jE,zE=BE;const qE=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},HE=i=>new TextEncoder().encode(i),KE=i=>new TextDecoder().decode(i);let kE=class{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},VE=class{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rp(this,e)}},GE=class{constructor(e){this.decoders=e}or(e){return Rp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Rp=(i,e)=>new GE({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});let WE=class{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new kE(e,t,s),this.decoder=new VE(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ra=({name:i,prefix:e,encode:t,decode:s})=>new WE(i,e,t,s),Ss=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=zE(t,e);return ra({prefix:i,name:e,encode:s,decode:u=>qE(o(u))})},YE=(i,e,t,s)=>{const o={};for(let w=0;w<e.length;++w)o[e[w]]=w;let u=i.length;for(;i[u-1]==="=";)--u;const d=new Uint8Array(u*t/8|0);let f=0,g=0,_=0;for(let w=0;w<u;++w){const T=o[i[w]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|T,f+=t,f>=8&&(f-=8,d[_++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return d},JE=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let u="",d=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],d+=8;d>t;)d-=t,u+=e[o&f>>d];if(d&&(u+=e[o&f<<t-d]),s)for(;u.length*t&7;)u+="=";return u},Xt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ra({prefix:e,name:i,encode(o){return JE(o,s,t)},decode(o){return YE(o,s,t,i)}}),XE=ra({prefix:"\0",name:"identity",encode:i=>KE(i),decode:i=>HE(i)}),QE=Object.freeze(Object.defineProperty({__proto__:null,identity:XE},Symbol.toStringTag,{value:"Module"})),ZE=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),e8=Object.freeze(Object.defineProperty({__proto__:null,base2:ZE},Symbol.toStringTag,{value:"Module"})),t8=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),r8=Object.freeze(Object.defineProperty({__proto__:null,base8:t8},Symbol.toStringTag,{value:"Module"})),i8=Ss({prefix:"9",name:"base10",alphabet:"0123456789"}),n8=Object.freeze(Object.defineProperty({__proto__:null,base10:i8},Symbol.toStringTag,{value:"Module"})),s8=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o8=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),a8=Object.freeze(Object.defineProperty({__proto__:null,base16:s8,base16upper:o8},Symbol.toStringTag,{value:"Module"})),u8=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),c8=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),h8=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l8=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f8=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),d8=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p8=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),g8=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),D8=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),v8=Object.freeze(Object.defineProperty({__proto__:null,base32:u8,base32hex:f8,base32hexpad:p8,base32hexpadupper:g8,base32hexupper:d8,base32pad:h8,base32padupper:l8,base32upper:c8,base32z:D8},Symbol.toStringTag,{value:"Module"})),y8=Ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),b8=Ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_8=Object.freeze(Object.defineProperty({__proto__:null,base36:y8,base36upper:b8},Symbol.toStringTag,{value:"Module"})),m8=Ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w8=Ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),E8=Object.freeze(Object.defineProperty({__proto__:null,base58btc:m8,base58flickr:w8},Symbol.toStringTag,{value:"Module"})),C8=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S8=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),x8=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I8=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),A8=Object.freeze(Object.defineProperty({__proto__:null,base64:C8,base64pad:S8,base64url:x8,base64urlpad:I8},Symbol.toStringTag,{value:"Module"})),$p=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),O8=$p.reduce((i,e,t)=>(i[t]=e,i),[]),P8=$p.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function T8(i){return i.reduce((e,t)=>(e+=O8[t],e),"")}function N8(i){const e=[];for(const t of i){const s=P8[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const F8=ra({prefix:"ðŸš€",name:"base256emoji",encode:T8,decode:N8}),R8=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:F8},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Vf={...QE,...e8,...r8,...n8,...a8,...v8,..._8,...E8,...A8,...R8};function Up(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const Gf=Up("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Ku=Up("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=Fp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),Lp={utf8:Gf,"utf-8":Gf,hex:Vf.base16,latin1:Ku,ascii:Ku,binary:Ku,...Vf};function Mc(i,e="utf8"){const t=Lp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}function jc(i,e="utf8"){const t=Lp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lc(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function ko(i){return Mc(jc(_s(i),PE),Np)}function Mp(i){const e=jc(UE,kf),t=$E+Mc(ME([e,i]),kf);return[FE,RE,t].join(NE)}function $8(i){return Mc(i,Np)}function U8(i){return jc([ko(i.header),ko(i.payload)].join(Tp),TE)}function L8(i){return[ko(i.header),ko(i.payload),$8(i.signature)].join(Tp)}function Wf(i=$n.randomBytes(LE)){return Uc.generateKeyPairFromSeed(i)}async function M8(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const u={alg:AE,typ:OE},d=Mp(s.publicKey),f=o+t,g={iss:d,sub:i,aud:e,iat:o,exp:f},_=U8({header:u,payload:g}),w=Uc.sign(s.secretKey,_);return L8({header:u,payload:g,signature:w})}function j8(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function B8(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?j8(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function z8(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var u=i.charAt(o),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=o}var f=i.length,g=i.charAt(0),_=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function T(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var j=0,H=0,J=0,A=x.length;J!==A&&x[J]===0;)J++,j++;for(var P=(A-J)*w+1>>>0,E=new Uint8Array(P);J!==A;){for(var S=x[J],y=0,c=P-1;(S!==0||y<H)&&c!==-1;c--,y++)S+=256*E[c]>>>0,E[c]=S%f>>>0,S=S/f>>>0;if(S!==0)throw new Error("Non-zero carry");H=y,J++}for(var v=P-H;v!==P&&E[v]===0;)v++;for(var k=g.repeat(j);v<P;++v)k+=i.charAt(E[v]);return k}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var j=0;if(x[j]!==" "){for(var H=0,J=0;x[j]===g;)H++,j++;for(var A=(x.length-j)*_+1>>>0,P=new Uint8Array(A);x[j];){var E=t[x.charCodeAt(j)];if(E===255)return;for(var S=0,y=A-1;(E!==0||S<J)&&y!==-1;y--,S++)E+=f*P[y]>>>0,P[y]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");J=S,j++}if(x[j]!==" "){for(var c=A-J;c!==A&&P[c]===0;)c++;for(var v=new Uint8Array(H+(A-c)),k=H;c!==A;)v[k++]=P[c++];return v}}}function N(x){var j=R(x);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:R,decode:N}}var q8=z8,H8=q8;const K8=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},k8=i=>new TextEncoder().encode(i),V8=i=>new TextDecoder().decode(i);class G8{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W8{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jp(this,e)}}class Y8{constructor(e){this.decoders=e}or(e){return jp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jp=(i,e)=>new Y8({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class J8{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new G8(e,t,s),this.decoder=new W8(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ia=({name:i,prefix:e,encode:t,decode:s})=>new J8(i,e,t,s),xs=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=H8(t,e);return ia({prefix:i,name:e,encode:s,decode:u=>K8(o(u))})},X8=(i,e,t,s)=>{const o={};for(let w=0;w<e.length;++w)o[e[w]]=w;let u=i.length;for(;i[u-1]==="=";)--u;const d=new Uint8Array(u*t/8|0);let f=0,g=0,_=0;for(let w=0;w<u;++w){const T=o[i[w]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|T,f+=t,f>=8&&(f-=8,d[_++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return d},Q8=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let u="",d=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],d+=8;d>t;)d-=t,u+=e[o&f>>d];if(d&&(u+=e[o&f<<t-d]),s)for(;u.length*t&7;)u+="=";return u},Qt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ia({prefix:e,name:i,encode(o){return Q8(o,s,t)},decode(o){return X8(o,s,t,i)}}),Z8=ia({prefix:"\0",name:"identity",encode:i=>V8(i),decode:i=>k8(i)}),e2=Object.freeze(Object.defineProperty({__proto__:null,identity:Z8},Symbol.toStringTag,{value:"Module"})),t2=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),r2=Object.freeze(Object.defineProperty({__proto__:null,base2:t2},Symbol.toStringTag,{value:"Module"})),i2=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),n2=Object.freeze(Object.defineProperty({__proto__:null,base8:i2},Symbol.toStringTag,{value:"Module"})),s2=xs({prefix:"9",name:"base10",alphabet:"0123456789"}),o2=Object.freeze(Object.defineProperty({__proto__:null,base10:s2},Symbol.toStringTag,{value:"Module"})),a2=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),u2=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),c2=Object.freeze(Object.defineProperty({__proto__:null,base16:a2,base16upper:u2},Symbol.toStringTag,{value:"Module"})),h2=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),l2=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),f2=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),d2=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p2=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),g2=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),D2=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v2=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y2=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),b2=Object.freeze(Object.defineProperty({__proto__:null,base32:h2,base32hex:p2,base32hexpad:D2,base32hexpadupper:v2,base32hexupper:g2,base32pad:f2,base32padupper:d2,base32upper:l2,base32z:y2},Symbol.toStringTag,{value:"Module"})),_2=xs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),m2=xs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),w2=Object.freeze(Object.defineProperty({__proto__:null,base36:_2,base36upper:m2},Symbol.toStringTag,{value:"Module"})),E2=xs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),C2=xs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),S2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:E2,base58flickr:C2},Symbol.toStringTag,{value:"Module"})),x2=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),I2=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),A2=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O2=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),P2=Object.freeze(Object.defineProperty({__proto__:null,base64:x2,base64pad:I2,base64url:A2,base64urlpad:O2},Symbol.toStringTag,{value:"Module"})),Bp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),T2=Bp.reduce((i,e,t)=>(i[t]=e,i),[]),N2=Bp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function F2(i){return i.reduce((e,t)=>(e+=T2[t],e),"")}function R2(i){const e=[];for(const t of i){const s=N2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const $2=ia({prefix:"ðŸš€",name:"base256emoji",encode:F2,decode:R2}),U2=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:$2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Yf={...e2,...r2,...n2,...o2,...c2,...b2,...w2,...S2,...P2,...U2};function zp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const Jf=zp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),ku=zp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=B8(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),L2={utf8:Jf,"utf-8":Jf,hex:Yf.base16,latin1:ku,ascii:ku,binary:ku,...Yf};function M2(i,e="utf8"){const t=L2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}const j2="PARSE_ERROR",B2="INVALID_REQUEST",z2="METHOD_NOT_FOUND",q2="INVALID_PARAMS",qp="INTERNAL_ERROR",Bc="SERVER_ERROR",H2=[-32700,-32600,-32601,-32602,-32603],vs={[j2]:{code:-32700,message:"Parse error"},[B2]:{code:-32600,message:"Invalid Request"},[z2]:{code:-32601,message:"Method not found"},[q2]:{code:-32602,message:"Invalid params"},[qp]:{code:-32603,message:"Internal error"},[Bc]:{code:-32e3,message:"Server error"}},Hp=Bc;function K2(i){return H2.includes(i)}function Xf(i){return Object.keys(vs).includes(i)?vs[i]:vs[Hp]}function k2(i){const e=Object.values(vs).find(t=>t.code===i);return e||vs[Hp]}function Kp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var kp={},bi={},Qf;function V2(){if(Qf)return bi;Qf=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.isBrowserCryptoAvailable=bi.getSubtleCrypto=bi.getBrowerCrypto=void 0;function i(){return(Sr===null||Sr===void 0?void 0:Sr.crypto)||(Sr===null||Sr===void 0?void 0:Sr.msCrypto)||{}}bi.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}bi.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return bi.isBrowserCryptoAvailable=t,bi}var _i={},Zf;function G2(){if(Zf)return _i;Zf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowser=_i.isNode=_i.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_i.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_i.isNode=e;function t(){return!i()&&!e()}return _i.isBrowser=t,_i}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Br;e.__exportStar(V2(),i),e.__exportStar(G2(),i)})(kp);function Vp(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function zc(i=6){return BigInt(Vp(i))}function na(i,e,t){return{id:t||Vp(),jsonrpc:"2.0",method:i,params:e}}function qc(i,e){return{id:i,jsonrpc:"2.0",result:e}}function sa(i,e,t){return{id:i,jsonrpc:"2.0",error:W2(e,t)}}function W2(i,e){return typeof i>"u"?Xf(qp):(typeof i=="string"&&(i=Object.assign(Object.assign({},Xf(Bc)),{message:i})),typeof e<"u"&&(i.data=e),K2(i.code)&&(i=k2(i.code)),i)}class Y2{}class J2 extends Y2{constructor(){super()}}class X2 extends J2{constructor(e){super()}}const Q2="^https?:",Z2="^wss?:";function e6(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Gp(i,e){const t=e6(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function ed(i){return Gp(i,Q2)}function td(i){return Gp(i,Z2)}function t6(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function Wp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Hc(i){return Wp(i)&&"method"in i}function oa(i){return Wp(i)&&(mi(i)||Wr(i))}function mi(i){return"result"in i}function Wr(i){return"error"in i}class Li extends X2{constructor(e){super(e),this.events=new xr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(na(e.method,e.params||[],e.id||zc().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(u){o(u)}this.events.on(`${e.id}`,u=>{Wr(u)?o(u.error):s(u.result)});try{await this.connection.send(e,t)}catch(u){o(u)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),oa(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const r6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),i6=()=>typeof window<"u",rd=i=>i.split("?")[0],id=10,n6=r6();class s6{constructor(e){if(this.url=e,this.events=new xr.EventEmitter,this.registering=!1,!td(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_s(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!td(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=kp.isReactNative()?void 0:{rejectUnauthorized:!t6(e)},u=new n6(e,[],o);i6()?u.onerror=d=>{const f=d;s(this.emitError(f.error))}:u.on("error",d=>{s(this.emitError(d))}),u.onopen=()=>{this.onOpen(u),t(u)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$c(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),u=sa(e,o);this.events.emit("payload",u)}parseError(e,t=this.url){return Kp(e,rd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>id&&this.events.setMaxListeners(id)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${rd(this.url)}`));return this.events.emit("register_error",t),t}}var Vo={exports:{}};Vo.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,u=2,d=9007199254740991,f="[object Arguments]",g="[object Array]",_="[object AsyncFunction]",w="[object Boolean]",T="[object Date]",R="[object Error]",N="[object Function]",x="[object GeneratorFunction]",j="[object Map]",H="[object Number]",J="[object Null]",A="[object Object]",P="[object Promise]",E="[object Proxy]",S="[object RegExp]",y="[object Set]",c="[object String]",v="[object Symbol]",k="[object Undefined]",G="[object WeakMap]",oe="[object ArrayBuffer]",ue="[object DataView]",ge="[object Float32Array]",$="[object Float64Array]",q="[object Int8Array]",le="[object Int16Array]",re="[object Int32Array]",W="[object Uint8Array]",te="[object Uint8ClampedArray]",Y="[object Uint16Array]",ie="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,he={};he[ge]=he[$]=he[q]=he[le]=he[re]=he[W]=he[te]=he[Y]=he[ie]=!0,he[f]=he[g]=he[oe]=he[w]=he[ue]=he[T]=he[R]=he[N]=he[j]=he[H]=he[A]=he[S]=he[y]=he[c]=he[G]=!1;var ye=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr,z=typeof self=="object"&&self&&self.Object===Object&&self,B=ye||z||Function("return this")(),F=e&&!e.nodeType&&e,l=F&&!0&&i&&!i.nodeType&&i,I=l&&l.exports===F,se=I&&ye.process,fe=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Ce=fe&&fe.isTypedArray;function qe(m,U){for(var Z=-1,de=m==null?0:m.length,ut=0,Te=[];++Z<de;){var dt=m[Z];U(dt,Z,m)&&(Te[ut++]=dt)}return Te}function ke(m,U){for(var Z=-1,de=U.length,ut=m.length;++Z<de;)m[ut+Z]=U[Z];return m}function Le(m,U){for(var Z=-1,de=m==null?0:m.length;++Z<de;)if(U(m[Z],Z,m))return!0;return!1}function gt(m,U){for(var Z=-1,de=Array(m);++Z<m;)de[Z]=U(Z);return de}function Dt(m){return function(U){return m(U)}}function je(m,U){return m.has(U)}function Se(m,U){return m==null?void 0:m[U]}function Fe(m){var U=-1,Z=Array(m.size);return m.forEach(function(de,ut){Z[++U]=[ut,de]}),Z}function Re(m,U){return function(Z){return m(U(Z))}}function Be(m){var U=-1,Z=Array(m.size);return m.forEach(function(de){Z[++U]=de}),Z}var Ae=Array.prototype,$e=Function.prototype,Ee=Object.prototype,Oe=B["__core-js_shared__"],He=$e.toString,Ie=Ee.hasOwnProperty,Ve=function(){var m=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),We=Ee.toString,et=RegExp("^"+He.call(Ie).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=I?B.Buffer:void 0,Je=B.Symbol,ir=B.Uint8Array,fr=Ee.propertyIsEnumerable,Xr=Ae.splice,nr=Je?Je.toStringTag:void 0,ai=Object.getOwnPropertySymbols,wi=tt?tt.isBuffer:void 0,ji=Re(Object.keys,Object),wt=br(B,"DataView"),vt=br(B,"Map"),Et=br(B,"Promise"),Ct=br(B,"Set"),_t=br(B,"WeakMap"),yt=br(Object,"create"),Ut=ci(wt),Lt=ci(vt),St=ci(Et),Mt=ci(Ct),xt=ci(_t),Pt=Je?Je.prototype:void 0,It=Pt?Pt.valueOf:void 0;function lt(m){var U=-1,Z=m==null?0:m.length;for(this.clear();++U<Z;){var de=m[U];this.set(de[0],de[1])}}function jt(){this.__data__=yt?yt(null):{},this.size=0}function Bt(m){var U=this.has(m)&&delete this.__data__[m];return this.size-=U?1:0,U}function ca(m){var U=this.__data__;if(yt){var Z=U[m];return Z===s?void 0:Z}return Ie.call(U,m)?U[m]:void 0}function ha(m){var U=this.__data__;return yt?U[m]!==void 0:Ie.call(U,m)}function la(m,U){var Z=this.__data__;return this.size+=this.has(m)?0:1,Z[m]=yt&&U===void 0?s:U,this}lt.prototype.clear=jt,lt.prototype.delete=Bt,lt.prototype.get=ca,lt.prototype.has=ha,lt.prototype.set=la;function Ar(m){var U=-1,Z=m==null?0:m.length;for(this.clear();++U<Z;){var de=m[U];this.set(de[0],de[1])}}function fa(){this.__data__=[],this.size=0}function da(m){var U=this.__data__,Z=Bi(U,m);if(Z<0)return!1;var de=U.length-1;return Z==de?U.pop():Xr.call(U,Z,1),--this.size,!0}function pa(m){var U=this.__data__,Z=Bi(U,m);return Z<0?void 0:U[Z][1]}function ga(m){return Bi(this.__data__,m)>-1}function Da(m,U){var Z=this.__data__,de=Bi(Z,m);return de<0?(++this.size,Z.push([m,U])):Z[de][1]=U,this}Ar.prototype.clear=fa,Ar.prototype.delete=da,Ar.prototype.get=pa,Ar.prototype.has=ga,Ar.prototype.set=Da;function ui(m){var U=-1,Z=m==null?0:m.length;for(this.clear();++U<Z;){var de=m[U];this.set(de[0],de[1])}}function cn(){this.size=0,this.__data__={hash:new lt,map:new(vt||Ar),string:new lt}}function va(m){var U=Ei(this,m).delete(m);return this.size-=U?1:0,U}function hn(m){return Ei(this,m).get(m)}function ya(m){return Ei(this,m).has(m)}function ba(m,U){var Z=Ei(this,m),de=Z.size;return Z.set(m,U),this.size+=Z.size==de?0:1,this}ui.prototype.clear=cn,ui.prototype.delete=va,ui.prototype.get=hn,ui.prototype.has=ya,ui.prototype.set=ba;function ln(m){var U=-1,Z=m==null?0:m.length;for(this.__data__=new ui;++U<Z;)this.add(m[U])}function As(m){return this.__data__.set(m,s),this}function Os(m){return this.__data__.has(m)}ln.prototype.add=ln.prototype.push=As,ln.prototype.has=Os;function zr(m){var U=this.__data__=new Ar(m);this.size=U.size}function _a(){this.__data__=new Ar,this.size=0}function ma(m){var U=this.__data__,Z=U.delete(m);return this.size=U.size,Z}function wa(m){return this.__data__.get(m)}function Ea(m){return this.__data__.has(m)}function Ps(m,U){var Z=this.__data__;if(Z instanceof Ar){var de=Z.__data__;if(!vt||de.length<t-1)return de.push([m,U]),this.size=++Z.size,this;Z=this.__data__=new ui(de)}return Z.set(m,U),this.size=Z.size,this}zr.prototype.clear=_a,zr.prototype.delete=ma,zr.prototype.get=wa,zr.prototype.has=Ea,zr.prototype.set=Ps;function Ts(m,U){var Z=pn(m),de=!Z&&Hs(m),ut=!Z&&!de&&zn(m),Te=!Z&&!de&&!ut&&Vs(m),dt=Z||de||ut||Te,zt=dt?gt(m.length,String):[],Xe=zt.length;for(var ct in m)(U||Ie.call(m,ct))&&!(dt&&(ct=="length"||ut&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ms(ct,Xe)))&&zt.push(ct);return zt}function Bi(m,U){for(var Z=m.length;Z--;)if(qs(m[Z][0],U))return Z;return-1}function jn(m,U,Z){var de=U(m);return pn(m)?de:ke(de,Z(m))}function zi(m){return m==null?m===void 0?k:J:nr&&nr in Object(m)?Us(m):xa(m)}function Bn(m){return Hi(m)&&zi(m)==f}function qi(m,U,Z,de,ut){return m===U?!0:m==null||U==null||!Hi(m)&&!Hi(U)?m!==m&&U!==U:Ns(m,U,Z,de,qi,ut)}function Ns(m,U,Z,de,ut,Te){var dt=pn(m),zt=pn(U),Xe=dt?g:Qr(m),ct=zt?g:Qr(U);Xe=Xe==f?A:Xe,ct=ct==f?A:ct;var Tt=Xe==A,dr=ct==A,qt=Xe==ct;if(qt&&zn(m)){if(!zn(U))return!1;dt=!0,Tt=!1}if(qt&&!Tt)return Te||(Te=new zr),dt||Vs(m)?fn(m,U,Z,de,ut,Te):Sa(m,U,Xe,Z,de,ut,Te);if(!(Z&o)){var pt=Tt&&Ie.call(m,"__wrapped__"),sr=dr&&Ie.call(U,"__wrapped__");if(pt||sr){var qr=pt?m.value():m,Or=sr?U.value():U;return Te||(Te=new zr),ut(qr,Or,Z,de,Te)}}return qt?(Te||(Te=new zr),$s(m,U,Z,de,ut,Te)):!1}function Ca(m){if(!ks(m)||Bs(m))return!1;var U=gn(m)?et:ne;return U.test(ci(m))}function Fs(m){return Hi(m)&&Ks(m.length)&&!!he[zi(m)]}function Rs(m){if(!zs(m))return ji(m);var U=[];for(var Z in Object(m))Ie.call(m,Z)&&Z!="constructor"&&U.push(Z);return U}function fn(m,U,Z,de,ut,Te){var dt=Z&o,zt=m.length,Xe=U.length;if(zt!=Xe&&!(dt&&Xe>zt))return!1;var ct=Te.get(m);if(ct&&Te.get(U))return ct==U;var Tt=-1,dr=!0,qt=Z&u?new ln:void 0;for(Te.set(m,U),Te.set(U,m);++Tt<zt;){var pt=m[Tt],sr=U[Tt];if(de)var qr=dt?de(sr,pt,Tt,U,m,Te):de(pt,sr,Tt,m,U,Te);if(qr!==void 0){if(qr)continue;dr=!1;break}if(qt){if(!Le(U,function(Or,Zr){if(!je(qt,Zr)&&(pt===Or||ut(pt,Or,Z,de,Te)))return qt.push(Zr)})){dr=!1;break}}else if(!(pt===sr||ut(pt,sr,Z,de,Te))){dr=!1;break}}return Te.delete(m),Te.delete(U),dr}function Sa(m,U,Z,de,ut,Te,dt){switch(Z){case ue:if(m.byteLength!=U.byteLength||m.byteOffset!=U.byteOffset)return!1;m=m.buffer,U=U.buffer;case oe:return!(m.byteLength!=U.byteLength||!Te(new ir(m),new ir(U)));case w:case T:case H:return qs(+m,+U);case R:return m.name==U.name&&m.message==U.message;case S:case c:return m==U+"";case j:var zt=Fe;case y:var Xe=de&o;if(zt||(zt=Be),m.size!=U.size&&!Xe)return!1;var ct=dt.get(m);if(ct)return ct==U;de|=u,dt.set(m,U);var Tt=fn(zt(m),zt(U),de,ut,Te,dt);return dt.delete(m),Tt;case v:if(It)return It.call(m)==It.call(U)}return!1}function $s(m,U,Z,de,ut,Te){var dt=Z&o,zt=dn(m),Xe=zt.length,ct=dn(U),Tt=ct.length;if(Xe!=Tt&&!dt)return!1;for(var dr=Xe;dr--;){var qt=zt[dr];if(!(dt?qt in U:Ie.call(U,qt)))return!1}var pt=Te.get(m);if(pt&&Te.get(U))return pt==U;var sr=!0;Te.set(m,U),Te.set(U,m);for(var qr=dt;++dr<Xe;){qt=zt[dr];var Or=m[qt],Zr=U[qt];if(de)var qn=dt?de(Zr,Or,qt,U,m,Te):de(Or,Zr,qt,m,U,Te);if(!(qn===void 0?Or===Zr||ut(Or,Zr,Z,de,Te):qn)){sr=!1;break}qr||(qr=qt=="constructor")}if(sr&&!qr){var Ki=m.constructor,Vt=U.constructor;Ki!=Vt&&"constructor"in m&&"constructor"in U&&!(typeof Ki=="function"&&Ki instanceof Ki&&typeof Vt=="function"&&Vt instanceof Vt)&&(sr=!1)}return Te.delete(m),Te.delete(U),sr}function dn(m){return jn(m,Oa,Ls)}function Ei(m,U){var Z=m.__data__;return js(U)?Z[typeof U=="string"?"string":"hash"]:Z.map}function br(m,U){var Z=Se(m,U);return Ca(Z)?Z:void 0}function Us(m){var U=Ie.call(m,nr),Z=m[nr];try{m[nr]=void 0;var de=!0}catch{}var ut=We.call(m);return de&&(U?m[nr]=Z:delete m[nr]),ut}var Ls=ai?function(m){return m==null?[]:(m=Object(m),qe(ai(m),function(U){return fr.call(m,U)}))}:at,Qr=zi;(wt&&Qr(new wt(new ArrayBuffer(1)))!=ue||vt&&Qr(new vt)!=j||Et&&Qr(Et.resolve())!=P||Ct&&Qr(new Ct)!=y||_t&&Qr(new _t)!=G)&&(Qr=function(m){var U=zi(m),Z=U==A?m.constructor:void 0,de=Z?ci(Z):"";if(de)switch(de){case Ut:return ue;case Lt:return j;case St:return P;case Mt:return y;case xt:return G}return U});function Ms(m,U){return U=U??d,!!U&&(typeof m=="number"||_e.test(m))&&m>-1&&m%1==0&&m<U}function js(m){var U=typeof m;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?m!=="__proto__":m===null}function Bs(m){return!!Ve&&Ve in m}function zs(m){var U=m&&m.constructor,Z=typeof U=="function"&&U.prototype||Ee;return m===Z}function xa(m){return We.call(m)}function ci(m){if(m!=null){try{return He.call(m)}catch{}try{return m+""}catch{}}return""}function qs(m,U){return m===U||m!==m&&U!==U}var Hs=Bn(function(){return arguments}())?Bn:function(m){return Hi(m)&&Ie.call(m,"callee")&&!fr.call(m,"callee")},pn=Array.isArray;function Ia(m){return m!=null&&Ks(m.length)&&!gn(m)}var zn=wi||st;function Aa(m,U){return qi(m,U)}function gn(m){if(!ks(m))return!1;var U=zi(m);return U==N||U==x||U==_||U==E}function Ks(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=d}function ks(m){var U=typeof m;return m!=null&&(U=="object"||U=="function")}function Hi(m){return m!=null&&typeof m=="object"}var Vs=Ce?Dt(Ce):Fs;function Oa(m){return Ia(m)?Ts(m):Rs(m)}function at(){return[]}function st(){return!1}i.exports=Aa})(Vo,Vo.exports);var o6=Vo.exports;const a6=Ld(o6);function u6(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var u=i.charAt(o),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=o}var f=i.length,g=i.charAt(0),_=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function T(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var j=0,H=0,J=0,A=x.length;J!==A&&x[J]===0;)J++,j++;for(var P=(A-J)*w+1>>>0,E=new Uint8Array(P);J!==A;){for(var S=x[J],y=0,c=P-1;(S!==0||y<H)&&c!==-1;c--,y++)S+=256*E[c]>>>0,E[c]=S%f>>>0,S=S/f>>>0;if(S!==0)throw new Error("Non-zero carry");H=y,J++}for(var v=P-H;v!==P&&E[v]===0;)v++;for(var k=g.repeat(j);v<P;++v)k+=i.charAt(E[v]);return k}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var j=0;if(x[j]!==" "){for(var H=0,J=0;x[j]===g;)H++,j++;for(var A=(x.length-j)*_+1>>>0,P=new Uint8Array(A);x[j];){var E=t[x.charCodeAt(j)];if(E===255)return;for(var S=0,y=A-1;(E!==0||S<J)&&y!==-1;y--,S++)E+=f*P[y]>>>0,P[y]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");J=S,j++}if(x[j]!==" "){for(var c=A-J;c!==A&&P[c]===0;)c++;for(var v=new Uint8Array(H+(A-c)),k=H;c!==A;)v[k++]=P[c++];return v}}}function N(x){var j=R(x);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:R,decode:N}}var c6=u6,h6=c6;const Yp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},l6=i=>new TextEncoder().encode(i),f6=i=>new TextDecoder().decode(i);class d6{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class p6{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Jp(this,e)}}class g6{constructor(e){this.decoders=e}or(e){return Jp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jp=(i,e)=>new g6({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class D6{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new d6(e,t,s),this.decoder=new p6(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const aa=({name:i,prefix:e,encode:t,decode:s})=>new D6(i,e,t,s),Is=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=h6(t,e);return aa({prefix:i,name:e,encode:s,decode:u=>Yp(o(u))})},v6=(i,e,t,s)=>{const o={};for(let w=0;w<e.length;++w)o[e[w]]=w;let u=i.length;for(;i[u-1]==="=";)--u;const d=new Uint8Array(u*t/8|0);let f=0,g=0,_=0;for(let w=0;w<u;++w){const T=o[i[w]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<t|T,f+=t,f>=8&&(f-=8,d[_++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return d},y6=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let u="",d=0,f=0;for(let g=0;g<i.length;++g)for(f=f<<8|i[g],d+=8;d>t;)d-=t,u+=e[o&f>>d];if(d&&(u+=e[o&f<<t-d]),s)for(;u.length*t&7;)u+="=";return u},Zt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>aa({prefix:e,name:i,encode(o){return y6(o,s,t)},decode(o){return v6(o,s,t,i)}}),b6=aa({prefix:"\0",name:"identity",encode:i=>f6(i),decode:i=>l6(i)});var _6=Object.freeze({__proto__:null,identity:b6});const m6=Zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var w6=Object.freeze({__proto__:null,base2:m6});const E6=Zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var C6=Object.freeze({__proto__:null,base8:E6});const S6=Is({prefix:"9",name:"base10",alphabet:"0123456789"});var x6=Object.freeze({__proto__:null,base10:S6});const I6=Zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A6=Zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var O6=Object.freeze({__proto__:null,base16:I6,base16upper:A6});const P6=Zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),T6=Zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N6=Zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F6=Zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),R6=Zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$6=Zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U6=Zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),L6=Zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M6=Zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var j6=Object.freeze({__proto__:null,base32:P6,base32upper:T6,base32pad:N6,base32padupper:F6,base32hex:R6,base32hexupper:$6,base32hexpad:U6,base32hexpadupper:L6,base32z:M6});const B6=Is({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z6=Is({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var q6=Object.freeze({__proto__:null,base36:B6,base36upper:z6});const H6=Is({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),K6=Is({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var k6=Object.freeze({__proto__:null,base58btc:H6,base58flickr:K6});const V6=Zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),G6=Zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W6=Zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y6=Zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var J6=Object.freeze({__proto__:null,base64:V6,base64pad:G6,base64url:W6,base64urlpad:Y6});const Xp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),X6=Xp.reduce((i,e,t)=>(i[t]=e,i),[]),Q6=Xp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Z6(i){return i.reduce((e,t)=>(e+=X6[t],e),"")}function e5(i){const e=[];for(const t of i){const s=Q6[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const t5=aa({prefix:"ðŸš€",name:"base256emoji",encode:Z6,decode:e5});var r5=Object.freeze({__proto__:null,base256emoji:t5}),i5=Qp,nd=128,n5=127,s5=~n5,o5=Math.pow(2,31);function Qp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=o5;)e[t++]=i&255|nd,i/=128;for(;i&s5;)e[t++]=i&255|nd,i>>>=7;return e[t]=i|0,Qp.bytes=t-s+1,e}var a5=pc,u5=128,sd=127;function pc(i,s){var t=0,s=s||0,o=0,u=s,d,f=i.length;do{if(u>=f)throw pc.bytes=0,new RangeError("Could not decode varint");d=i[u++],t+=o<28?(d&sd)<<o:(d&sd)*Math.pow(2,o),o+=7}while(d>=u5);return pc.bytes=u-s,t}var c5=Math.pow(2,7),h5=Math.pow(2,14),l5=Math.pow(2,21),f5=Math.pow(2,28),d5=Math.pow(2,35),p5=Math.pow(2,42),g5=Math.pow(2,49),D5=Math.pow(2,56),v5=Math.pow(2,63),y5=function(i){return i<c5?1:i<h5?2:i<l5?3:i<f5?4:i<d5?5:i<p5?6:i<g5?7:i<D5?8:i<v5?9:10},b5={encode:i5,decode:a5,encodingLength:y5},Zp=b5;const od=(i,e,t=0)=>(Zp.encode(i,e,t),e),ad=i=>Zp.encodingLength(i),gc=(i,e)=>{const t=e.byteLength,s=ad(i),o=s+ad(t),u=new Uint8Array(o+t);return od(i,u,0),od(t,u,s),u.set(e,o),new _5(i,t,e,u)};class _5{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const eg=({name:i,code:e,encode:t})=>new m5(i,e,t);class m5{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?gc(this.code,t):t.then(s=>gc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const tg=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),w5=eg({name:"sha2-256",code:18,encode:tg("SHA-256")}),E5=eg({name:"sha2-512",code:19,encode:tg("SHA-512")});var C5=Object.freeze({__proto__:null,sha256:w5,sha512:E5});const rg=0,S5="identity",ig=Yp,x5=i=>gc(rg,ig(i)),I5={code:rg,name:S5,encode:ig,digest:x5};var A5=Object.freeze({__proto__:null,identity:I5});new TextEncoder,new TextDecoder;const ud={..._6,...w6,...C6,...x6,...O6,...j6,...q6,...k6,...J6,...r5};({...C5,...A5});function ng(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function O5(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ng(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function sg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const cd=sg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Vu=sg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=O5(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),P5={utf8:cd,"utf-8":cd,hex:ud.base16,latin1:Vu,ascii:Vu,binary:Vu,...ud};function T5(i,e="utf8"){const t=P5[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ng(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const og="wc",N5=2,Kc="core",$i=`${og}@2:${Kc}:`,F5={name:Kc,logger:"error"},R5={database:":memory:"},$5="crypto",hd="client_ed25519_seed",U5=ve.ONE_DAY,L5="keychain",M5="0.3",j5="messages",B5="0.3",z5=ve.SIX_HOURS,q5="publisher",ag="irn",H5="error",ug="wss://relay.walletconnect.com",ld="wss://relay.walletconnect.org",K5="relayer",Ot={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},k5="_subscription",ls={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},V5=ve.ONE_SECOND/2,G5="2.9.0",W5=1e4,Y5="0.3",J5="WALLETCONNECT_CLIENT_ID",si={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},X5="subscription",Q5="0.3",Z5=ve.FIVE_SECONDS*1e3,eC="pairing",tC="0.3",fs={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},rC="history",iC="0.3",nC="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},sC="0.3",Gu="verify-api",fd="https://verify.walletconnect.com";class oC{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=L5,this.version=M5,this.initialized=!1,this.storagePrefix=$i,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:u}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(u)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,_p(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class aC{constructor(e,t,s){this.core=e,this.logger=t,this.name=$5,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),u=Wf(o);return Mp(u.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=kw();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const u=await this.getClientSeed(),d=Wf(u),f=fc();return await M8(f,o,U5,d)},this.generateSharedKey=(o,u,d)=>{this.isInitialized();const f=this.getPrivateKey(o),g=Vw(f,u);return this.setSymKey(g,d)},this.setSymKey=async(o,u)=>{this.isInitialized();const d=u||Gw(o);return await this.keychain.set(d,o),d},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,u,d)=>{this.isInitialized();const f=yp(d),g=_s(u);if(mf(f)){const R=f.senderPublicKey,N=f.receiverPublicKey;o=await this.generateSharedKey(R,N)}const _=this.getSymKey(o),{type:w,senderPublicKey:T}=f;return Yw({type:w,symKey:_,message:g,senderPublicKey:T})},this.decode=async(o,u,d)=>{this.isInitialized();const f=Qw(u,d);if(mf(f)){const w=f.receiverPublicKey,T=f.senderPublicKey;o=await this.generateSharedKey(w,T)}const g=this.getSymKey(o),_=Jw({symKey:g,encoded:u});return $c(_)},this.getPayloadType=o=>{const u=qo(o);return Es(u.type)},this.getPayloadSenderPublicKey=o=>{const u=qo(o);return u.senderPublicKey?M2(u.senderPublicKey,lr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=s||new oC(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(hd)}catch{e=fc(),await this.keychain.set(hd,e)}return T5(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class uC extends vE{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=j5,this.version=B5,this.initialized=!1,this.storagePrefix=$i,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const u=Fn(o);let d=this.messages.get(s);return typeof d>"u"&&(d={}),typeof d[u]<"u"||(d[u]=o,this.messages.set(s,d),await this.persist()),u},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const u=this.get(s),d=Fn(o);return typeof u[d]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,_p(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class cC extends yE{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new xr.EventEmitter,this.name=q5,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.queueTimeout=ve.toMiliseconds(ve.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,u)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:u}});try{const d=(u==null?void 0:u.ttl)||z5,f=dc(u),g=(u==null?void 0:u.prompt)||!1,_=(u==null?void 0:u.tag)||0,w=(u==null?void 0:u.id)||zc().toString(),T={topic:s,message:o,opts:{ttl:d,relay:f,prompt:g,tag:_,id:w}},R=setTimeout(()=>this.queue.set(w,T),this.queueTimeout);try{await await Ho(this.rpcPublish(s,o,d,f,g,_,w),this.publishTimeout),clearTimeout(R),this.relayer.events.emit(Ot.publish,T)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:u}})}catch(d){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(d),d}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,u,d,f){var g,_,w,T;const R={method:Lo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:u,tag:d},id:f};return hr((g=R.params)==null?void 0:g.prompt)&&((_=R.params)==null||delete _.prompt),hr((w=R.params)==null?void 0:w.tag)&&((T=R.params)==null||delete T.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:R}),this.relayer.request(R)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Mn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ot.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ot.message_ack,e=>{this.onPublish(e.id.toString())})}}class hC{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(u=>u!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var lC=Object.defineProperty,fC=Object.defineProperties,dC=Object.getOwnPropertyDescriptors,dd=Object.getOwnPropertySymbols,pC=Object.prototype.hasOwnProperty,gC=Object.prototype.propertyIsEnumerable,pd=(i,e,t)=>e in i?lC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ds=(i,e)=>{for(var t in e||(e={}))pC.call(e,t)&&pd(i,t,e[t]);if(dd)for(var t of dd(e))gC.call(e,t)&&pd(i,t,e[t]);return i},Wu=(i,e)=>fC(i,dC(e));class DC extends mE{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new hC,this.events=new xr.EventEmitter,this.name=X5,this.version=Q5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=$i,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const u=dc(o),d={topic:s,relay:u};this.pending.set(s,d);const f=await this.rpcSubscribe(s,u);return this.onSubscribe(f,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(u){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(u),u}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,u)=>{const d=new ve.Watch;d.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),d.stop(this.pendingSubscriptionWatchLabel),o(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=Z5&&(clearInterval(f),d.stop(this.pendingSubscriptionWatchLabel),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=dc(s);await this.rpcUnsubscribe(e,t,o);const u=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,u),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Lo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ho(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ot.connection_stalled)}return Fn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Lo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ho(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ot.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Lo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Wu(ds({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ds({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ds({},t)),this.topicMap.set(t.topic,e),this.events.emit(si.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(si.deleted,Wu(ds({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(si.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(si.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);oi(t)&&this.onBatchSubscribe(t.map((s,o)=>Wu(ds({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Mn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ot.connect,async()=>{await this.onConnect()}),this.relayer.on(Ot.disconnect,()=>{this.onDisconnect()}),this.events.on(si.created,async e=>{const t=si.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(si.deleted,async e=>{const t=si.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var vC=Object.defineProperty,gd=Object.getOwnPropertySymbols,yC=Object.prototype.hasOwnProperty,bC=Object.prototype.propertyIsEnumerable,Dd=(i,e,t)=>e in i?vC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_C=(i,e)=>{for(var t in e||(e={}))yC.call(e,t)&&Dd(i,t,e[t]);if(gd)for(var t of gd(e))bC.call(e,t)&&Dd(i,t,e[t]);return i};class mC extends bE{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new xr.EventEmitter,this.name=K5,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||H5})),this.messages=new uC(this.logger,e.core),this.subscriber=new DC(this,this.logger),this.publisher=new cC(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||ug,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ld}...`),await this.restartTransport(ld)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},W5)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(u=>{this.subscriber.once(si.created,d=>{d.topic===e&&u()})}),new Promise(async u=>{o=await this.subscriber.subscribe(e,t),u()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ot.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(si.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Ho(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Ot.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Ot.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Ot.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(ls.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Li(new s6(c3({sdkVersion:G5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Hc(e)){if(!e.method.endsWith(k5))return;const t=e.params,{topic:s,message:o,publishedAt:u}=t.data,d={topic:s,message:o,publishedAt:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(_C({type:"event",event:t.id},d)),this.events.emit(t.id,d),await this.acknowledgePayload(e),await this.onMessageEvent(d)}else oa(e)&&this.events.emit(Ot.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ot.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=qc(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(ls.payload,e=>this.onProviderPayload(e)),this.provider.on(ls.connect,()=>{this.events.emit(Ot.connect)}),this.provider.on(ls.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ls.error,e=>{this.logger.error(e),this.events.emit(Ot.error,e)})}registerEventListeners(){this.events.on(Ot.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ot.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(V5))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var wC=Object.defineProperty,vd=Object.getOwnPropertySymbols,EC=Object.prototype.hasOwnProperty,CC=Object.prototype.propertyIsEnumerable,yd=(i,e,t)=>e in i?wC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,bd=(i,e)=>{for(var t in e||(e={}))EC.call(e,t)&&yd(i,t,e[t]);if(vd)for(var t of vd(e))CC.call(e,t)&&yd(i,t,e[t]);return i};class ua extends _E{constructor(e,t,s,o=$i,u=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=Y5,this.cached=[],this.initialized=!1,this.storagePrefix=$i,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(d=>{this.getKey&&d!==null&&!hr(d)?this.map.set(this.getKey(d),d):N3(d)?this.map.set(d.id,d):F3(d)&&this.map.set(d.topic,d)}),this.cached=[],this.initialized=!0)},this.set=async(d,f)=>{this.isInitialized(),this.map.has(d)?await this.update(d,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:d,value:f}),this.map.set(d,f),await this.persist())},this.get=d=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:d}),this.getData(d)),this.getAll=d=>(this.isInitialized(),d?this.values.filter(f=>Object.keys(d).every(g=>a6(f[g],d[g]))):this.values),this.update=async(d,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:d,update:f});const g=bd(bd({},this.getData(d)),f);this.map.set(d,g),await this.persist()},this.delete=async(d,f)=>{this.isInitialized(),this.map.has(d)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:d,reason:f}),this.map.delete(d),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=u}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class SC{constructor(e,t){this.core=e,this.logger=t,this.name=eC,this.version=tC,this.events=new mc,this.initialized=!1,this.storagePrefix=$i,this.ignoredPayloadTypes=[on],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=fc(),o=await this.core.crypto.setSymKey(s),u=Gr(ve.FIVE_MINUTES),d={protocol:ag},f={topic:o,expiry:u,relay:d,active:!1},g=w3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:d});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,u),{topic:o,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:u,relay:d}=b3(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const f=Gr(ve.FIVE_MINUTES),g={topic:o,relay:d,expiry:f,active:!1};return await this.pairings.set(o,g),await this.core.crypto.setSymKey(u,o),await this.core.relayer.subscribe(o,{relay:d}),this.core.expirer.set(o,f),s.activatePairing&&await this.activate({topic:o}),g},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const u=await this.sendRequest(o,"wc_pairingPing",{}),{done:d,resolve:f,reject:g}=Pn();this.events.once(Ht("pairing_ping",u),({error:_})=>{_?g(_):f()}),await d()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,u)=>{const d=na(o,u),f=await this.core.crypto.encode(s,d),g=fs[o].req;return this.core.history.set(s,d),this.core.relayer.publish(s,f,g),d.id},this.sendResult=async(s,o,u)=>{const d=qc(s,u),f=await this.core.crypto.encode(o,d),g=await this.core.history.get(o,s),_=fs[g.request.method].res;await this.core.relayer.publish(o,f,_),await this.core.history.resolve(d)},this.sendError=async(s,o,u)=>{const d=sa(s,u),f=await this.core.crypto.encode(o,d),g=await this.core.history.get(o,s),_=fs[g.request.method]?fs[g.request.method].res:fs.unregistered_method.res;await this.core.relayer.publish(o,f,_),await this.core.history.resolve(d)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Fi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:u}=s,d=u.method;if(this.pairings.keys.includes(o))switch(d){case"wc_pairingPing":return this.onPairingPingRequest(o,u);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,u);default:return this.onUnknownRpcMethodRequest(o,u)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:u}=s,d=(await this.core.history.get(o,u.id)).request.method;if(this.pairings.keys.includes(o))switch(d){case"wc_pairingPing":return this.onPairingPingResponse(o,u);default:return this.onUnknownRpcMethodResponse(d)}},this.onPairingPingRequest=async(s,o)=>{const{id:u}=o;try{this.isValidPing({topic:s}),await this.sendResult(u,s,!0),this.events.emit("pairing_ping",{id:u,topic:s})}catch(d){await this.sendError(u,s,d),this.logger.error(d)}},this.onPairingPingResponse=(s,o)=>{const{id:u}=o;setTimeout(()=>{mi(o)?this.events.emit(Ht("pairing_ping",u),{}):Wr(o)&&this.events.emit(Ht("pairing_ping",u),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:u}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:u,topic:s})}catch(d){await this.sendError(u,s,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:u,method:d}=o;try{if(this.registeredMethods.includes(d))return;const f=Rt("WC_METHOD_UNSUPPORTED",d);await this.sendError(u,s,f),this.logger.error(f)}catch(f){await this.sendError(u,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!yr(s)){const{message:o}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!T3(s.uri)){const{message:o}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!yr(s)){const{message:u}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(u)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!yr(s)){const{message:u}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(u)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Fi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new ua(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ot.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);Hc(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):oa(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:t}=Ep(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class xC extends DE{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new xr.EventEmitter,this.name=rC,this.version=iC,this.cached=[],this.initialized=!1,this.storagePrefix=$i,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,u)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:u}),this.records.has(o.id))return;const d={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:u,expiry:Gr(ve.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(ni.created,d)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Wr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ni.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(u=>{if(u.topic===s){if(typeof o<"u"&&u.id!==o)return;this.records.delete(u.id),this.events.emit(ni.deleted,u)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:na(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.updated,e=>{const t=ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.deleted,e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Mn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class IC extends wE{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new xr.EventEmitter,this.name=nC,this.version=sC,this.cached=[],this.initialized=!1,this.storagePrefix=$i,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const u=this.formatTarget(s),d={target:u,expiry:o};this.expirations.set(u,d),this.checkExpiry(u,d),this.events.emit(Mr.created,{target:u,expiration:d})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),u=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Mr.deleted,{target:o,expiration:u})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return h3(e);if(typeof e=="number")return l3(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Mn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const t=Mr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const t=Mr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const t=Mr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class AC extends EE{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Gu,this.initialized=!1,this.init=async s=>{bp()||!Tc()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||fd,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const u=this.startAbortTimer(ve.FIVE_SECONDS),d=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(u),d.status===200?(o=await d.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Gu))return s();const u=document.createElement("iframe");u.setAttribute("id",Gu),u.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),u.style.display="none",u.addEventListener("load",()=>{this.initialized=!0,s()}),u.addEventListener("error",d=>{o(d)}),document.body.append(u),this.iframe=u}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=fd,this.abortController=new AbortController,this.isDevEnv=Pc()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var OC=Object.defineProperty,_d=Object.getOwnPropertySymbols,PC=Object.prototype.hasOwnProperty,TC=Object.prototype.propertyIsEnumerable,md=(i,e,t)=>e in i?OC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,wd=(i,e)=>{for(var t in e||(e={}))PC.call(e,t)&&md(i,t,e[t]);if(_d)for(var t of _d(e))TC.call(e,t)&&md(i,t,e[t]);return i};class kc extends gE{constructor(e){super(e),this.protocol=og,this.version=N5,this.name=Kc,this.events=new xr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ug;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||F5.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new Mn.HeartBeat,this.crypto=new aC(this,this.logger,e==null?void 0:e.keychain),this.history=new xC(this,this.logger),this.expirer=new IC(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new oE(wd(wd({},R5),e==null?void 0:e.storageOptions)),this.relayer=new mC({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new SC(this,this.logger),this.verify=new AC(this.projectId||"",this.logger)}static async init(e){const t=new kc(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(J5,s),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const NC=kc,cg="wc",hg=2,lg="client",Vc=`${cg}@${hg}:${lg}:`,Yu={name:lg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},FC="WALLETCONNECT_DEEPLINK_CHOICE",RC="proposal",fg="Proposal expired",$C="session",Fo=ve.SEVEN_DAYS,UC="engine",ps={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ju={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},LC="request",MC=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var jC=Object.defineProperty,BC=Object.defineProperties,zC=Object.getOwnPropertyDescriptors,Ed=Object.getOwnPropertySymbols,qC=Object.prototype.hasOwnProperty,HC=Object.prototype.propertyIsEnumerable,Cd=(i,e,t)=>e in i?jC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Lr=(i,e)=>{for(var t in e||(e={}))qC.call(e,t)&&Cd(i,t,e[t]);if(Ed)for(var t of Ed(e))HC.call(e,t)&&Cd(i,t,e[t]);return i},Xu=(i,e)=>BC(i,zC(e));class KC extends SE{constructor(e){super(e),this.name=UC,this.events=new mc,this.initialized=!1,this.ignoredPayloadTypes=[on],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ps)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=Xu(Lr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:u,optionalNamespaces:d,sessionProperties:f,relays:g}=s;let _=o,w,T=!1;if(_&&(T=this.client.core.pairing.pairings.get(_).active),!_||!T){const{topic:P,uri:E}=await this.client.core.pairing.create();_=P,w=E}const R=await this.client.core.crypto.generateKeyPair(),N=Lr({requiredNamespaces:u,optionalNamespaces:d,relays:g??[{protocol:ag}],proposer:{publicKey:R,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:x,resolve:j,done:H}=Pn(ve.FIVE_MINUTES,fg);if(this.events.once(Ht("session_connect"),async({error:P,session:E})=>{if(P)x(P);else if(E){E.self.publicKey=R;const S=Xu(Lr({},E),{requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces});await this.client.session.set(E.topic,S),await this.setExpiry(E.topic,E.expiry),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:E.peer.metadata}),j(S)}}),!_){const{message:P}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${_}`);throw new Error(P)}const J=await this.sendRequest(_,"wc_sessionPropose",N),A=Gr(ve.FIVE_MINUTES);return await this.setProposal(J,Lr({id:J,expiry:A},N)),{uri:w,approval:H}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:u,sessionProperties:d}=t,f=this.client.proposal.get(s);let{pairingTopic:g,proposer:_,requiredNamespaces:w,optionalNamespaces:T}=f;g=g||"",Rn(w)||(w=x3(u,"approve()"));const R=await this.client.core.crypto.generateKeyPair(),N=_.publicKey,x=await this.client.core.crypto.generateSharedKey(R,N);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:_.metadata}),await this.sendResult(s,g,{relay:{protocol:o??"irn"},responderPublicKey:R}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const j=Lr({relay:{protocol:o??"irn"},namespaces:u,requiredNamespaces:w,optionalNamespaces:T,pairingTopic:g,controller:{publicKey:R,metadata:this.client.metadata},expiry:Gr(Fo)},d&&{sessionProperties:d});await this.client.core.relayer.subscribe(x),await this.sendRequest(x,"wc_sessionSettle",j);const H=Xu(Lr({},j),{topic:x,pairingTopic:g,acknowledged:!1,self:j.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:R});return await this.client.session.set(x,H),await this.setExpiry(x,Gr(Fo)),{topic:x,acknowledged:()=>new Promise(J=>setTimeout(()=>J(this.client.session.get(x)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:u}=this.client.proposal.get(s);u&&(await this.sendError(s,u,o),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,u=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:d,resolve:f,reject:g}=Pn();return this.events.once(Ht("session_update",u),({error:_})=>{_?g(_):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:d}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:u,resolve:d,reject:f}=Pn();return this.events.once(Ht("session_extend",o),({error:g})=>{g?f(g):d()}),await this.setExpiry(s,Gr(Fo)),{acknowledged:u}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:u,expiry:d}=t,f=await this.sendRequest(u,"wc_sessionRequest",{request:o,chainId:s},d),{done:g,resolve:_,reject:w}=Pn(d);this.events.once(Ht("session_request",f),({error:R,result:N})=>{R?w(R):_(N)}),this.client.events.emit("session_request_sent",{topic:u,request:o,chainId:s,id:f});const T=await this.client.core.storage.getItem(FC);return f3({id:f,topic:u,wcDeepLink:T}),await g()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:u}=o;mi(o)?await this.sendResult(u,s,o.result):Wr(o)&&await this.sendError(u,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:u,resolve:d,reject:f}=Pn();this.events.once(Ht("session_ping",o),({error:g})=>{g?f(g):d()}),await u()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:u}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:u})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=zc().toString();let u;const d=f=>{(f==null?void 0:f.id.toString())===o&&(this.client.core.relayer.events.removeListener(Ot.message_ack,d),u())};await Promise.all([new Promise(f=>{u=f,this.client.core.relayer.on(Ot.message_ack,d)}),this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>O3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(u=>{var d,f;return((d=u.peerMetadata)==null?void 0:d.url)&&((f=u.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&u.topic&&u.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(u=>this.client.core.pairing.disconnect({topic:u.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ps.wc_sessionRequest.req.ttl,{id:o,topic:u,params:d}=t;await this.client.pendingRequest.set(o,{id:o,topic:u,params:d}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async(t,s,o,u,d)=>{const f=na(s,o);if(Tc()&&MC.includes(s)){const w=Fn(JSON.stringify(f));await this.client.core.verify.register({attestationId:w})}const g=await this.client.core.crypto.encode(t,f),_=ps[s].req;return u&&(_.ttl=u),d&&(_.id=d),this.client.core.history.set(t,f),this.client.core.relayer.publish(t,g,_),f.id},this.sendResult=async(t,s,o)=>{const u=qc(t,o),d=await this.client.core.crypto.encode(s,u),f=await this.client.core.history.get(s,t),g=ps[f.request.method].res;this.client.core.relayer.publish(s,d,g),await this.client.core.history.resolve(u)},this.sendError=async(t,s,o)=>{const u=sa(t,o),d=await this.client.core.crypto.encode(s,u),f=await this.client.core.history.get(s,t),g=ps[f.request.method].res;this.client.core.relayer.publish(s,d,g),await this.client.core.history.resolve(u)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Fi(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Fi(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,u=o.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,u=(await this.client.core.history.get(s,o.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${u}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:u}=s;try{this.isValidConnect(Lr({},s.params));const d=Gr(ve.FIVE_MINUTES),f=Lr({id:u,pairingTopic:t,expiry:d},o);await this.setProposal(u,f);const g=Fn(JSON.stringify(s)),_=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:u,params:f,verifyContext:_})}catch(d){await this.sendError(u,t,d),this.client.logger.error(d)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(mi(s)){const{result:u}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});const d=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:d});const f=d.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const _=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:_});const w=await this.client.core.relayer.subscribe(_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:w}),await this.client.core.pairing.activate({topic:t})}else Wr(s)&&(await this.client.proposal.delete(o,Rt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:u}=s;try{this.isValidSessionSettleRequest(u);const{relay:d,controller:f,expiry:g,namespaces:_,requiredNamespaces:w,optionalNamespaces:T,sessionProperties:R,pairingTopic:N}=s.params,x=Lr({topic:t,relay:d,expiry:g,namespaces:_,acknowledged:!0,pairingTopic:N,requiredNamespaces:w,optionalNamespaces:T,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},R&&{sessionProperties:R});await this.sendResult(s.id,t,!0),this.events.emit(Ht("session_connect"),{session:x}),this.cleanupDuplicatePairings(x)}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;mi(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",o),{})):Wr(s)&&(await this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:u}=s;try{this.isValidUpdate(Lr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(u,t,!0),this.client.events.emit("session_update",{id:u,topic:t,params:o})}catch(d){await this.sendError(u,t,d),this.client.logger.error(d)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(Ht("session_update",o),{}):Wr(s)&&this.events.emit(Ht("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(Fo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(Ht("session_extend",o),{}):Wr(s)&&this.events.emit(Ht("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{mi(s)?this.events.emit(Ht("session_ping",o),{}):Wr(s)&&this.events.emit(Ht("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(u=>{this.client.core.relayer.once(Ot.publish,async()=>{u(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(u){this.client.logger.error(u)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:u}=s;try{this.isValidRequest(Lr({topic:t},u)),await this.setPendingSessionRequest({id:o,topic:t,params:u});const d=Fn(JSON.stringify(s)),f=this.client.session.get(t),g=await this.getVerifyContext(d,f.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:u,verifyContext:g})}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(Ht("session_request",o),{result:s.result}):Wr(s)&&this.events.emit(Ht("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:u}=s;try{this.isValidEmit(Lr({topic:t},u)),this.client.events.emit("session_event",{id:o,topic:t,params:u})}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.isValidConnect=async t=>{if(!yr(t)){const{message:g}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:d,relays:f}=t;if(hr(s)||await this.isValidPairingTopic(s),!z3(f,!0)){const{message:g}=ce("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!hr(o)&&Rn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!hr(u)&&Rn(u)!==0&&this.validateNamespaces(u,"optionalNamespaces"),hr(d)||this.validateSessionProps(d,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=B3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!yr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:u,sessionProperties:d}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),g=jo(o,"approve()");if(g)throw new Error(g.message);const _=Of(f.requiredNamespaces,o,"approve()");if(_)throw new Error(_.message);if(!Wt(u,!0)){const{message:w}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${u}`);throw new Error(w)}hr(d)||this.validateSessionProps(d,"sessionProperties")},this.isValidReject=async t=>{if(!yr(t)){const{message:u}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(u)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!H3(o)){const{message:u}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidSessionSettleRequest=t=>{if(!yr(t)){const{message:_}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(_)}const{relay:s,controller:o,namespaces:u,expiry:d}=t;if(!Sp(s)){const{message:_}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(_)}const f=R3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=jo(u,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Fi(d)){const{message:_}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(_)}},this.isValidUpdate=async t=>{if(!yr(t)){const{message:g}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(g)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const u=this.client.session.get(s),d=jo(o,"update()");if(d)throw new Error(d.message);const f=Of(u.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!yr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!yr(t)){const{message:g}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(g)}const{topic:s,request:o,chainId:u,expiry:d}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Af(f,u)){const{message:g}=ce("MISSING_OR_INVALID",`request() chainId: ${u}`);throw new Error(g)}if(!K3(o)){const{message:g}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!G3(f,u,o.method)){const{message:g}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(d&&!X3(d,Ju)){const{message:g}=ce("MISSING_OR_INVALID",`request() expiry: ${d}. Expiry must be a number (in seconds) between ${Ju.min} and ${Ju.max}`);throw new Error(g)}},this.isValidRespond=async t=>{if(!yr(t)){const{message:u}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(u)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!k3(o)){const{message:u}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidPing=async t=>{if(!yr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!yr(t)){const{message:f}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:u}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Af(d,u)){const{message:f}=ce("MISSING_OR_INVALID",`emit() chainId: ${u}`);throw new Error(f)}if(!V3(o)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!W3(d,u,o.name)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!yr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const u=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});u&&(o.verified.origin=u,o.verified.validation=u===s.url?"VALID":"INVALID")}catch(u){this.client.logger.error(u)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Wt(o,!1)){const{message:u}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(u)}})}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ot.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);Hc(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):oa(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:t,id:s}=Ep(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Wt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Wt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Wt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!q3(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Fi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class kC extends ua{constructor(e,t){super(e,t,RC,Vc),this.core=e,this.logger=t}}class VC extends ua{constructor(e,t){super(e,t,$C,Vc),this.core=e,this.logger=t}}class GC extends ua{constructor(e,t){super(e,t,LC,Vc,s=>s.id),this.core=e,this.logger=t}}let WC=class dg extends CE{constructor(e){super(e),this.protocol=cg,this.version=hg,this.name=Yu.name,this.events=new xr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Yu.name,this.metadata=(e==null?void 0:e.metadata)||s3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Yu.logger}));this.core=(e==null?void 0:e.core)||new NC(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new VC(this.core,this.logger),this.proposal=new kC(this.core,this.logger),this.pendingRequest=new GC(this.core,this.logger),this.engine=new KC(this)}static async init(e){const t=new dg(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const YC={Accept:"application/json","Content-Type":"application/json"},JC="POST",Sd={headers:YC,method:JC},xd=10;class un{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new xr.EventEmitter,this.isAvailable=!1,this.registering=!1,!ed(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=_s(e),u=await(await Wl(this.url,Object.assign(Object.assign({},Sd),{body:s}))).json();this.onPayload({data:u})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!ed(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=_s({id:1,jsonrpc:"2.0",method:"test",params:[]});await Wl(e,Object.assign(Object.assign({},Sd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$c(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),u=sa(e,o);this.events.emit("payload",u)}parseError(e,t=this.url){return Kp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>xd&&this.events.setMaxListeners(xd)}}const Id="error",XC="wss://relay.walletconnect.com",QC="wc",ZC="universal_provider",Ad=`${QC}@2:${ZC}:`,eS="https://rpc.walletconnect.com/v1",Mi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",_=500,w="__lodash_placeholder__",T=1,R=2,N=4,x=1,j=2,H=1,J=2,A=4,P=8,E=16,S=32,y=64,c=128,v=256,k=512,G=30,oe="...",ue=800,ge=16,$=1,q=2,le=3,re=1/0,W=9007199254740991,te=17976931348623157e292,Y=0/0,ie=4294967295,xe=ie-1,ne=ie>>>1,_e=[["ary",c],["bind",H],["bindKey",J],["curry",P],["curryRight",E],["flip",k],["partial",S],["partialRight",y],["rearg",v]],he="[object Arguments]",ye="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",l="[object DOMException]",I="[object Error]",se="[object Function]",fe="[object GeneratorFunction]",Ce="[object Map]",qe="[object Number]",ke="[object Null]",Le="[object Object]",gt="[object Promise]",Dt="[object Proxy]",je="[object RegExp]",Se="[object Set]",Fe="[object String]",Re="[object Symbol]",Be="[object Undefined]",Ae="[object WeakMap]",$e="[object WeakSet]",Ee="[object ArrayBuffer]",Oe="[object DataView]",He="[object Float32Array]",Ie="[object Float64Array]",Ve="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",ir="[object Uint16Array]",fr="[object Uint32Array]",Xr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wi=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,wt=RegExp(wi.source),vt=RegExp(ji.source),Et=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(St.source),xt=/^\s+/,Pt=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ca=/[()=,{}\[\]\/\s]/,ha=/\\(\\)?/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,fa=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,pa=/^\[object .+?Constructor\]$/,ga=/^0o[0-7]+$/i,Da=/^(?:0|[1-9]\d*)$/,ui=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cn=/($^)/,va=/['\n\r\u2028\u2029\\]/g,hn="\\ud800-\\udfff",ya="\\u0300-\\u036f",ba="\\ufe20-\\ufe2f",ln="\\u20d0-\\u20ff",As=ya+ba+ln,Os="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",_a="\\xac\\xb1\\xd7\\xf7",ma="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wa="\\u2000-\\u206f",Ea=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ps="A-Z\\xc0-\\xd6\\xd8-\\xde",Ts="\\ufe0e\\ufe0f",Bi=_a+ma+wa+Ea,jn="['â€™]",zi="["+hn+"]",Bn="["+Bi+"]",qi="["+As+"]",Ns="\\d+",Ca="["+Os+"]",Fs="["+zr+"]",Rs="[^"+hn+Bi+Ns+Os+zr+Ps+"]",fn="\\ud83c[\\udffb-\\udfff]",Sa="(?:"+qi+"|"+fn+")",$s="[^"+hn+"]",dn="(?:\\ud83c[\\udde6-\\uddff]){2}",Ei="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Ps+"]",Us="\\u200d",Ls="(?:"+Fs+"|"+Rs+")",Qr="(?:"+br+"|"+Rs+")",Ms="(?:"+jn+"(?:d|ll|m|re|s|t|ve))?",js="(?:"+jn+"(?:D|LL|M|RE|S|T|VE))?",Bs=Sa+"?",zs="["+Ts+"]?",xa="(?:"+Us+"(?:"+[$s,dn,Ei].join("|")+")"+zs+Bs+")*",ci="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hs=zs+Bs+xa,pn="(?:"+[Ca,dn,Ei].join("|")+")"+Hs,Ia="(?:"+[$s+qi+"?",qi,dn,Ei,zi].join("|")+")",zn=RegExp(jn,"g"),Aa=RegExp(qi,"g"),gn=RegExp(fn+"(?="+fn+")|"+Ia+Hs,"g"),Ks=RegExp([br+"?"+Fs+"+"+Ms+"(?="+[Bn,br,"$"].join("|")+")",Qr+"+"+js+"(?="+[Bn,br+Ls,"$"].join("|")+")",br+"?"+Ls+"+"+Ms,br+"+"+js,qs,ci,Ns,pn].join("|"),"g"),ks=RegExp("["+Us+hn+As+Ts+"]"),Hi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Oa=-1,at={};at[He]=at[Ie]=at[Ve]=at[We]=at[et]=at[tt]=at[Je]=at[ir]=at[fr]=!0,at[he]=at[ye]=at[Ee]=at[B]=at[Oe]=at[F]=at[I]=at[se]=at[Ce]=at[qe]=at[Le]=at[je]=at[Se]=at[Fe]=at[Ae]=!1;var st={};st[he]=st[ye]=st[Ee]=st[Oe]=st[B]=st[F]=st[He]=st[Ie]=st[Ve]=st[We]=st[et]=st[Ce]=st[qe]=st[Le]=st[je]=st[Se]=st[Fe]=st[Re]=st[tt]=st[Je]=st[ir]=st[fr]=!0,st[I]=st[se]=st[Ae]=!1;var m={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},de={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,Te=parseInt,dt=typeof gs=="object"&&gs&&gs.Object===Object&&gs,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||zt||Function("return this")(),ct=e&&!e.nodeType&&e,Tt=ct&&!0&&i&&!i.nodeType&&i,dr=Tt&&Tt.exports===ct,qt=dr&&dt.process,pt=function(){try{var L=Tt&&Tt.require&&Tt.require("util").types;return L||qt&&qt.binding&&qt.binding("util")}catch{}}(),sr=pt&&pt.isArrayBuffer,qr=pt&&pt.isDate,Or=pt&&pt.isMap,Zr=pt&&pt.isRegExp,qn=pt&&pt.isSet,Ki=pt&&pt.isTypedArray;function Vt(L,V,K){switch(K.length){case 0:return L.call(V);case 1:return L.call(V,K[0]);case 2:return L.call(V,K[0],K[1]);case 3:return L.call(V,K[0],K[1],K[2])}return L.apply(V,K)}function Dg(L,V,K,pe){for(var Pe=-1,rt=L==null?0:L.length;++Pe<rt;){var Kt=L[Pe];V(pe,Kt,K(Kt),L)}return pe}function Pr(L,V){for(var K=-1,pe=L==null?0:L.length;++K<pe&&V(L[K],K,L)!==!1;);return L}function vg(L,V){for(var K=L==null?0:L.length;K--&&V(L[K],K,L)!==!1;);return L}function Yc(L,V){for(var K=-1,pe=L==null?0:L.length;++K<pe;)if(!V(L[K],K,L))return!1;return!0}function Ci(L,V){for(var K=-1,pe=L==null?0:L.length,Pe=0,rt=[];++K<pe;){var Kt=L[K];V(Kt,K,L)&&(rt[Pe++]=Kt)}return rt}function Gs(L,V){var K=L==null?0:L.length;return!!K&&Dn(L,V,0)>-1}function Pa(L,V,K){for(var pe=-1,Pe=L==null?0:L.length;++pe<Pe;)if(K(V,L[pe]))return!0;return!1}function bt(L,V){for(var K=-1,pe=L==null?0:L.length,Pe=Array(pe);++K<pe;)Pe[K]=V(L[K],K,L);return Pe}function Si(L,V){for(var K=-1,pe=V.length,Pe=L.length;++K<pe;)L[Pe+K]=V[K];return L}function Ta(L,V,K,pe){var Pe=-1,rt=L==null?0:L.length;for(pe&&rt&&(K=L[++Pe]);++Pe<rt;)K=V(K,L[Pe],Pe,L);return K}function yg(L,V,K,pe){var Pe=L==null?0:L.length;for(pe&&Pe&&(K=L[--Pe]);Pe--;)K=V(K,L[Pe],Pe,L);return K}function Na(L,V){for(var K=-1,pe=L==null?0:L.length;++K<pe;)if(V(L[K],K,L))return!0;return!1}var bg=Fa("length");function _g(L){return L.split("")}function mg(L){return L.match(Bt)||[]}function Jc(L,V,K){var pe;return K(L,function(Pe,rt,Kt){if(V(Pe,rt,Kt))return pe=rt,!1}),pe}function Ws(L,V,K,pe){for(var Pe=L.length,rt=K+(pe?1:-1);pe?rt--:++rt<Pe;)if(V(L[rt],rt,L))return rt;return-1}function Dn(L,V,K){return V===V?Fg(L,V,K):Ws(L,Xc,K)}function wg(L,V,K,pe){for(var Pe=K-1,rt=L.length;++Pe<rt;)if(pe(L[Pe],V))return Pe;return-1}function Xc(L){return L!==L}function Qc(L,V){var K=L==null?0:L.length;return K?$a(L,V)/K:Y}function Fa(L){return function(V){return V==null?t:V[L]}}function Ra(L){return function(V){return L==null?t:L[V]}}function Zc(L,V,K,pe,Pe){return Pe(L,function(rt,Kt,ht){K=pe?(pe=!1,rt):V(K,rt,Kt,ht)}),K}function Eg(L,V){var K=L.length;for(L.sort(V);K--;)L[K]=L[K].value;return L}function $a(L,V){for(var K,pe=-1,Pe=L.length;++pe<Pe;){var rt=V(L[pe]);rt!==t&&(K=K===t?rt:K+rt)}return K}function Ua(L,V){for(var K=-1,pe=Array(L);++K<L;)pe[K]=V(K);return pe}function Cg(L,V){return bt(V,function(K){return[K,L[K]]})}function eh(L){return L&&L.slice(0,nh(L)+1).replace(xt,"")}function _r(L){return function(V){return L(V)}}function La(L,V){return bt(V,function(K){return L[K]})}function Hn(L,V){return L.has(V)}function th(L,V){for(var K=-1,pe=L.length;++K<pe&&Dn(V,L[K],0)>-1;);return K}function rh(L,V){for(var K=L.length;K--&&Dn(V,L[K],0)>-1;);return K}function Sg(L,V){for(var K=L.length,pe=0;K--;)L[K]===V&&++pe;return pe}var xg=Ra(m),Ig=Ra(U);function Ag(L){return"\\"+de[L]}function Og(L,V){return L==null?t:L[V]}function vn(L){return ks.test(L)}function Pg(L){return Hi.test(L)}function Tg(L){for(var V,K=[];!(V=L.next()).done;)K.push(V.value);return K}function Ma(L){var V=-1,K=Array(L.size);return L.forEach(function(pe,Pe){K[++V]=[Pe,pe]}),K}function ih(L,V){return function(K){return L(V(K))}}function xi(L,V){for(var K=-1,pe=L.length,Pe=0,rt=[];++K<pe;){var Kt=L[K];(Kt===V||Kt===w)&&(L[K]=w,rt[Pe++]=K)}return rt}function Ys(L){var V=-1,K=Array(L.size);return L.forEach(function(pe){K[++V]=pe}),K}function Ng(L){var V=-1,K=Array(L.size);return L.forEach(function(pe){K[++V]=[pe,pe]}),K}function Fg(L,V,K){for(var pe=K-1,Pe=L.length;++pe<Pe;)if(L[pe]===V)return pe;return-1}function Rg(L,V,K){for(var pe=K+1;pe--;)if(L[pe]===V)return pe;return pe}function yn(L){return vn(L)?Ug(L):bg(L)}function Hr(L){return vn(L)?Lg(L):_g(L)}function nh(L){for(var V=L.length;V--&&Pt.test(L.charAt(V)););return V}var $g=Ra(Z);function Ug(L){for(var V=gn.lastIndex=0;gn.test(L);)++V;return V}function Lg(L){return L.match(gn)||[]}function Mg(L){return L.match(Ks)||[]}var jg=function L(V){V=V==null?Xe:bn.defaults(Xe.Object(),V,bn.pick(Xe,Vs));var K=V.Array,pe=V.Date,Pe=V.Error,rt=V.Function,Kt=V.Math,ht=V.Object,ja=V.RegExp,Bg=V.String,Tr=V.TypeError,Js=K.prototype,zg=rt.prototype,_n=ht.prototype,Xs=V["__core-js_shared__"],Qs=zg.toString,nt=_n.hasOwnProperty,qg=0,sh=function(){var r=/[^.]+$/.exec(Xs&&Xs.keys&&Xs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Zs=_n.toString,Hg=Qs.call(ht),Kg=Xe._,kg=ja("^"+Qs.call(nt).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eo=dr?V.Buffer:t,Ii=V.Symbol,to=V.Uint8Array,oh=eo?eo.allocUnsafe:t,ro=ih(ht.getPrototypeOf,ht),ah=ht.create,uh=_n.propertyIsEnumerable,io=Js.splice,ch=Ii?Ii.isConcatSpreadable:t,Kn=Ii?Ii.iterator:t,ki=Ii?Ii.toStringTag:t,no=function(){try{var r=Ji(ht,"defineProperty");return r({},"",{}),r}catch{}}(),Vg=V.clearTimeout!==Xe.clearTimeout&&V.clearTimeout,Gg=pe&&pe.now!==Xe.Date.now&&pe.now,Wg=V.setTimeout!==Xe.setTimeout&&V.setTimeout,so=Kt.ceil,oo=Kt.floor,Ba=ht.getOwnPropertySymbols,Yg=eo?eo.isBuffer:t,hh=V.isFinite,Jg=Js.join,Xg=ih(ht.keys,ht),kt=Kt.max,er=Kt.min,Qg=pe.now,Zg=V.parseInt,lh=Kt.random,e0=Js.reverse,za=Ji(V,"DataView"),kn=Ji(V,"Map"),qa=Ji(V,"Promise"),mn=Ji(V,"Set"),Vn=Ji(V,"WeakMap"),Gn=Ji(ht,"create"),ao=Vn&&new Vn,wn={},t0=Xi(za),r0=Xi(kn),i0=Xi(qa),n0=Xi(mn),s0=Xi(Vn),uo=Ii?Ii.prototype:t,Wn=uo?uo.valueOf:t,fh=uo?uo.toString:t;function D(r){if(At(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Nr)return r;if(nt.call(r,"__wrapped__"))return dl(r)}return new Nr(r)}var En=function(){function r(){}return function(n){if(!mt(n))return{};if(ah)return ah(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function co(){}function Nr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}D.templateSettings={escape:Et,evaluate:Ct,interpolate:_t,variable:"",imports:{_:D}},D.prototype=co.prototype,D.prototype.constructor=D,Nr.prototype=En(co.prototype),Nr.prototype.constructor=Nr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function o0(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function a0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function u0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Ne(r),h=n<0,p=a?r.length:0,b=_1(0,p,this.__views__),C=b.start,O=b.end,M=O-C,X=h?O:C-1,Q=this.__iteratees__,ee=Q.length,ae=0,De=er(M,this.__takeCount__);if(!a||!h&&p==M&&De==M)return Uh(r,this.__actions__);var me=[];e:for(;M--&&ae<De;){X+=n;for(var ze=-1,we=r[X];++ze<ee;){var Ge=Q[ze],Qe=Ge.iteratee,Er=Ge.type,ur=Qe(we);if(Er==q)we=ur;else if(!ur){if(Er==$)continue e;break e}}me[ae++]=we}return me}Ye.prototype=En(co.prototype),Ye.prototype.constructor=Ye;function Vi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function c0(){this.__data__=Gn?Gn(null):{},this.size=0}function h0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function l0(r){var n=this.__data__;if(Gn){var a=n[r];return a===g?t:a}return nt.call(n,r)?n[r]:t}function f0(r){var n=this.__data__;return Gn?n[r]!==t:nt.call(n,r)}function d0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Gn&&n===t?g:n,this}Vi.prototype.clear=c0,Vi.prototype.delete=h0,Vi.prototype.get=l0,Vi.prototype.has=f0,Vi.prototype.set=d0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function p0(){this.__data__=[],this.size=0}function g0(r){var n=this.__data__,a=ho(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():io.call(n,a,1),--this.size,!0}function D0(r){var n=this.__data__,a=ho(n,r);return a<0?t:n[a][1]}function v0(r){return ho(this.__data__,r)>-1}function y0(r,n){var a=this.__data__,h=ho(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}hi.prototype.clear=p0,hi.prototype.delete=g0,hi.prototype.get=D0,hi.prototype.has=v0,hi.prototype.set=y0;function li(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function b0(){this.size=0,this.__data__={hash:new Vi,map:new(kn||hi),string:new Vi}}function _0(r){var n=Eo(this,r).delete(r);return this.size-=n?1:0,n}function m0(r){return Eo(this,r).get(r)}function w0(r){return Eo(this,r).has(r)}function E0(r,n){var a=Eo(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}li.prototype.clear=b0,li.prototype.delete=_0,li.prototype.get=m0,li.prototype.has=w0,li.prototype.set=E0;function Gi(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new li;++n<a;)this.add(r[n])}function C0(r){return this.__data__.set(r,g),this}function S0(r){return this.__data__.has(r)}Gi.prototype.add=Gi.prototype.push=C0,Gi.prototype.has=S0;function Kr(r){var n=this.__data__=new hi(r);this.size=n.size}function x0(){this.__data__=new hi,this.size=0}function I0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function A0(r){return this.__data__.get(r)}function O0(r){return this.__data__.has(r)}function P0(r,n){var a=this.__data__;if(a instanceof hi){var h=a.__data__;if(!kn||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new li(h)}return a.set(r,n),this.size=a.size,this}Kr.prototype.clear=x0,Kr.prototype.delete=I0,Kr.prototype.get=A0,Kr.prototype.has=O0,Kr.prototype.set=P0;function dh(r,n){var a=Ne(r),h=!a&&Qi(r),p=!a&&!h&&Ni(r),b=!a&&!h&&!p&&In(r),C=a||h||p||b,O=C?Ua(r.length,Bg):[],M=O.length;for(var X in r)(n||nt.call(r,X))&&!(C&&(X=="length"||p&&(X=="offset"||X=="parent")||b&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||gi(X,M)))&&O.push(X);return O}function ph(r){var n=r.length;return n?r[Za(0,n-1)]:t}function T0(r,n){return Co(pr(r),Wi(n,0,r.length))}function N0(r){return Co(pr(r))}function Ha(r,n,a){(a!==t&&!kr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function Yn(r,n,a){var h=r[n];(!(nt.call(r,n)&&kr(h,a))||a===t&&!(n in r))&&fi(r,n,a)}function ho(r,n){for(var a=r.length;a--;)if(kr(r[a][0],n))return a;return-1}function F0(r,n,a,h){return Ai(r,function(p,b,C){n(h,p,a(p),C)}),h}function gh(r,n){return r&&ti(n,Gt(n),r)}function R0(r,n){return r&&ti(n,Dr(n),r)}function fi(r,n,a){n=="__proto__"&&no?no(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function Ka(r,n){for(var a=-1,h=n.length,p=K(h),b=r==null;++a<h;)p[a]=b?t:Cu(r,n[a]);return p}function Wi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Fr(r,n,a,h,p,b){var C,O=n&T,M=n&R,X=n&N;if(a&&(C=p?a(r,h,p,b):a(r)),C!==t)return C;if(!mt(r))return r;var Q=Ne(r);if(Q){if(C=w1(r),!O)return pr(r,C)}else{var ee=tr(r),ae=ee==se||ee==fe;if(Ni(r))return jh(r,O);if(ee==Le||ee==he||ae&&!p){if(C=M||ae?{}:nl(r),!O)return M?l1(r,R0(C,r)):h1(r,gh(C,r))}else{if(!st[ee])return p?r:{};C=E1(r,ee,O)}}b||(b=new Kr);var De=b.get(r);if(De)return De;b.set(r,C),Fl(r)?r.forEach(function(we){C.add(Fr(we,n,a,we,r,b))}):Tl(r)&&r.forEach(function(we,Ge){C.set(Ge,Fr(we,n,a,Ge,r,b))});var me=X?M?hu:cu:M?Dr:Gt,ze=Q?t:me(r);return Pr(ze||r,function(we,Ge){ze&&(Ge=we,we=r[Ge]),Yn(C,Ge,Fr(we,n,a,Ge,r,b))}),C}function $0(r){var n=Gt(r);return function(a){return Dh(a,r,n)}}function Dh(r,n,a){var h=a.length;if(r==null)return!h;for(r=ht(r);h--;){var p=a[h],b=n[p],C=r[p];if(C===t&&!(p in r)||!b(C))return!1}return!0}function vh(r,n,a){if(typeof r!="function")throw new Tr(d);return rs(function(){r.apply(t,a)},n)}function Jn(r,n,a,h){var p=-1,b=Gs,C=!0,O=r.length,M=[],X=n.length;if(!O)return M;a&&(n=bt(n,_r(a))),h?(b=Pa,C=!1):n.length>=o&&(b=Hn,C=!1,n=new Gi(n));e:for(;++p<O;){var Q=r[p],ee=a==null?Q:a(Q);if(Q=h||Q!==0?Q:0,C&&ee===ee){for(var ae=X;ae--;)if(n[ae]===ee)continue e;M.push(Q)}else b(n,ee,h)||M.push(Q)}return M}var Ai=Kh(ei),yh=Kh(Va,!0);function U0(r,n){var a=!0;return Ai(r,function(h,p,b){return a=!!n(h,p,b),a}),a}function lo(r,n,a){for(var h=-1,p=r.length;++h<p;){var b=r[h],C=n(b);if(C!=null&&(O===t?C===C&&!wr(C):a(C,O)))var O=C,M=b}return M}function L0(r,n,a,h){var p=r.length;for(a=Me(a),a<0&&(a=-a>p?0:p+a),h=h===t||h>p?p:Me(h),h<0&&(h+=p),h=a>h?0:$l(h);a<h;)r[a++]=n;return r}function bh(r,n){var a=[];return Ai(r,function(h,p,b){n(h,p,b)&&a.push(h)}),a}function Yt(r,n,a,h,p){var b=-1,C=r.length;for(a||(a=S1),p||(p=[]);++b<C;){var O=r[b];n>0&&a(O)?n>1?Yt(O,n-1,a,h,p):Si(p,O):h||(p[p.length]=O)}return p}var ka=kh(),_h=kh(!0);function ei(r,n){return r&&ka(r,n,Gt)}function Va(r,n){return r&&_h(r,n,Gt)}function fo(r,n){return Ci(n,function(a){return Di(r[a])})}function Yi(r,n){n=Pi(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ri(n[a++])];return a&&a==h?r:t}function mh(r,n,a){var h=n(r);return Ne(r)?h:Si(h,a(r))}function or(r){return r==null?r===t?Be:ke:ki&&ki in ht(r)?b1(r):N1(r)}function Ga(r,n){return r>n}function M0(r,n){return r!=null&&nt.call(r,n)}function j0(r,n){return r!=null&&n in ht(r)}function B0(r,n,a){return r>=er(n,a)&&r<kt(n,a)}function Wa(r,n,a){for(var h=a?Pa:Gs,p=r[0].length,b=r.length,C=b,O=K(b),M=1/0,X=[];C--;){var Q=r[C];C&&n&&(Q=bt(Q,_r(n))),M=er(Q.length,M),O[C]=!a&&(n||p>=120&&Q.length>=120)?new Gi(C&&Q):t}Q=r[0];var ee=-1,ae=O[0];e:for(;++ee<p&&X.length<M;){var De=Q[ee],me=n?n(De):De;if(De=a||De!==0?De:0,!(ae?Hn(ae,me):h(X,me,a))){for(C=b;--C;){var ze=O[C];if(!(ze?Hn(ze,me):h(r[C],me,a)))continue e}ae&&ae.push(me),X.push(De)}}return X}function z0(r,n,a,h){return ei(r,function(p,b,C){n(h,a(p),b,C)}),h}function Xn(r,n,a){n=Pi(n,r),r=ul(r,n);var h=r==null?r:r[ri($r(n))];return h==null?t:Vt(h,r,a)}function wh(r){return At(r)&&or(r)==he}function q0(r){return At(r)&&or(r)==Ee}function H0(r){return At(r)&&or(r)==F}function Qn(r,n,a,h,p){return r===n?!0:r==null||n==null||!At(r)&&!At(n)?r!==r&&n!==n:K0(r,n,a,h,Qn,p)}function K0(r,n,a,h,p,b){var C=Ne(r),O=Ne(n),M=C?ye:tr(r),X=O?ye:tr(n);M=M==he?Le:M,X=X==he?Le:X;var Q=M==Le,ee=X==Le,ae=M==X;if(ae&&Ni(r)){if(!Ni(n))return!1;C=!0,Q=!1}if(ae&&!Q)return b||(b=new Kr),C||In(r)?tl(r,n,a,h,p,b):v1(r,n,M,a,h,p,b);if(!(a&x)){var De=Q&&nt.call(r,"__wrapped__"),me=ee&&nt.call(n,"__wrapped__");if(De||me){var ze=De?r.value():r,we=me?n.value():n;return b||(b=new Kr),p(ze,we,a,h,b)}}return ae?(b||(b=new Kr),y1(r,n,a,h,p,b)):!1}function k0(r){return At(r)&&tr(r)==Ce}function Ya(r,n,a,h){var p=a.length,b=p,C=!h;if(r==null)return!b;for(r=ht(r);p--;){var O=a[p];if(C&&O[2]?O[1]!==r[O[0]]:!(O[0]in r))return!1}for(;++p<b;){O=a[p];var M=O[0],X=r[M],Q=O[1];if(C&&O[2]){if(X===t&&!(M in r))return!1}else{var ee=new Kr;if(h)var ae=h(X,Q,M,r,n,ee);if(!(ae===t?Qn(Q,X,x|j,h,ee):ae))return!1}}return!0}function Eh(r){if(!mt(r)||I1(r))return!1;var n=Di(r)?kg:pa;return n.test(Xi(r))}function V0(r){return At(r)&&or(r)==je}function G0(r){return At(r)&&tr(r)==Se}function W0(r){return At(r)&&Po(r.length)&&!!at[or(r)]}function Ch(r){return typeof r=="function"?r:r==null?vr:typeof r=="object"?Ne(r)?Ih(r[0],r[1]):xh(r):Vl(r)}function Ja(r){if(!ts(r))return Xg(r);var n=[];for(var a in ht(r))nt.call(r,a)&&a!="constructor"&&n.push(a);return n}function Y0(r){if(!mt(r))return T1(r);var n=ts(r),a=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||a.push(h);return a}function Xa(r,n){return r<n}function Sh(r,n){var a=-1,h=gr(r)?K(r.length):[];return Ai(r,function(p,b,C){h[++a]=n(p,b,C)}),h}function xh(r){var n=fu(r);return n.length==1&&n[0][2]?ol(n[0][0],n[0][1]):function(a){return a===r||Ya(a,r,n)}}function Ih(r,n){return pu(r)&&sl(n)?ol(ri(r),n):function(a){var h=Cu(a,r);return h===t&&h===n?Su(a,r):Qn(n,h,x|j)}}function po(r,n,a,h,p){r!==n&&ka(n,function(b,C){if(p||(p=new Kr),mt(b))J0(r,n,C,a,po,h,p);else{var O=h?h(Du(r,C),b,C+"",r,n,p):t;O===t&&(O=b),Ha(r,C,O)}},Dr)}function J0(r,n,a,h,p,b,C){var O=Du(r,a),M=Du(n,a),X=C.get(M);if(X){Ha(r,a,X);return}var Q=b?b(O,M,a+"",r,n,C):t,ee=Q===t;if(ee){var ae=Ne(M),De=!ae&&Ni(M),me=!ae&&!De&&In(M);Q=M,ae||De||me?Ne(O)?Q=O:Nt(O)?Q=pr(O):De?(ee=!1,Q=jh(M,!0)):me?(ee=!1,Q=Bh(M,!0)):Q=[]:is(M)||Qi(M)?(Q=O,Qi(O)?Q=Ul(O):(!mt(O)||Di(O))&&(Q=nl(M))):ee=!1}ee&&(C.set(M,Q),p(Q,M,h,b,C),C.delete(M)),Ha(r,a,Q)}function Ah(r,n){var a=r.length;if(a)return n+=n<0?a:0,gi(n,a)?r[n]:t}function Oh(r,n,a){n.length?n=bt(n,function(b){return Ne(b)?function(C){return Yi(C,b.length===1?b[0]:b)}:b}):n=[vr];var h=-1;n=bt(n,_r(be()));var p=Sh(r,function(b,C,O){var M=bt(n,function(X){return X(b)});return{criteria:M,index:++h,value:b}});return Eg(p,function(b,C){return c1(b,C,a)})}function X0(r,n){return Ph(r,n,function(a,h){return Su(r,h)})}function Ph(r,n,a){for(var h=-1,p=n.length,b={};++h<p;){var C=n[h],O=Yi(r,C);a(O,C)&&Zn(b,Pi(C,r),O)}return b}function Q0(r){return function(n){return Yi(n,r)}}function Qa(r,n,a,h){var p=h?wg:Dn,b=-1,C=n.length,O=r;for(r===n&&(n=pr(n)),a&&(O=bt(r,_r(a)));++b<C;)for(var M=0,X=n[b],Q=a?a(X):X;(M=p(O,Q,M,h))>-1;)O!==r&&io.call(O,M,1),io.call(r,M,1);return r}function Th(r,n){for(var a=r?n.length:0,h=a-1;a--;){var p=n[a];if(a==h||p!==b){var b=p;gi(p)?io.call(r,p,1):ru(r,p)}}return r}function Za(r,n){return r+oo(lh()*(n-r+1))}function Z0(r,n,a,h){for(var p=-1,b=kt(so((n-r)/(a||1)),0),C=K(b);b--;)C[h?b:++p]=r,r+=a;return C}function eu(r,n){var a="";if(!r||n<1||n>W)return a;do n%2&&(a+=r),n=oo(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return vu(al(r,n,vr),r+"")}function e1(r){return ph(An(r))}function t1(r,n){var a=An(r);return Co(a,Wi(n,0,a.length))}function Zn(r,n,a,h){if(!mt(r))return r;n=Pi(n,r);for(var p=-1,b=n.length,C=b-1,O=r;O!=null&&++p<b;){var M=ri(n[p]),X=a;if(M==="__proto__"||M==="constructor"||M==="prototype")return r;if(p!=C){var Q=O[M];X=h?h(Q,M,O):t,X===t&&(X=mt(Q)?Q:gi(n[p+1])?[]:{})}Yn(O,M,X),O=O[M]}return r}var Nh=ao?function(r,n){return ao.set(r,n),r}:vr,r1=no?function(r,n){return no(r,"toString",{configurable:!0,enumerable:!1,value:Iu(n),writable:!0})}:vr;function i1(r){return Co(An(r))}function Rr(r,n,a){var h=-1,p=r.length;n<0&&(n=-n>p?0:p+n),a=a>p?p:a,a<0&&(a+=p),p=n>a?0:a-n>>>0,n>>>=0;for(var b=K(p);++h<p;)b[h]=r[h+n];return b}function n1(r,n){var a;return Ai(r,function(h,p,b){return a=n(h,p,b),!a}),!!a}function go(r,n,a){var h=0,p=r==null?h:r.length;if(typeof n=="number"&&n===n&&p<=ne){for(;h<p;){var b=h+p>>>1,C=r[b];C!==null&&!wr(C)&&(a?C<=n:C<n)?h=b+1:p=b}return p}return tu(r,n,vr,a)}function tu(r,n,a,h){var p=0,b=r==null?0:r.length;if(b===0)return 0;n=a(n);for(var C=n!==n,O=n===null,M=wr(n),X=n===t;p<b;){var Q=oo((p+b)/2),ee=a(r[Q]),ae=ee!==t,De=ee===null,me=ee===ee,ze=wr(ee);if(C)var we=h||me;else X?we=me&&(h||ae):O?we=me&&ae&&(h||!De):M?we=me&&ae&&!De&&(h||!ze):De||ze?we=!1:we=h?ee<=n:ee<n;we?p=Q+1:b=Q}return er(b,xe)}function Fh(r,n){for(var a=-1,h=r.length,p=0,b=[];++a<h;){var C=r[a],O=n?n(C):C;if(!a||!kr(O,M)){var M=O;b[p++]=C===0?0:C}}return b}function Rh(r){return typeof r=="number"?r:wr(r)?Y:+r}function mr(r){if(typeof r=="string")return r;if(Ne(r))return bt(r,mr)+"";if(wr(r))return fh?fh.call(r):"";var n=r+"";return n=="0"&&1/r==-re?"-0":n}function Oi(r,n,a){var h=-1,p=Gs,b=r.length,C=!0,O=[],M=O;if(a)C=!1,p=Pa;else if(b>=o){var X=n?null:g1(r);if(X)return Ys(X);C=!1,p=Hn,M=new Gi}else M=n?[]:O;e:for(;++h<b;){var Q=r[h],ee=n?n(Q):Q;if(Q=a||Q!==0?Q:0,C&&ee===ee){for(var ae=M.length;ae--;)if(M[ae]===ee)continue e;n&&M.push(ee),O.push(Q)}else p(M,ee,a)||(M!==O&&M.push(ee),O.push(Q))}return O}function ru(r,n){return n=Pi(n,r),r=ul(r,n),r==null||delete r[ri($r(n))]}function $h(r,n,a,h){return Zn(r,n,a(Yi(r,n)),h)}function Do(r,n,a,h){for(var p=r.length,b=h?p:-1;(h?b--:++b<p)&&n(r[b],b,r););return a?Rr(r,h?0:b,h?b+1:p):Rr(r,h?b+1:0,h?p:b)}function Uh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),Ta(n,function(h,p){return p.func.apply(p.thisArg,Si([h],p.args))},a)}function iu(r,n,a){var h=r.length;if(h<2)return h?Oi(r[0]):[];for(var p=-1,b=K(h);++p<h;)for(var C=r[p],O=-1;++O<h;)O!=p&&(b[p]=Jn(b[p]||C,r[O],n,a));return Oi(Yt(b,1),n,a)}function Lh(r,n,a){for(var h=-1,p=r.length,b=n.length,C={};++h<p;){var O=h<b?n[h]:t;a(C,r[h],O)}return C}function nu(r){return Nt(r)?r:[]}function su(r){return typeof r=="function"?r:vr}function Pi(r,n){return Ne(r)?r:pu(r,n)?[r]:fl(it(r))}var s1=Ke;function Ti(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:Rr(r,n,a)}var Mh=Vg||function(r){return Xe.clearTimeout(r)};function jh(r,n){if(n)return r.slice();var a=r.length,h=oh?oh(a):new r.constructor(a);return r.copy(h),h}function ou(r){var n=new r.constructor(r.byteLength);return new to(n).set(new to(r)),n}function o1(r,n){var a=n?ou(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function a1(r){var n=new r.constructor(r.source,Ar.exec(r));return n.lastIndex=r.lastIndex,n}function u1(r){return Wn?ht(Wn.call(r)):{}}function Bh(r,n){var a=n?ou(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function zh(r,n){if(r!==n){var a=r!==t,h=r===null,p=r===r,b=wr(r),C=n!==t,O=n===null,M=n===n,X=wr(n);if(!O&&!X&&!b&&r>n||b&&C&&M&&!O&&!X||h&&C&&M||!a&&M||!p)return 1;if(!h&&!b&&!X&&r<n||X&&a&&p&&!h&&!b||O&&a&&p||!C&&p||!M)return-1}return 0}function c1(r,n,a){for(var h=-1,p=r.criteria,b=n.criteria,C=p.length,O=a.length;++h<C;){var M=zh(p[h],b[h]);if(M){if(h>=O)return M;var X=a[h];return M*(X=="desc"?-1:1)}}return r.index-n.index}function qh(r,n,a,h){for(var p=-1,b=r.length,C=a.length,O=-1,M=n.length,X=kt(b-C,0),Q=K(M+X),ee=!h;++O<M;)Q[O]=n[O];for(;++p<C;)(ee||p<b)&&(Q[a[p]]=r[p]);for(;X--;)Q[O++]=r[p++];return Q}function Hh(r,n,a,h){for(var p=-1,b=r.length,C=-1,O=a.length,M=-1,X=n.length,Q=kt(b-O,0),ee=K(Q+X),ae=!h;++p<Q;)ee[p]=r[p];for(var De=p;++M<X;)ee[De+M]=n[M];for(;++C<O;)(ae||p<b)&&(ee[De+a[C]]=r[p++]);return ee}function pr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function ti(r,n,a,h){var p=!a;a||(a={});for(var b=-1,C=n.length;++b<C;){var O=n[b],M=h?h(a[O],r[O],O,a,r):t;M===t&&(M=r[O]),p?fi(a,O,M):Yn(a,O,M)}return a}function h1(r,n){return ti(r,du(r),n)}function l1(r,n){return ti(r,rl(r),n)}function vo(r,n){return function(a,h){var p=Ne(a)?Dg:F0,b=n?n():{};return p(a,r,be(h,2),b)}}function Cn(r){return Ke(function(n,a){var h=-1,p=a.length,b=p>1?a[p-1]:t,C=p>2?a[2]:t;for(b=r.length>3&&typeof b=="function"?(p--,b):t,C&&ar(a[0],a[1],C)&&(b=p<3?t:b,p=1),n=ht(n);++h<p;){var O=a[h];O&&r(n,O,h,b)}return n})}function Kh(r,n){return function(a,h){if(a==null)return a;if(!gr(a))return r(a,h);for(var p=a.length,b=n?p:-1,C=ht(a);(n?b--:++b<p)&&h(C[b],b,C)!==!1;);return a}}function kh(r){return function(n,a,h){for(var p=-1,b=ht(n),C=h(n),O=C.length;O--;){var M=C[r?O:++p];if(a(b[M],M,b)===!1)break}return n}}function f1(r,n,a){var h=n&H,p=es(r);function b(){var C=this&&this!==Xe&&this instanceof b?p:r;return C.apply(h?a:this,arguments)}return b}function Vh(r){return function(n){n=it(n);var a=vn(n)?Hr(n):t,h=a?a[0]:n.charAt(0),p=a?Ti(a,1).join(""):n.slice(1);return h[r]()+p}}function Sn(r){return function(n){return Ta(Kl(Hl(n).replace(zn,"")),r,"")}}function es(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=En(r.prototype),h=r.apply(a,n);return mt(h)?h:a}}function d1(r,n,a){var h=es(r);function p(){for(var b=arguments.length,C=K(b),O=b,M=xn(p);O--;)C[O]=arguments[O];var X=b<3&&C[0]!==M&&C[b-1]!==M?[]:xi(C,M);if(b-=X.length,b<a)return Xh(r,n,yo,p.placeholder,t,C,X,t,t,a-b);var Q=this&&this!==Xe&&this instanceof p?h:r;return Vt(Q,this,C)}return p}function Gh(r){return function(n,a,h){var p=ht(n);if(!gr(n)){var b=be(a,3);n=Gt(n),a=function(O){return b(p[O],O,p)}}var C=r(n,a,h);return C>-1?p[b?n[C]:C]:t}}function Wh(r){return pi(function(n){var a=n.length,h=a,p=Nr.prototype.thru;for(r&&n.reverse();h--;){var b=n[h];if(typeof b!="function")throw new Tr(d);if(p&&!C&&wo(b)=="wrapper")var C=new Nr([],!0)}for(h=C?h:a;++h<a;){b=n[h];var O=wo(b),M=O=="wrapper"?lu(b):t;M&&gu(M[0])&&M[1]==(c|P|S|v)&&!M[4].length&&M[9]==1?C=C[wo(M[0])].apply(C,M[3]):C=b.length==1&&gu(b)?C[O]():C.thru(b)}return function(){var X=arguments,Q=X[0];if(C&&X.length==1&&Ne(Q))return C.plant(Q).value();for(var ee=0,ae=a?n[ee].apply(this,X):Q;++ee<a;)ae=n[ee].call(this,ae);return ae}})}function yo(r,n,a,h,p,b,C,O,M,X){var Q=n&c,ee=n&H,ae=n&J,De=n&(P|E),me=n&k,ze=ae?t:es(r);function we(){for(var Ge=arguments.length,Qe=K(Ge),Er=Ge;Er--;)Qe[Er]=arguments[Er];if(De)var ur=xn(we),Cr=Sg(Qe,ur);if(h&&(Qe=qh(Qe,h,p,De)),b&&(Qe=Hh(Qe,b,C,De)),Ge-=Cr,De&&Ge<X){var Ft=xi(Qe,ur);return Xh(r,n,yo,we.placeholder,a,Qe,Ft,O,M,X-Ge)}var Vr=ee?a:this,yi=ae?Vr[r]:r;return Ge=Qe.length,O?Qe=F1(Qe,O):me&&Ge>1&&Qe.reverse(),Q&&M<Ge&&(Qe.length=M),this&&this!==Xe&&this instanceof we&&(yi=ze||es(yi)),yi.apply(Vr,Qe)}return we}function Yh(r,n){return function(a,h){return z0(a,r,n(h),{})}}function bo(r,n){return function(a,h){var p;if(a===t&&h===t)return n;if(a!==t&&(p=a),h!==t){if(p===t)return h;typeof a=="string"||typeof h=="string"?(a=mr(a),h=mr(h)):(a=Rh(a),h=Rh(h)),p=r(a,h)}return p}}function au(r){return pi(function(n){return n=bt(n,_r(be())),Ke(function(a){var h=this;return r(n,function(p){return Vt(p,h,a)})})})}function _o(r,n){n=n===t?" ":mr(n);var a=n.length;if(a<2)return a?eu(n,r):n;var h=eu(n,so(r/yn(n)));return vn(n)?Ti(Hr(h),0,r).join(""):h.slice(0,r)}function p1(r,n,a,h){var p=n&H,b=es(r);function C(){for(var O=-1,M=arguments.length,X=-1,Q=h.length,ee=K(Q+M),ae=this&&this!==Xe&&this instanceof C?b:r;++X<Q;)ee[X]=h[X];for(;M--;)ee[X++]=arguments[++O];return Vt(ae,p?a:this,ee)}return C}function Jh(r){return function(n,a,h){return h&&typeof h!="number"&&ar(n,a,h)&&(a=h=t),n=vi(n),a===t?(a=n,n=0):a=vi(a),h=h===t?n<a?1:-1:vi(h),Z0(n,a,h,r)}}function mo(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Ur(n),a=Ur(a)),r(n,a)}}function Xh(r,n,a,h,p,b,C,O,M,X){var Q=n&P,ee=Q?C:t,ae=Q?t:C,De=Q?b:t,me=Q?t:b;n|=Q?S:y,n&=~(Q?y:S),n&A||(n&=~(H|J));var ze=[r,n,p,De,ee,me,ae,O,M,X],we=a.apply(t,ze);return gu(r)&&cl(we,ze),we.placeholder=h,hl(we,r,n)}function uu(r){var n=Kt[r];return function(a,h){if(a=Ur(a),h=h==null?0:er(Me(h),292),h&&hh(a)){var p=(it(a)+"e").split("e"),b=n(p[0]+"e"+(+p[1]+h));return p=(it(b)+"e").split("e"),+(p[0]+"e"+(+p[1]-h))}return n(a)}}var g1=mn&&1/Ys(new mn([,-0]))[1]==re?function(r){return new mn(r)}:Pu;function Qh(r){return function(n){var a=tr(n);return a==Ce?Ma(n):a==Se?Ng(n):Cg(n,r(n))}}function di(r,n,a,h,p,b,C,O){var M=n&J;if(!M&&typeof r!="function")throw new Tr(d);var X=h?h.length:0;if(X||(n&=~(S|y),h=p=t),C=C===t?C:kt(Me(C),0),O=O===t?O:Me(O),X-=p?p.length:0,n&y){var Q=h,ee=p;h=p=t}var ae=M?t:lu(r),De=[r,n,a,h,p,Q,ee,b,C,O];if(ae&&P1(De,ae),r=De[0],n=De[1],a=De[2],h=De[3],p=De[4],O=De[9]=De[9]===t?M?0:r.length:kt(De[9]-X,0),!O&&n&(P|E)&&(n&=~(P|E)),!n||n==H)var me=f1(r,n,a);else n==P||n==E?me=d1(r,n,O):(n==S||n==(H|S))&&!p.length?me=p1(r,n,a,h):me=yo.apply(t,De);var ze=ae?Nh:cl;return hl(ze(me,De),r,n)}function Zh(r,n,a,h){return r===t||kr(r,_n[a])&&!nt.call(h,a)?n:r}function el(r,n,a,h,p,b){return mt(r)&&mt(n)&&(b.set(n,r),po(r,n,t,el,b),b.delete(n)),r}function D1(r){return is(r)?t:r}function tl(r,n,a,h,p,b){var C=a&x,O=r.length,M=n.length;if(O!=M&&!(C&&M>O))return!1;var X=b.get(r),Q=b.get(n);if(X&&Q)return X==n&&Q==r;var ee=-1,ae=!0,De=a&j?new Gi:t;for(b.set(r,n),b.set(n,r);++ee<O;){var me=r[ee],ze=n[ee];if(h)var we=C?h(ze,me,ee,n,r,b):h(me,ze,ee,r,n,b);if(we!==t){if(we)continue;ae=!1;break}if(De){if(!Na(n,function(Ge,Qe){if(!Hn(De,Qe)&&(me===Ge||p(me,Ge,a,h,b)))return De.push(Qe)})){ae=!1;break}}else if(!(me===ze||p(me,ze,a,h,b))){ae=!1;break}}return b.delete(r),b.delete(n),ae}function v1(r,n,a,h,p,b,C){switch(a){case Oe:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Ee:return!(r.byteLength!=n.byteLength||!b(new to(r),new to(n)));case B:case F:case qe:return kr(+r,+n);case I:return r.name==n.name&&r.message==n.message;case je:case Fe:return r==n+"";case Ce:var O=Ma;case Se:var M=h&x;if(O||(O=Ys),r.size!=n.size&&!M)return!1;var X=C.get(r);if(X)return X==n;h|=j,C.set(r,n);var Q=tl(O(r),O(n),h,p,b,C);return C.delete(r),Q;case Re:if(Wn)return Wn.call(r)==Wn.call(n)}return!1}function y1(r,n,a,h,p,b){var C=a&x,O=cu(r),M=O.length,X=cu(n),Q=X.length;if(M!=Q&&!C)return!1;for(var ee=M;ee--;){var ae=O[ee];if(!(C?ae in n:nt.call(n,ae)))return!1}var De=b.get(r),me=b.get(n);if(De&&me)return De==n&&me==r;var ze=!0;b.set(r,n),b.set(n,r);for(var we=C;++ee<M;){ae=O[ee];var Ge=r[ae],Qe=n[ae];if(h)var Er=C?h(Qe,Ge,ae,n,r,b):h(Ge,Qe,ae,r,n,b);if(!(Er===t?Ge===Qe||p(Ge,Qe,a,h,b):Er)){ze=!1;break}we||(we=ae=="constructor")}if(ze&&!we){var ur=r.constructor,Cr=n.constructor;ur!=Cr&&"constructor"in r&&"constructor"in n&&!(typeof ur=="function"&&ur instanceof ur&&typeof Cr=="function"&&Cr instanceof Cr)&&(ze=!1)}return b.delete(r),b.delete(n),ze}function pi(r){return vu(al(r,t,Dl),r+"")}function cu(r){return mh(r,Gt,du)}function hu(r){return mh(r,Dr,rl)}var lu=ao?function(r){return ao.get(r)}:Pu;function wo(r){for(var n=r.name+"",a=wn[n],h=nt.call(wn,n)?a.length:0;h--;){var p=a[h],b=p.func;if(b==null||b==r)return p.name}return n}function xn(r){var n=nt.call(D,"placeholder")?D:r;return n.placeholder}function be(){var r=D.iteratee||Au;return r=r===Au?Ch:r,arguments.length?r(arguments[0],arguments[1]):r}function Eo(r,n){var a=r.__data__;return x1(n)?a[typeof n=="string"?"string":"hash"]:a.map}function fu(r){for(var n=Gt(r),a=n.length;a--;){var h=n[a],p=r[h];n[a]=[h,p,sl(p)]}return n}function Ji(r,n){var a=Og(r,n);return Eh(a)?a:t}function b1(r){var n=nt.call(r,ki),a=r[ki];try{r[ki]=t;var h=!0}catch{}var p=Zs.call(r);return h&&(n?r[ki]=a:delete r[ki]),p}var du=Ba?function(r){return r==null?[]:(r=ht(r),Ci(Ba(r),function(n){return uh.call(r,n)}))}:Tu,rl=Ba?function(r){for(var n=[];r;)Si(n,du(r)),r=ro(r);return n}:Tu,tr=or;(za&&tr(new za(new ArrayBuffer(1)))!=Oe||kn&&tr(new kn)!=Ce||qa&&tr(qa.resolve())!=gt||mn&&tr(new mn)!=Se||Vn&&tr(new Vn)!=Ae)&&(tr=function(r){var n=or(r),a=n==Le?r.constructor:t,h=a?Xi(a):"";if(h)switch(h){case t0:return Oe;case r0:return Ce;case i0:return gt;case n0:return Se;case s0:return Ae}return n});function _1(r,n,a){for(var h=-1,p=a.length;++h<p;){var b=a[h],C=b.size;switch(b.type){case"drop":r+=C;break;case"dropRight":n-=C;break;case"take":n=er(n,r+C);break;case"takeRight":r=kt(r,n-C);break}}return{start:r,end:n}}function m1(r){var n=r.match(lt);return n?n[1].split(jt):[]}function il(r,n,a){n=Pi(n,r);for(var h=-1,p=n.length,b=!1;++h<p;){var C=ri(n[h]);if(!(b=r!=null&&a(r,C)))break;r=r[C]}return b||++h!=p?b:(p=r==null?0:r.length,!!p&&Po(p)&&gi(C,p)&&(Ne(r)||Qi(r)))}function w1(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function nl(r){return typeof r.constructor=="function"&&!ts(r)?En(ro(r)):{}}function E1(r,n,a){var h=r.constructor;switch(n){case Ee:return ou(r);case B:case F:return new h(+r);case Oe:return o1(r,a);case He:case Ie:case Ve:case We:case et:case tt:case Je:case ir:case fr:return Bh(r,a);case Ce:return new h;case qe:case Fe:return new h(r);case je:return a1(r);case Se:return new h;case Re:return u1(r)}}function C1(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(It,`{
/* [wrapped with `+n+`] */
`)}function S1(r){return Ne(r)||Qi(r)||!!(ch&&r&&r[ch])}function gi(r,n){var a=typeof r;return n=n??W,!!n&&(a=="number"||a!="symbol"&&Da.test(r))&&r>-1&&r%1==0&&r<n}function ar(r,n,a){if(!mt(a))return!1;var h=typeof n;return(h=="number"?gr(a)&&gi(n,a.length):h=="string"&&n in a)?kr(a[n],r):!1}function pu(r,n){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||wr(r)?!0:Ut.test(r)||!yt.test(r)||n!=null&&r in ht(n)}function x1(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function gu(r){var n=wo(r),a=D[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var h=lu(a);return!!h&&r===h[0]}function I1(r){return!!sh&&sh in r}var A1=Xs?Di:Nu;function ts(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||_n;return r===a}function sl(r){return r===r&&!mt(r)}function ol(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ht(a))}}function O1(r){var n=Ao(r,function(h){return a.size===_&&a.clear(),h}),a=n.cache;return n}function P1(r,n){var a=r[1],h=n[1],p=a|h,b=p<(H|J|c),C=h==c&&a==P||h==c&&a==v&&r[7].length<=n[8]||h==(c|v)&&n[7].length<=n[8]&&a==P;if(!(b||C))return r;h&H&&(r[2]=n[2],p|=a&H?0:A);var O=n[3];if(O){var M=r[3];r[3]=M?qh(M,O,n[4]):O,r[4]=M?xi(r[3],w):n[4]}return O=n[5],O&&(M=r[5],r[5]=M?Hh(M,O,n[6]):O,r[6]=M?xi(r[5],w):n[6]),O=n[7],O&&(r[7]=O),h&c&&(r[8]=r[8]==null?n[8]:er(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=p,r}function T1(r){var n=[];if(r!=null)for(var a in ht(r))n.push(a);return n}function N1(r){return Zs.call(r)}function al(r,n,a){return n=kt(n===t?r.length-1:n,0),function(){for(var h=arguments,p=-1,b=kt(h.length-n,0),C=K(b);++p<b;)C[p]=h[n+p];p=-1;for(var O=K(n+1);++p<n;)O[p]=h[p];return O[n]=a(C),Vt(r,this,O)}}function ul(r,n){return n.length<2?r:Yi(r,Rr(n,0,-1))}function F1(r,n){for(var a=r.length,h=er(n.length,a),p=pr(r);h--;){var b=n[h];r[h]=gi(b,a)?p[b]:t}return r}function Du(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var cl=ll(Nh),rs=Wg||function(r,n){return Xe.setTimeout(r,n)},vu=ll(r1);function hl(r,n,a){var h=n+"";return vu(r,C1(h,R1(m1(h),a)))}function ll(r){var n=0,a=0;return function(){var h=Qg(),p=ge-(h-a);if(a=h,p>0){if(++n>=ue)return arguments[0]}else n=0;return r.apply(t,arguments)}}function Co(r,n){var a=-1,h=r.length,p=h-1;for(n=n===t?h:n;++a<n;){var b=Za(a,p),C=r[b];r[b]=r[a],r[a]=C}return r.length=n,r}var fl=O1(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Lt,function(a,h,p,b){n.push(p?b.replace(ha,"$1"):h||a)}),n});function ri(r){if(typeof r=="string"||wr(r))return r;var n=r+"";return n=="0"&&1/r==-re?"-0":n}function Xi(r){if(r!=null){try{return Qs.call(r)}catch{}try{return r+""}catch{}}return""}function R1(r,n){return Pr(_e,function(a){var h="_."+a[0];n&a[1]&&!Gs(r,h)&&r.push(h)}),r.sort()}function dl(r){if(r instanceof Ye)return r.clone();var n=new Nr(r.__wrapped__,r.__chain__);return n.__actions__=pr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function $1(r,n,a){(a?ar(r,n,a):n===t)?n=1:n=kt(Me(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var p=0,b=0,C=K(so(h/n));p<h;)C[b++]=Rr(r,p,p+=n);return C}function U1(r){for(var n=-1,a=r==null?0:r.length,h=0,p=[];++n<a;){var b=r[n];b&&(p[h++]=b)}return p}function L1(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Si(Ne(a)?pr(a):[a],Yt(n,1))}var M1=Ke(function(r,n){return Nt(r)?Jn(r,Yt(n,1,Nt,!0)):[]}),j1=Ke(function(r,n){var a=$r(n);return Nt(a)&&(a=t),Nt(r)?Jn(r,Yt(n,1,Nt,!0),be(a,2)):[]}),B1=Ke(function(r,n){var a=$r(n);return Nt(a)&&(a=t),Nt(r)?Jn(r,Yt(n,1,Nt,!0),t,a):[]});function z1(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),Rr(r,n<0?0:n,h)):[]}function q1(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Rr(r,0,n<0?0:n)):[]}function H1(r,n){return r&&r.length?Do(r,be(n,3),!0,!0):[]}function K1(r,n){return r&&r.length?Do(r,be(n,3),!0):[]}function k1(r,n,a,h){var p=r==null?0:r.length;return p?(a&&typeof a!="number"&&ar(r,n,a)&&(a=0,h=p),L0(r,n,a,h)):[]}function pl(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=a==null?0:Me(a);return p<0&&(p=kt(h+p,0)),Ws(r,be(n,3),p)}function gl(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=h-1;return a!==t&&(p=Me(a),p=a<0?kt(h+p,0):er(p,h-1)),Ws(r,be(n,3),p,!0)}function Dl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function V1(r){var n=r==null?0:r.length;return n?Yt(r,re):[]}function G1(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Me(n),Yt(r,n)):[]}function W1(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var p=r[n];h[p[0]]=p[1]}return h}function vl(r){return r&&r.length?r[0]:t}function Y1(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=a==null?0:Me(a);return p<0&&(p=kt(h+p,0)),Dn(r,n,p)}function J1(r){var n=r==null?0:r.length;return n?Rr(r,0,-1):[]}var X1=Ke(function(r){var n=bt(r,nu);return n.length&&n[0]===r[0]?Wa(n):[]}),Q1=Ke(function(r){var n=$r(r),a=bt(r,nu);return n===$r(a)?n=t:a.pop(),a.length&&a[0]===r[0]?Wa(a,be(n,2)):[]}),Z1=Ke(function(r){var n=$r(r),a=bt(r,nu);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?Wa(a,t,n):[]});function eD(r,n){return r==null?"":Jg.call(r,n)}function $r(r){var n=r==null?0:r.length;return n?r[n-1]:t}function tD(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=h;return a!==t&&(p=Me(a),p=p<0?kt(h+p,0):er(p,h-1)),n===n?Rg(r,n,p):Ws(r,Xc,p,!0)}function rD(r,n){return r&&r.length?Ah(r,Me(n)):t}var iD=Ke(yl);function yl(r,n){return r&&r.length&&n&&n.length?Qa(r,n):r}function nD(r,n,a){return r&&r.length&&n&&n.length?Qa(r,n,be(a,2)):r}function sD(r,n,a){return r&&r.length&&n&&n.length?Qa(r,n,t,a):r}var oD=pi(function(r,n){var a=r==null?0:r.length,h=Ka(r,n);return Th(r,bt(n,function(p){return gi(p,a)?+p:p}).sort(zh)),h});function aD(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,p=[],b=r.length;for(n=be(n,3);++h<b;){var C=r[h];n(C,h,r)&&(a.push(C),p.push(h))}return Th(r,p),a}function yu(r){return r==null?r:e0.call(r)}function uD(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&ar(r,n,a)?(n=0,a=h):(n=n==null?0:Me(n),a=a===t?h:Me(a)),Rr(r,n,a)):[]}function cD(r,n){return go(r,n)}function hD(r,n,a){return tu(r,n,be(a,2))}function lD(r,n){var a=r==null?0:r.length;if(a){var h=go(r,n);if(h<a&&kr(r[h],n))return h}return-1}function fD(r,n){return go(r,n,!0)}function dD(r,n,a){return tu(r,n,be(a,2),!0)}function pD(r,n){var a=r==null?0:r.length;if(a){var h=go(r,n,!0)-1;if(kr(r[h],n))return h}return-1}function gD(r){return r&&r.length?Fh(r):[]}function DD(r,n){return r&&r.length?Fh(r,be(n,2)):[]}function vD(r){var n=r==null?0:r.length;return n?Rr(r,1,n):[]}function yD(r,n,a){return r&&r.length?(n=a||n===t?1:Me(n),Rr(r,0,n<0?0:n)):[]}function bD(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Rr(r,n<0?0:n,h)):[]}function _D(r,n){return r&&r.length?Do(r,be(n,3),!1,!0):[]}function mD(r,n){return r&&r.length?Do(r,be(n,3)):[]}var wD=Ke(function(r){return Oi(Yt(r,1,Nt,!0))}),ED=Ke(function(r){var n=$r(r);return Nt(n)&&(n=t),Oi(Yt(r,1,Nt,!0),be(n,2))}),CD=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,Oi(Yt(r,1,Nt,!0),t,n)});function SD(r){return r&&r.length?Oi(r):[]}function xD(r,n){return r&&r.length?Oi(r,be(n,2)):[]}function ID(r,n){return n=typeof n=="function"?n:t,r&&r.length?Oi(r,t,n):[]}function bu(r){if(!(r&&r.length))return[];var n=0;return r=Ci(r,function(a){if(Nt(a))return n=kt(a.length,n),!0}),Ua(n,function(a){return bt(r,Fa(a))})}function bl(r,n){if(!(r&&r.length))return[];var a=bu(r);return n==null?a:bt(a,function(h){return Vt(n,t,h)})}var AD=Ke(function(r,n){return Nt(r)?Jn(r,n):[]}),OD=Ke(function(r){return iu(Ci(r,Nt))}),PD=Ke(function(r){var n=$r(r);return Nt(n)&&(n=t),iu(Ci(r,Nt),be(n,2))}),TD=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,iu(Ci(r,Nt),t,n)}),ND=Ke(bu);function FD(r,n){return Lh(r||[],n||[],Yn)}function RD(r,n){return Lh(r||[],n||[],Zn)}var $D=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,bl(r,a)});function _l(r){var n=D(r);return n.__chain__=!0,n}function UD(r,n){return n(r),r}function So(r,n){return n(r)}var LD=pi(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,p=function(b){return Ka(b,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!gi(a)?this.thru(p):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:So,args:[p],thisArg:t}),new Nr(h,this.__chain__).thru(function(b){return n&&!b.length&&b.push(t),b}))});function MD(){return _l(this)}function jD(){return new Nr(this.value(),this.__chain__)}function BD(){this.__values__===t&&(this.__values__=Rl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function zD(){return this}function qD(r){for(var n,a=this;a instanceof co;){var h=dl(a);h.__index__=0,h.__values__=t,n?p.__wrapped__=h:n=h;var p=h;a=a.__wrapped__}return p.__wrapped__=r,n}function HD(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:So,args:[yu],thisArg:t}),new Nr(n,this.__chain__)}return this.thru(yu)}function KD(){return Uh(this.__wrapped__,this.__actions__)}var kD=vo(function(r,n,a){nt.call(r,a)?++r[a]:fi(r,a,1)});function VD(r,n,a){var h=Ne(r)?Yc:U0;return a&&ar(r,n,a)&&(n=t),h(r,be(n,3))}function GD(r,n){var a=Ne(r)?Ci:bh;return a(r,be(n,3))}var WD=Gh(pl),YD=Gh(gl);function JD(r,n){return Yt(xo(r,n),1)}function XD(r,n){return Yt(xo(r,n),re)}function QD(r,n,a){return a=a===t?1:Me(a),Yt(xo(r,n),a)}function ml(r,n){var a=Ne(r)?Pr:Ai;return a(r,be(n,3))}function wl(r,n){var a=Ne(r)?vg:yh;return a(r,be(n,3))}var ZD=vo(function(r,n,a){nt.call(r,a)?r[a].push(n):fi(r,a,[n])});function ev(r,n,a,h){r=gr(r)?r:An(r),a=a&&!h?Me(a):0;var p=r.length;return a<0&&(a=kt(p+a,0)),To(r)?a<=p&&r.indexOf(n,a)>-1:!!p&&Dn(r,n,a)>-1}var tv=Ke(function(r,n,a){var h=-1,p=typeof n=="function",b=gr(r)?K(r.length):[];return Ai(r,function(C){b[++h]=p?Vt(n,C,a):Xn(C,n,a)}),b}),rv=vo(function(r,n,a){fi(r,a,n)});function xo(r,n){var a=Ne(r)?bt:Sh;return a(r,be(n,3))}function iv(r,n,a,h){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=h?t:a,Ne(a)||(a=a==null?[]:[a]),Oh(r,n,a))}var nv=vo(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function sv(r,n,a){var h=Ne(r)?Ta:Zc,p=arguments.length<3;return h(r,be(n,4),a,p,Ai)}function ov(r,n,a){var h=Ne(r)?yg:Zc,p=arguments.length<3;return h(r,be(n,4),a,p,yh)}function av(r,n){var a=Ne(r)?Ci:bh;return a(r,Oo(be(n,3)))}function uv(r){var n=Ne(r)?ph:e1;return n(r)}function cv(r,n,a){(a?ar(r,n,a):n===t)?n=1:n=Me(n);var h=Ne(r)?T0:t1;return h(r,n)}function hv(r){var n=Ne(r)?N0:i1;return n(r)}function lv(r){if(r==null)return 0;if(gr(r))return To(r)?yn(r):r.length;var n=tr(r);return n==Ce||n==Se?r.size:Ja(r).length}function fv(r,n,a){var h=Ne(r)?Na:n1;return a&&ar(r,n,a)&&(n=t),h(r,be(n,3))}var dv=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&ar(r,n[0],n[1])?n=[]:a>2&&ar(n[0],n[1],n[2])&&(n=[n[0]]),Oh(r,Yt(n,1),[])}),Io=Gg||function(){return Xe.Date.now()};function pv(r,n){if(typeof n!="function")throw new Tr(d);return r=Me(r),function(){if(--r<1)return n.apply(this,arguments)}}function El(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,di(r,c,t,t,t,t,n)}function Cl(r,n){var a;if(typeof n!="function")throw new Tr(d);return r=Me(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var _u=Ke(function(r,n,a){var h=H;if(a.length){var p=xi(a,xn(_u));h|=S}return di(r,h,n,a,p)}),Sl=Ke(function(r,n,a){var h=H|J;if(a.length){var p=xi(a,xn(Sl));h|=S}return di(n,h,r,a,p)});function xl(r,n,a){n=a?t:n;var h=di(r,P,t,t,t,t,t,n);return h.placeholder=xl.placeholder,h}function Il(r,n,a){n=a?t:n;var h=di(r,E,t,t,t,t,t,n);return h.placeholder=Il.placeholder,h}function Al(r,n,a){var h,p,b,C,O,M,X=0,Q=!1,ee=!1,ae=!0;if(typeof r!="function")throw new Tr(d);n=Ur(n)||0,mt(a)&&(Q=!!a.leading,ee="maxWait"in a,b=ee?kt(Ur(a.maxWait)||0,n):b,ae="trailing"in a?!!a.trailing:ae);function De(Ft){var Vr=h,yi=p;return h=p=t,X=Ft,C=r.apply(yi,Vr),C}function me(Ft){return X=Ft,O=rs(Ge,n),Q?De(Ft):C}function ze(Ft){var Vr=Ft-M,yi=Ft-X,Gl=n-Vr;return ee?er(Gl,b-yi):Gl}function we(Ft){var Vr=Ft-M,yi=Ft-X;return M===t||Vr>=n||Vr<0||ee&&yi>=b}function Ge(){var Ft=Io();if(we(Ft))return Qe(Ft);O=rs(Ge,ze(Ft))}function Qe(Ft){return O=t,ae&&h?De(Ft):(h=p=t,C)}function Er(){O!==t&&Mh(O),X=0,h=M=p=O=t}function ur(){return O===t?C:Qe(Io())}function Cr(){var Ft=Io(),Vr=we(Ft);if(h=arguments,p=this,M=Ft,Vr){if(O===t)return me(M);if(ee)return Mh(O),O=rs(Ge,n),De(M)}return O===t&&(O=rs(Ge,n)),C}return Cr.cancel=Er,Cr.flush=ur,Cr}var gv=Ke(function(r,n){return vh(r,1,n)}),Dv=Ke(function(r,n,a){return vh(r,Ur(n)||0,a)});function vv(r){return di(r,k)}function Ao(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Tr(d);var a=function(){var h=arguments,p=n?n.apply(this,h):h[0],b=a.cache;if(b.has(p))return b.get(p);var C=r.apply(this,h);return a.cache=b.set(p,C)||b,C};return a.cache=new(Ao.Cache||li),a}Ao.Cache=li;function Oo(r){if(typeof r!="function")throw new Tr(d);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function yv(r){return Cl(2,r)}var bv=s1(function(r,n){n=n.length==1&&Ne(n[0])?bt(n[0],_r(be())):bt(Yt(n,1),_r(be()));var a=n.length;return Ke(function(h){for(var p=-1,b=er(h.length,a);++p<b;)h[p]=n[p].call(this,h[p]);return Vt(r,this,h)})}),mu=Ke(function(r,n){var a=xi(n,xn(mu));return di(r,S,t,n,a)}),Ol=Ke(function(r,n){var a=xi(n,xn(Ol));return di(r,y,t,n,a)}),_v=pi(function(r,n){return di(r,v,t,t,t,n)});function mv(r,n){if(typeof r!="function")throw new Tr(d);return n=n===t?n:Me(n),Ke(r,n)}function wv(r,n){if(typeof r!="function")throw new Tr(d);return n=n==null?0:kt(Me(n),0),Ke(function(a){var h=a[n],p=Ti(a,0,n);return h&&Si(p,h),Vt(r,this,p)})}function Ev(r,n,a){var h=!0,p=!0;if(typeof r!="function")throw new Tr(d);return mt(a)&&(h="leading"in a?!!a.leading:h,p="trailing"in a?!!a.trailing:p),Al(r,n,{leading:h,maxWait:n,trailing:p})}function Cv(r){return El(r,1)}function Sv(r,n){return mu(su(n),r)}function xv(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function Iv(r){return Fr(r,N)}function Av(r,n){return n=typeof n=="function"?n:t,Fr(r,N,n)}function Ov(r){return Fr(r,T|N)}function Pv(r,n){return n=typeof n=="function"?n:t,Fr(r,T|N,n)}function Tv(r,n){return n==null||Dh(r,n,Gt(n))}function kr(r,n){return r===n||r!==r&&n!==n}var Nv=mo(Ga),Fv=mo(function(r,n){return r>=n}),Qi=wh(function(){return arguments}())?wh:function(r){return At(r)&&nt.call(r,"callee")&&!uh.call(r,"callee")},Ne=K.isArray,Rv=sr?_r(sr):q0;function gr(r){return r!=null&&Po(r.length)&&!Di(r)}function Nt(r){return At(r)&&gr(r)}function $v(r){return r===!0||r===!1||At(r)&&or(r)==B}var Ni=Yg||Nu,Uv=qr?_r(qr):H0;function Lv(r){return At(r)&&r.nodeType===1&&!is(r)}function Mv(r){if(r==null)return!0;if(gr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Ni(r)||In(r)||Qi(r)))return!r.length;var n=tr(r);if(n==Ce||n==Se)return!r.size;if(ts(r))return!Ja(r).length;for(var a in r)if(nt.call(r,a))return!1;return!0}function jv(r,n){return Qn(r,n)}function Bv(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?Qn(r,n,t,a):!!h}function wu(r){if(!At(r))return!1;var n=or(r);return n==I||n==l||typeof r.message=="string"&&typeof r.name=="string"&&!is(r)}function zv(r){return typeof r=="number"&&hh(r)}function Di(r){if(!mt(r))return!1;var n=or(r);return n==se||n==fe||n==z||n==Dt}function Pl(r){return typeof r=="number"&&r==Me(r)}function Po(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=W}function mt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function At(r){return r!=null&&typeof r=="object"}var Tl=Or?_r(Or):k0;function qv(r,n){return r===n||Ya(r,n,fu(n))}function Hv(r,n,a){return a=typeof a=="function"?a:t,Ya(r,n,fu(n),a)}function Kv(r){return Nl(r)&&r!=+r}function kv(r){if(A1(r))throw new Pe(u);return Eh(r)}function Vv(r){return r===null}function Gv(r){return r==null}function Nl(r){return typeof r=="number"||At(r)&&or(r)==qe}function is(r){if(!At(r)||or(r)!=Le)return!1;var n=ro(r);if(n===null)return!0;var a=nt.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Qs.call(a)==Hg}var Eu=Zr?_r(Zr):V0;function Wv(r){return Pl(r)&&r>=-W&&r<=W}var Fl=qn?_r(qn):G0;function To(r){return typeof r=="string"||!Ne(r)&&At(r)&&or(r)==Fe}function wr(r){return typeof r=="symbol"||At(r)&&or(r)==Re}var In=Ki?_r(Ki):W0;function Yv(r){return r===t}function Jv(r){return At(r)&&tr(r)==Ae}function Xv(r){return At(r)&&or(r)==$e}var Qv=mo(Xa),Zv=mo(function(r,n){return r<=n});function Rl(r){if(!r)return[];if(gr(r))return To(r)?Hr(r):pr(r);if(Kn&&r[Kn])return Tg(r[Kn]());var n=tr(r),a=n==Ce?Ma:n==Se?Ys:An;return a(r)}function vi(r){if(!r)return r===0?r:0;if(r=Ur(r),r===re||r===-re){var n=r<0?-1:1;return n*te}return r===r?r:0}function Me(r){var n=vi(r),a=n%1;return n===n?a?n-a:n:0}function $l(r){return r?Wi(Me(r),0,ie):0}function Ur(r){if(typeof r=="number")return r;if(wr(r))return Y;if(mt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=mt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=eh(r);var a=da.test(r);return a||ga.test(r)?Te(r.slice(2),a?2:8):fa.test(r)?Y:+r}function Ul(r){return ti(r,Dr(r))}function ey(r){return r?Wi(Me(r),-W,W):r===0?r:0}function it(r){return r==null?"":mr(r)}var ty=Cn(function(r,n){if(ts(n)||gr(n)){ti(n,Gt(n),r);return}for(var a in n)nt.call(n,a)&&Yn(r,a,n[a])}),Ll=Cn(function(r,n){ti(n,Dr(n),r)}),No=Cn(function(r,n,a,h){ti(n,Dr(n),r,h)}),ry=Cn(function(r,n,a,h){ti(n,Gt(n),r,h)}),iy=pi(Ka);function ny(r,n){var a=En(r);return n==null?a:gh(a,n)}var sy=Ke(function(r,n){r=ht(r);var a=-1,h=n.length,p=h>2?n[2]:t;for(p&&ar(n[0],n[1],p)&&(h=1);++a<h;)for(var b=n[a],C=Dr(b),O=-1,M=C.length;++O<M;){var X=C[O],Q=r[X];(Q===t||kr(Q,_n[X])&&!nt.call(r,X))&&(r[X]=b[X])}return r}),oy=Ke(function(r){return r.push(t,el),Vt(Ml,t,r)});function ay(r,n){return Jc(r,be(n,3),ei)}function uy(r,n){return Jc(r,be(n,3),Va)}function cy(r,n){return r==null?r:ka(r,be(n,3),Dr)}function hy(r,n){return r==null?r:_h(r,be(n,3),Dr)}function ly(r,n){return r&&ei(r,be(n,3))}function fy(r,n){return r&&Va(r,be(n,3))}function dy(r){return r==null?[]:fo(r,Gt(r))}function py(r){return r==null?[]:fo(r,Dr(r))}function Cu(r,n,a){var h=r==null?t:Yi(r,n);return h===t?a:h}function gy(r,n){return r!=null&&il(r,n,M0)}function Su(r,n){return r!=null&&il(r,n,j0)}var Dy=Yh(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=Zs.call(n)),r[n]=a},Iu(vr)),vy=Yh(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=Zs.call(n)),nt.call(r,n)?r[n].push(a):r[n]=[a]},be),yy=Ke(Xn);function Gt(r){return gr(r)?dh(r):Ja(r)}function Dr(r){return gr(r)?dh(r,!0):Y0(r)}function by(r,n){var a={};return n=be(n,3),ei(r,function(h,p,b){fi(a,n(h,p,b),h)}),a}function _y(r,n){var a={};return n=be(n,3),ei(r,function(h,p,b){fi(a,p,n(h,p,b))}),a}var my=Cn(function(r,n,a){po(r,n,a)}),Ml=Cn(function(r,n,a,h){po(r,n,a,h)}),wy=pi(function(r,n){var a={};if(r==null)return a;var h=!1;n=bt(n,function(b){return b=Pi(b,r),h||(h=b.length>1),b}),ti(r,hu(r),a),h&&(a=Fr(a,T|R|N,D1));for(var p=n.length;p--;)ru(a,n[p]);return a});function Ey(r,n){return jl(r,Oo(be(n)))}var Cy=pi(function(r,n){return r==null?{}:X0(r,n)});function jl(r,n){if(r==null)return{};var a=bt(hu(r),function(h){return[h]});return n=be(n),Ph(r,a,function(h,p){return n(h,p[0])})}function Sy(r,n,a){n=Pi(n,r);var h=-1,p=n.length;for(p||(p=1,r=t);++h<p;){var b=r==null?t:r[ri(n[h])];b===t&&(h=p,b=a),r=Di(b)?b.call(r):b}return r}function xy(r,n,a){return r==null?r:Zn(r,n,a)}function Iy(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Zn(r,n,a,h)}var Bl=Qh(Gt),zl=Qh(Dr);function Ay(r,n,a){var h=Ne(r),p=h||Ni(r)||In(r);if(n=be(n,4),a==null){var b=r&&r.constructor;p?a=h?new b:[]:mt(r)?a=Di(b)?En(ro(r)):{}:a={}}return(p?Pr:ei)(r,function(C,O,M){return n(a,C,O,M)}),a}function Oy(r,n){return r==null?!0:ru(r,n)}function Py(r,n,a){return r==null?r:$h(r,n,su(a))}function Ty(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:$h(r,n,su(a),h)}function An(r){return r==null?[]:La(r,Gt(r))}function Ny(r){return r==null?[]:La(r,Dr(r))}function Fy(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=Ur(a),a=a===a?a:0),n!==t&&(n=Ur(n),n=n===n?n:0),Wi(Ur(r),n,a)}function Ry(r,n,a){return n=vi(n),a===t?(a=n,n=0):a=vi(a),r=Ur(r),B0(r,n,a)}function $y(r,n,a){if(a&&typeof a!="boolean"&&ar(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=vi(r),n===t?(n=r,r=0):n=vi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var p=lh();return er(r+p*(n-r+ut("1e-"+((p+"").length-1))),n)}return Za(r,n)}var Uy=Sn(function(r,n,a){return n=n.toLowerCase(),r+(a?ql(n):n)});function ql(r){return xu(it(r).toLowerCase())}function Hl(r){return r=it(r),r&&r.replace(ui,xg).replace(Aa,"")}function Ly(r,n,a){r=it(r),n=mr(n);var h=r.length;a=a===t?h:Wi(Me(a),0,h);var p=a;return a-=n.length,a>=0&&r.slice(a,p)==n}function My(r){return r=it(r),r&&vt.test(r)?r.replace(ji,Ig):r}function jy(r){return r=it(r),r&&Mt.test(r)?r.replace(St,"\\$&"):r}var By=Sn(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),zy=Sn(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),qy=Vh("toLowerCase");function Hy(r,n,a){r=it(r),n=Me(n);var h=n?yn(r):0;if(!n||h>=n)return r;var p=(n-h)/2;return _o(oo(p),a)+r+_o(so(p),a)}function Ky(r,n,a){r=it(r),n=Me(n);var h=n?yn(r):0;return n&&h<n?r+_o(n-h,a):r}function ky(r,n,a){r=it(r),n=Me(n);var h=n?yn(r):0;return n&&h<n?_o(n-h,a)+r:r}function Vy(r,n,a){return a||n==null?n=0:n&&(n=+n),Zg(it(r).replace(xt,""),n||0)}function Gy(r,n,a){return(a?ar(r,n,a):n===t)?n=1:n=Me(n),eu(it(r),n)}function Wy(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var Yy=Sn(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function Jy(r,n,a){return a&&typeof a!="number"&&ar(r,n,a)&&(n=a=t),a=a===t?ie:a>>>0,a?(r=it(r),r&&(typeof n=="string"||n!=null&&!Eu(n))&&(n=mr(n),!n&&vn(r))?Ti(Hr(r),0,a):r.split(n,a)):[]}var Xy=Sn(function(r,n,a){return r+(a?" ":"")+xu(n)});function Qy(r,n,a){return r=it(r),a=a==null?0:Wi(Me(a),0,r.length),n=mr(n),r.slice(a,a+n.length)==n}function Zy(r,n,a){var h=D.templateSettings;a&&ar(r,n,a)&&(n=t),r=it(r),n=No({},n,h,Zh);var p=No({},n.imports,h.imports,Zh),b=Gt(p),C=La(p,b),O,M,X=0,Q=n.interpolate||cn,ee="__p += '",ae=ja((n.escape||cn).source+"|"+Q.source+"|"+(Q===_t?la:cn).source+"|"+(n.evaluate||cn).source+"|$","g"),De="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Oa+"]")+`
`;r.replace(ae,function(we,Ge,Qe,Er,ur,Cr){return Qe||(Qe=Er),ee+=r.slice(X,Cr).replace(va,Ag),Ge&&(O=!0,ee+=`' +
__e(`+Ge+`) +
'`),ur&&(M=!0,ee+=`';
`+ur+`;
__p += '`),Qe&&(ee+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),X=Cr+we.length,we}),ee+=`';
`;var me=nt.call(n,"variable")&&n.variable;if(!me)ee=`with (obj) {
`+ee+`
}
`;else if(ca.test(me))throw new Pe(f);ee=(M?ee.replace(Xr,""):ee).replace(nr,"$1").replace(ai,"$1;"),ee="function("+(me||"obj")+`) {
`+(me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var ze=kl(function(){return rt(b,De+"return "+ee).apply(t,C)});if(ze.source=ee,wu(ze))throw ze;return ze}function eb(r){return it(r).toLowerCase()}function tb(r){return it(r).toUpperCase()}function rb(r,n,a){if(r=it(r),r&&(a||n===t))return eh(r);if(!r||!(n=mr(n)))return r;var h=Hr(r),p=Hr(n),b=th(h,p),C=rh(h,p)+1;return Ti(h,b,C).join("")}function ib(r,n,a){if(r=it(r),r&&(a||n===t))return r.slice(0,nh(r)+1);if(!r||!(n=mr(n)))return r;var h=Hr(r),p=rh(h,Hr(n))+1;return Ti(h,0,p).join("")}function nb(r,n,a){if(r=it(r),r&&(a||n===t))return r.replace(xt,"");if(!r||!(n=mr(n)))return r;var h=Hr(r),p=th(h,Hr(n));return Ti(h,p).join("")}function sb(r,n){var a=G,h=oe;if(mt(n)){var p="separator"in n?n.separator:p;a="length"in n?Me(n.length):a,h="omission"in n?mr(n.omission):h}r=it(r);var b=r.length;if(vn(r)){var C=Hr(r);b=C.length}if(a>=b)return r;var O=a-yn(h);if(O<1)return h;var M=C?Ti(C,0,O).join(""):r.slice(0,O);if(p===t)return M+h;if(C&&(O+=M.length-O),Eu(p)){if(r.slice(O).search(p)){var X,Q=M;for(p.global||(p=ja(p.source,it(Ar.exec(p))+"g")),p.lastIndex=0;X=p.exec(Q);)var ee=X.index;M=M.slice(0,ee===t?O:ee)}}else if(r.indexOf(mr(p),O)!=O){var ae=M.lastIndexOf(p);ae>-1&&(M=M.slice(0,ae))}return M+h}function ob(r){return r=it(r),r&&wt.test(r)?r.replace(wi,$g):r}var ab=Sn(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),xu=Vh("toUpperCase");function Kl(r,n,a){return r=it(r),n=a?t:n,n===t?Pg(r)?Mg(r):mg(r):r.match(n)||[]}var kl=Ke(function(r,n){try{return Vt(r,t,n)}catch(a){return wu(a)?a:new Pe(a)}}),ub=pi(function(r,n){return Pr(n,function(a){a=ri(a),fi(r,a,_u(r[a],r))}),r});function cb(r){var n=r==null?0:r.length,a=be();return r=n?bt(r,function(h){if(typeof h[1]!="function")throw new Tr(d);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var p=-1;++p<n;){var b=r[p];if(Vt(b[0],this,h))return Vt(b[1],this,h)}})}function hb(r){return $0(Fr(r,T))}function Iu(r){return function(){return r}}function lb(r,n){return r==null||r!==r?n:r}var fb=Wh(),db=Wh(!0);function vr(r){return r}function Au(r){return Ch(typeof r=="function"?r:Fr(r,T))}function pb(r){return xh(Fr(r,T))}function gb(r,n){return Ih(r,Fr(n,T))}var Db=Ke(function(r,n){return function(a){return Xn(a,r,n)}}),vb=Ke(function(r,n){return function(a){return Xn(r,a,n)}});function Ou(r,n,a){var h=Gt(n),p=fo(n,h);a==null&&!(mt(n)&&(p.length||!h.length))&&(a=n,n=r,r=this,p=fo(n,Gt(n)));var b=!(mt(a)&&"chain"in a)||!!a.chain,C=Di(r);return Pr(p,function(O){var M=n[O];r[O]=M,C&&(r.prototype[O]=function(){var X=this.__chain__;if(b||X){var Q=r(this.__wrapped__),ee=Q.__actions__=pr(this.__actions__);return ee.push({func:M,args:arguments,thisArg:r}),Q.__chain__=X,Q}return M.apply(r,Si([this.value()],arguments))})}),r}function yb(){return Xe._===this&&(Xe._=Kg),this}function Pu(){}function bb(r){return r=Me(r),Ke(function(n){return Ah(n,r)})}var _b=au(bt),mb=au(Yc),wb=au(Na);function Vl(r){return pu(r)?Fa(ri(r)):Q0(r)}function Eb(r){return function(n){return r==null?t:Yi(r,n)}}var Cb=Jh(),Sb=Jh(!0);function Tu(){return[]}function Nu(){return!1}function xb(){return{}}function Ib(){return""}function Ab(){return!0}function Ob(r,n){if(r=Me(r),r<1||r>W)return[];var a=ie,h=er(r,ie);n=be(n),r-=ie;for(var p=Ua(h,n);++a<r;)n(a);return p}function Pb(r){return Ne(r)?bt(r,ri):wr(r)?[r]:pr(fl(it(r)))}function Tb(r){var n=++qg;return it(r)+n}var Nb=bo(function(r,n){return r+n},0),Fb=uu("ceil"),Rb=bo(function(r,n){return r/n},1),$b=uu("floor");function Ub(r){return r&&r.length?lo(r,vr,Ga):t}function Lb(r,n){return r&&r.length?lo(r,be(n,2),Ga):t}function Mb(r){return Qc(r,vr)}function jb(r,n){return Qc(r,be(n,2))}function Bb(r){return r&&r.length?lo(r,vr,Xa):t}function zb(r,n){return r&&r.length?lo(r,be(n,2),Xa):t}var qb=bo(function(r,n){return r*n},1),Hb=uu("round"),Kb=bo(function(r,n){return r-n},0);function kb(r){return r&&r.length?$a(r,vr):0}function Vb(r,n){return r&&r.length?$a(r,be(n,2)):0}return D.after=pv,D.ary=El,D.assign=ty,D.assignIn=Ll,D.assignInWith=No,D.assignWith=ry,D.at=iy,D.before=Cl,D.bind=_u,D.bindAll=ub,D.bindKey=Sl,D.castArray=xv,D.chain=_l,D.chunk=$1,D.compact=U1,D.concat=L1,D.cond=cb,D.conforms=hb,D.constant=Iu,D.countBy=kD,D.create=ny,D.curry=xl,D.curryRight=Il,D.debounce=Al,D.defaults=sy,D.defaultsDeep=oy,D.defer=gv,D.delay=Dv,D.difference=M1,D.differenceBy=j1,D.differenceWith=B1,D.drop=z1,D.dropRight=q1,D.dropRightWhile=H1,D.dropWhile=K1,D.fill=k1,D.filter=GD,D.flatMap=JD,D.flatMapDeep=XD,D.flatMapDepth=QD,D.flatten=Dl,D.flattenDeep=V1,D.flattenDepth=G1,D.flip=vv,D.flow=fb,D.flowRight=db,D.fromPairs=W1,D.functions=dy,D.functionsIn=py,D.groupBy=ZD,D.initial=J1,D.intersection=X1,D.intersectionBy=Q1,D.intersectionWith=Z1,D.invert=Dy,D.invertBy=vy,D.invokeMap=tv,D.iteratee=Au,D.keyBy=rv,D.keys=Gt,D.keysIn=Dr,D.map=xo,D.mapKeys=by,D.mapValues=_y,D.matches=pb,D.matchesProperty=gb,D.memoize=Ao,D.merge=my,D.mergeWith=Ml,D.method=Db,D.methodOf=vb,D.mixin=Ou,D.negate=Oo,D.nthArg=bb,D.omit=wy,D.omitBy=Ey,D.once=yv,D.orderBy=iv,D.over=_b,D.overArgs=bv,D.overEvery=mb,D.overSome=wb,D.partial=mu,D.partialRight=Ol,D.partition=nv,D.pick=Cy,D.pickBy=jl,D.property=Vl,D.propertyOf=Eb,D.pull=iD,D.pullAll=yl,D.pullAllBy=nD,D.pullAllWith=sD,D.pullAt=oD,D.range=Cb,D.rangeRight=Sb,D.rearg=_v,D.reject=av,D.remove=aD,D.rest=mv,D.reverse=yu,D.sampleSize=cv,D.set=xy,D.setWith=Iy,D.shuffle=hv,D.slice=uD,D.sortBy=dv,D.sortedUniq=gD,D.sortedUniqBy=DD,D.split=Jy,D.spread=wv,D.tail=vD,D.take=yD,D.takeRight=bD,D.takeRightWhile=_D,D.takeWhile=mD,D.tap=UD,D.throttle=Ev,D.thru=So,D.toArray=Rl,D.toPairs=Bl,D.toPairsIn=zl,D.toPath=Pb,D.toPlainObject=Ul,D.transform=Ay,D.unary=Cv,D.union=wD,D.unionBy=ED,D.unionWith=CD,D.uniq=SD,D.uniqBy=xD,D.uniqWith=ID,D.unset=Oy,D.unzip=bu,D.unzipWith=bl,D.update=Py,D.updateWith=Ty,D.values=An,D.valuesIn=Ny,D.without=AD,D.words=Kl,D.wrap=Sv,D.xor=OD,D.xorBy=PD,D.xorWith=TD,D.zip=ND,D.zipObject=FD,D.zipObjectDeep=RD,D.zipWith=$D,D.entries=Bl,D.entriesIn=zl,D.extend=Ll,D.extendWith=No,Ou(D,D),D.add=Nb,D.attempt=kl,D.camelCase=Uy,D.capitalize=ql,D.ceil=Fb,D.clamp=Fy,D.clone=Iv,D.cloneDeep=Ov,D.cloneDeepWith=Pv,D.cloneWith=Av,D.conformsTo=Tv,D.deburr=Hl,D.defaultTo=lb,D.divide=Rb,D.endsWith=Ly,D.eq=kr,D.escape=My,D.escapeRegExp=jy,D.every=VD,D.find=WD,D.findIndex=pl,D.findKey=ay,D.findLast=YD,D.findLastIndex=gl,D.findLastKey=uy,D.floor=$b,D.forEach=ml,D.forEachRight=wl,D.forIn=cy,D.forInRight=hy,D.forOwn=ly,D.forOwnRight=fy,D.get=Cu,D.gt=Nv,D.gte=Fv,D.has=gy,D.hasIn=Su,D.head=vl,D.identity=vr,D.includes=ev,D.indexOf=Y1,D.inRange=Ry,D.invoke=yy,D.isArguments=Qi,D.isArray=Ne,D.isArrayBuffer=Rv,D.isArrayLike=gr,D.isArrayLikeObject=Nt,D.isBoolean=$v,D.isBuffer=Ni,D.isDate=Uv,D.isElement=Lv,D.isEmpty=Mv,D.isEqual=jv,D.isEqualWith=Bv,D.isError=wu,D.isFinite=zv,D.isFunction=Di,D.isInteger=Pl,D.isLength=Po,D.isMap=Tl,D.isMatch=qv,D.isMatchWith=Hv,D.isNaN=Kv,D.isNative=kv,D.isNil=Gv,D.isNull=Vv,D.isNumber=Nl,D.isObject=mt,D.isObjectLike=At,D.isPlainObject=is,D.isRegExp=Eu,D.isSafeInteger=Wv,D.isSet=Fl,D.isString=To,D.isSymbol=wr,D.isTypedArray=In,D.isUndefined=Yv,D.isWeakMap=Jv,D.isWeakSet=Xv,D.join=eD,D.kebabCase=By,D.last=$r,D.lastIndexOf=tD,D.lowerCase=zy,D.lowerFirst=qy,D.lt=Qv,D.lte=Zv,D.max=Ub,D.maxBy=Lb,D.mean=Mb,D.meanBy=jb,D.min=Bb,D.minBy=zb,D.stubArray=Tu,D.stubFalse=Nu,D.stubObject=xb,D.stubString=Ib,D.stubTrue=Ab,D.multiply=qb,D.nth=rD,D.noConflict=yb,D.noop=Pu,D.now=Io,D.pad=Hy,D.padEnd=Ky,D.padStart=ky,D.parseInt=Vy,D.random=$y,D.reduce=sv,D.reduceRight=ov,D.repeat=Gy,D.replace=Wy,D.result=Sy,D.round=Hb,D.runInContext=L,D.sample=uv,D.size=lv,D.snakeCase=Yy,D.some=fv,D.sortedIndex=cD,D.sortedIndexBy=hD,D.sortedIndexOf=lD,D.sortedLastIndex=fD,D.sortedLastIndexBy=dD,D.sortedLastIndexOf=pD,D.startCase=Xy,D.startsWith=Qy,D.subtract=Kb,D.sum=kb,D.sumBy=Vb,D.template=Zy,D.times=Ob,D.toFinite=vi,D.toInteger=Me,D.toLength=$l,D.toLower=eb,D.toNumber=Ur,D.toSafeInteger=ey,D.toString=it,D.toUpper=tb,D.trim=rb,D.trimEnd=ib,D.trimStart=nb,D.truncate=sb,D.unescape=ob,D.uniqueId=Tb,D.upperCase=ab,D.upperFirst=xu,D.each=ml,D.eachRight=wl,D.first=vl,Ou(D,function(){var r={};return ei(D,function(n,a){nt.call(D.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),D.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),Pr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:kt(Me(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=er(a,h.__takeCount__):h.__views__.push({size:er(a,ie),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Pr(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==$||a==le;Ye.prototype[r]=function(p){var b=this.clone();return b.__iteratees__.push({iteratee:be(p,3),type:a}),b.__filtered__=b.__filtered__||h,b}}),Pr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Pr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return Xn(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(Oo(be(r)))},Ye.prototype.slice=function(r,n){r=Me(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(ie)},ei(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),p=D[h?"take"+(n=="last"?"Right":""):n],b=h||/^find/.test(n);p&&(D.prototype[n]=function(){var C=this.__wrapped__,O=h?[1]:arguments,M=C instanceof Ye,X=O[0],Q=M||Ne(C),ee=function(Ge){var Qe=p.apply(D,Si([Ge],O));return h&&ae?Qe[0]:Qe};Q&&a&&typeof X=="function"&&X.length!=1&&(M=Q=!1);var ae=this.__chain__,De=!!this.__actions__.length,me=b&&!ae,ze=M&&!De;if(!b&&Q){C=ze?C:new Ye(this);var we=r.apply(C,O);return we.__actions__.push({func:So,args:[ee],thisArg:t}),new Nr(we,ae)}return me&&ze?r.apply(this,O):(we=this.thru(ee),me?h?we.value()[0]:we.value():we)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(r){var n=Js[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var p=arguments;if(h&&!this.__chain__){var b=this.value();return n.apply(Ne(b)?b:[],p)}return this[a](function(C){return n.apply(Ne(C)?C:[],p)})}}),ei(Ye.prototype,function(r,n){var a=D[n];if(a){var h=a.name+"";nt.call(wn,h)||(wn[h]=[]),wn[h].push({name:n,func:a})}}),wn[yo(t,J).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=o0,Ye.prototype.reverse=a0,Ye.prototype.value=u0,D.prototype.at=LD,D.prototype.chain=MD,D.prototype.commit=jD,D.prototype.next=BD,D.prototype.plant=qD,D.prototype.reverse=HD,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=KD,D.prototype.first=D.prototype.head,Kn&&(D.prototype[Kn]=zD),D},bn=jg();Tt?((Tt.exports=bn)._=bn,ct._=bn):Xe._=bn}).call(gs)})(Dc,Dc.exports);var tS=Object.defineProperty,rS=Object.defineProperties,iS=Object.getOwnPropertyDescriptors,Od=Object.getOwnPropertySymbols,nS=Object.prototype.hasOwnProperty,sS=Object.prototype.propertyIsEnumerable,Pd=(i,e,t)=>e in i?tS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ro=(i,e)=>{for(var t in e||(e={}))nS.call(e,t)&&Pd(i,t,e[t]);if(Od)for(var t of Od(e))sS.call(e,t)&&Pd(i,t,e[t]);return i},oS=(i,e)=>rS(i,iS(e));function jr(i,e,t){let s;const o=vc(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${eS}?chainId=eip155:${o}&projectId=${t}`),s}function vc(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function pg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function aS(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const u=e.namespaces[o].accounts;s.push(...u)}),s}function uS(i={},e={}){const t=Td(i),s=Td(e);return Dc.exports.merge(t,s)}function Td(i){var e,t,s,o;const u={};if(!Rn(i))return u;for(const[d,f]of Object.entries(i)){const g=Fc(d)?[d]:f.chains,_=f.methods||[],w=f.events||[],T=f.rpcMap||{},R=Mo(d);u[R]=oS(Ro(Ro({},u[R]),f),{chains:Mu(g,(e=u[R])==null?void 0:e.chains),methods:Mu(_,(t=u[R])==null?void 0:t.methods),events:Mu(w,(s=u[R])==null?void 0:s.events),rpcMap:Ro(Ro({},T),(o=u[R])==null?void 0:o.rpcMap)})}return u}function cS(i){return i.includes(":")?i.split(":")[2]:i}function hS(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],u=s.events||[],d=s.accounts||[],f=Fc(t)?[t]:s.chains?s.chains:pg(s.accounts);e[t]={chains:f,methods:o,events:u,accounts:d}}return e}const gg={},$t=i=>gg[i],Qu=(i,e)=>{gg[i]=e};class lS{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||jr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||jr(e,this.namespace);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}class fS{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=vc(e);if(!this.httpProviders[s]){const o=t||jr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=vc(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const u=parseInt(o,16);if(this.isChainApproved(u))this.setDefaultChain(`${u}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${u}`);else throw new Error(`Failed to switch to chain 'eip155:${u}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class dS{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}class pS{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}class gS{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}class DS{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}class vS{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Mi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Li(new un(s,$t("disableProviderPing")))}}var yS=Object.defineProperty,bS=Object.defineProperties,_S=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,mS=Object.prototype.hasOwnProperty,wS=Object.prototype.propertyIsEnumerable,Fd=(i,e,t)=>e in i?yS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,$o=(i,e)=>{for(var t in e||(e={}))mS.call(e,t)&&Fd(i,t,e[t]);if(Nd)for(var t of Nd(e))wS.call(e,t)&&Fd(i,t,e[t]);return i},Zu=(i,e)=>bS(i,_S(e));class Gc{constructor(e){this.events=new mc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Id})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Gc(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:$o({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(u=>{this.session=u,this.namespaces||(this.namespaces=hS(u.namespaces),this.persist("namespaces",this.namespaces))}).catch(u=>{if(u.message!==fg)throw u;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(oi(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await WC.init({logger:this.providerOpts.logger||Id,relayUrl:this.providerOpts.relayUrl||XC,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Mo(t)))];Qu("client",this.client),Qu("events",this.events),Qu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=aS(t,this.session),o=pg(s),u=uS(this.namespaces,this.optionalNamespaces),d=Zu($o({},u[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new fS({namespace:d});break;case"solana":this.rpcProviders[t]=new dS({namespace:d});break;case"cosmos":this.rpcProviders[t]=new pS({namespace:d});break;case"polkadot":this.rpcProviders[t]=new lS({namespace:d});break;case"cip34":this.rpcProviders[t]=new gS({namespace:d});break;case"elrond":this.rpcProviders[t]=new DS({namespace:d});break;case"multiversx":this.rpcProviders[t]=new vS({namespace:d});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&oi(o)&&this.events.emit("accountsChanged",o.map(cS))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,u=(s=this.client)==null?void 0:s.session.get(e);this.session=Zu($o({},u),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Zu($o({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Mi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(d=>Mo(d)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Mo(Object.keys(this.namespaces)[0]),u=this.rpcProviders[o].getDefaultChain();return[o,u]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,u]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(u),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Ad}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Ad}/${e}`)}}const ES=Gc,CS="wc",SS="ethereum_provider",xS=`${CS}@2:${SS}:`,IS="https://rpc.walletconnect.com/v1/",yc=["eth_sendTransaction","personal_sign"],AS=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],bc=["chainChanged","accountsChanged"],OS=["message","disconnect","connect"];var PS=Object.defineProperty,TS=Object.defineProperties,NS=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,FS=Object.prototype.hasOwnProperty,RS=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?PS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ds=(i,e)=>{for(var t in e||(e={}))FS.call(e,t)&&$d(i,t,e[t]);if(Rd)for(var t of Rd(e))RS.call(e,t)&&$d(i,t,e[t]);return i},Ud=(i,e)=>TS(i,NS(e));function Go(i){return Number(i[0].split(":")[1])}function ec(i){return`0x${i.toString(16)}`}function $S(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:u,optionalEvents:d,rpcMap:f}=i;if(!oi(e))throw new Error("Invalid chains");const g={chains:e,methods:s||yc,events:u||bc,rpcMap:Ds({},e.length?{[Go(e)]:f[Go(e)]}:{})},_=u==null?void 0:u.filter(N=>!bc.includes(N)),w=s==null?void 0:s.filter(N=>!yc.includes(N));if(!t&&!d&&!o&&!(_!=null&&_.length)&&!(w!=null&&w.length))return{required:e.length?g:void 0};const T=(_==null?void 0:_.length)&&(w==null?void 0:w.length)||!t,R={chains:[...new Set(T?g.chains.concat(t||[]):t)],methods:[...new Set(g.methods.concat(o!=null&&o.length?o:AS))],events:[...new Set(g.events.concat(d||OS))],rpcMap:f};return{required:e.length?g:void 0,optional:t.length?R:void 0}}class Wc{constructor(){this.events=new xr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=xS,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Wc;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=$S(this.rpc);try{const o=await new Promise(async(d,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(_=>{!_.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Ud(Ds({namespaces:Ds({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(_=>{d(_)}).catch(_=>{f(new Error(_.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const u=Hw(o.namespaces,[this.namespace]);this.setAccounts(u),this.events.emit("connect",{chainId:ec(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",ec(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ud(Ds({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ec(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],u=(s=e==null?void 0:e.optionalChains)!=null?s:[],d=o.concat(u);if(!d.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||yc:[],g=o.length?(e==null?void 0:e.events)||bc:[],_=(e==null?void 0:e.optionalMethods)||[],w=(e==null?void 0:e.optionalEvents)||[],T=(e==null?void 0:e.rpcMap)||this.buildRpcMap(d,e.projectId),R=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(N=>this.formatChainId(N)),optionalChains:u.map(N=>this.formatChainId(N)),methods:f,events:g,optionalMethods:_,optionalEvents:w,rpcMap:T,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:R,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Go(this.rpc.chains):Go(this.rpc.optionalChains),this.signer=await ES.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Wb(()=>import("./index-b49c4486.js").then(o=>o.a),["assets/index-b49c4486.js","assets/index-c327062d.js","assets/index-868f5de6.css"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Ds({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&oi(t)&&(this.rpc.chains=t.map(u=>this.formatChainId(u)),t.forEach(u=>{this.rpc.rpcMap[u]=(o==null?void 0:o[u])||this.getRpcUrl(u)})),s&&oi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(u=>this.formatChainId(u)),s.forEach(u=>{this.rpc.rpcMap[u]=(o==null?void 0:o[u])||this.getRpcUrl(u)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${IS}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const ZS=Wc;export{ZS as EthereumProvider,OS as OPTIONAL_EVENTS,AS as OPTIONAL_METHODS,bc as REQUIRED_EVENTS,yc as REQUIRED_METHODS,Wc as default};
